diff --git a/Lead-Client-Source/EterLib/NetStream.cpp b/Lead-Client-Source/EterLib/NetStream.cpp
index cdcd86497..754c5e67f 100644
--- a/Lead-Client-Source/EterLib/NetStream.cpp
+++ b/Lead-Client-Source/EterLib/NetStream.cpp
@@ -558,7 +558,6 @@ const char * GetSendHeaderName(BYTE header)
 		stringList[105] = "HEADER_CG_HACK";
 		stringList[106] = "HEADER_CG_CHANGE_NAME";
 		stringList[107] = "HEADER_CG_SMS";
-		stringList[108] = "HEADER_CG_MATRIX_CARD";
 		stringList[109] = "HEADER_CG_LOGIN2";
 		stringList[110] = "HEADER_CG_DUNGEON";
 		stringList[111] = "HEADER_CG_LOGIN3";
@@ -676,7 +675,6 @@ const char * GetRecvHeaderName(BYTE header)
 		stringList[113] = "HEADER_GC_MAIN_CHARACTER_NEW";
 		stringList[114] = "HEADER_GC_USE_POTION";
 		stringList[115] = "HEADER_GC_NPC_POSITION";
-		stringList[116] = "HEADER_GC_MATRIX_CARD";
 		stringList[117] = "HEADER_GC_CHARACTER_UPDATE2";
 		stringList[118] = "HEADER_GC_LOGIN_KEY";
 		stringList[119] = "HEADER_GC_REFINE_INFORMATION_NEW";
diff --git a/Lead-Client-Source/UserInterface/AccountConnector.cpp b/Lead-Client-Source/UserInterface/AccountConnector.cpp
index ccc44967c..e10df2614 100644
--- a/Lead-Client-Source/UserInterface/AccountConnector.cpp
+++ b/Lead-Client-Source/UserInterface/AccountConnector.cpp
@@ -61,52 +61,8 @@ void CAccountConnector::Disconnect()
 	__OfflineState_Set();
 }
 
-bool CAccountConnector::SendNEWCIBNPasspodAnswerPacket(const char * answer)
-{
-	TPacketCGNEWCIBNPasspodAnswer answerPacket;
-	answerPacket.bHeader = HEADER_CG_NEWCIBN_PASSPOD_ANSWER;
-	strncpy(answerPacket.szAnswer, answer, NEWCIBN_PASSPOD_ANSWER_MAX_LEN);
-	answerPacket.szAnswer[NEWCIBN_PASSPOD_ANSWER_MAX_LEN] = '\0';	
-	if (!Send(sizeof(answerPacket), &answerPacket))
-	{
-		TraceError("SendNEWCIBNPasspodAnswerPacket");
-		return false;
-	}
-	return SendSequence();
-}
 
-bool CAccountConnector::SendRunupMatrixCardPacket(const char * c_szMatrixCardString)
-{
-	TPacketCGRunupMatrixAnswer answerPacket;
-	answerPacket.bHeader = HEADER_CG_RUNUP_MATRIX_ANSWER;
-	strncpy(answerPacket.szAnswer, c_szMatrixCardString, RUNUP_MATRIX_ANSWER_MAX_LEN);
-	answerPacket.szAnswer[RUNUP_MATRIX_ANSWER_MAX_LEN] = '\0';
-	if (!Send(sizeof(answerPacket), &answerPacket))
-	{
-		TraceError("SendRunupMatrixCardPacketError");
-		return false;
-	}
-	return SendSequence();
-}
 
-bool CAccountConnector::SendChinaMatrixCardPacket(const char * c_szMatrixCardString)
-{
-	TPacketCGChinaMatrixCard MatrixCardPacket;
-	MatrixCardPacket.bHeader = HEADER_CG_CHINA_MATRIX_CARD;
-	strncpy(MatrixCardPacket.szAnswer, c_szMatrixCardString, CHINA_MATRIX_ANSWER_MAX_LEN);
-	MatrixCardPacket.szAnswer[CHINA_MATRIX_ANSWER_MAX_LEN] = '\0';
-
-	if (!Send(sizeof(MatrixCardPacket), &MatrixCardPacket))
-	{
-		Tracen("SendLogin Error");
-		return false;
-	}
-
-	CPythonNetworkStream::Instance().SetWaitFlag();
-	m_isWaitKey = TRUE;
-
-	return SendSequence();
-}
 
 void CAccountConnector::Process()
 {
@@ -185,13 +141,10 @@ bool CAccountConnector::__AuthState_Process()
 	if (!__AnalyzePacket(HEADER_GC_LOGIN_FAILURE, sizeof(TPacketGCAuthSuccess), &CAccountConnector::__AuthState_RecvAuthFailure))
 		return true;
 
-	if (!__AnalyzePacket(HEADER_GC_CHINA_MATRIX_CARD, sizeof(TPacketGCChinaMatrixCard), &CAccountConnector::__AuthState_RecvChinaMatrixCard))
 		return true;
 
-	if (!__AnalyzePacket(HEADER_GC_RUNUP_MATRIX_QUIZ, sizeof(TPacketGCRunupMatrixQuiz), &CAccountConnector::__AuthState_RecvRunupMatrixQuiz))
 		return true;
 
-	if (!__AnalyzePacket(HEADER_GC_NEWCIBN_PASSPOD_REQUEST, sizeof(TPacketGCNEWCIBNPasspodRequest), &CAccountConnector::__AuthState_RecvNEWCIBNPasspodRequest))
 		return true;
 
 	if (!__AnalyzePacket(HEADER_GC_HANDSHAKE, sizeof(TPacketGCHandshake), &CAccountConnector::__AuthState_RecvHandshake))
@@ -509,50 +462,11 @@ bool CAccountConnector::__AuthState_RecvAuthFailure()
 	return true;
 }
 
-bool CAccountConnector::__AuthState_RecvRunupMatrixQuiz()
-{
-	TPacketGCRunupMatrixQuiz kMatrixQuizPacket;
-	if (!Recv(sizeof(TPacketGCRunupMatrixQuiz), &kMatrixQuizPacket))
-		return false;
 
-	PyCallClassMemberFunc(m_poHandler, "BINARY_OnRunupMatrixQuiz", Py_BuildValue("(s)", kMatrixQuizPacket.szQuiz));	
-	return true;
-}
-
-bool CAccountConnector::__AuthState_RecvNEWCIBNPasspodRequest()
-{
-	TPacketGCNEWCIBNPasspodRequest kRequestPacket;
-	if (!Recv(sizeof(kRequestPacket), &kRequestPacket))
-		return false;
-
-	PyCallClassMemberFunc(m_poHandler, "BINARY_OnNEWCIBNPasspodRequest", Py_BuildValue("()"));	
-	return true;
-}
 
 #define ROW(rows, i) ((rows >> ((4 - i - 1) * 8)) & 0x000000FF)
 #define COL(cols, i) ((cols >> ((4 - i - 1) * 8)) & 0x000000FF)
 
-bool CAccountConnector::__AuthState_RecvChinaMatrixCard()
-{
-	TPacketGCChinaMatrixCard kMatrixCardPacket;
-	if (!Recv(sizeof(TPacketGCChinaMatrixCard), &kMatrixCardPacket))
-		return false;
-
-	if (m_poHandler)
-	{
-		PyObject * pyValue = Py_BuildValue("(iiiiiiii)",	ROW(kMatrixCardPacket.dwRows, 0),
-															ROW(kMatrixCardPacket.dwRows, 1),
-															ROW(kMatrixCardPacket.dwRows, 2),
-															ROW(kMatrixCardPacket.dwRows, 3),
-															COL(kMatrixCardPacket.dwCols, 0),
-															COL(kMatrixCardPacket.dwCols, 1),
-															COL(kMatrixCardPacket.dwCols, 2),
-															COL(kMatrixCardPacket.dwCols, 3));
-		PyCallClassMemberFunc(m_poHandler, "OnMatrixCard", pyValue);
-	}
-
-	return true;
-}
 
 #ifdef _IMPROVED_PACKET_ENCRYPTION_
 bool CAccountConnector::__AuthState_RecvKeyAgreement()
diff --git a/Lead-Client-Source/UserInterface/AccountConnector.h b/Lead-Client-Source/UserInterface/AccountConnector.h
index d7be7faf2..dacb9249c 100644
--- a/Lead-Client-Source/UserInterface/AccountConnector.h
+++ b/Lead-Client-Source/UserInterface/AccountConnector.h
@@ -21,9 +21,6 @@ class CAccountConnector : public CNetworkStream, public CSingleton<CAccountConne
 		void SetLoginInfo(const char * c_szName, const char * c_szPwd);
 		void ClearLoginInfo( void );
 
-		bool SendChinaMatrixCardPacket(const char * c_szMatrixCardString);
-		bool SendRunupMatrixCardPacket(const char * c_szMatrixCardString);
-		bool SendNEWCIBNPasspodAnswerPacket(const char * answer);
 
 		bool Connect(const char * c_szAddr, int iPort, const char * c_szAccountAddr, int iAccountPort);
 		void Disconnect();
@@ -56,9 +53,7 @@ class CAccountConnector : public CNetworkStream, public CSingleton<CAccountConne
 		bool __AuthState_RecvAuthSuccess_OpenID();
 #endif /* USE_OPENID */
 		bool __AuthState_RecvAuthFailure();
-		bool __AuthState_RecvChinaMatrixCard();
 		bool __AuthState_RecvRunupMatrixQuiz();
-		bool __AuthState_RecvNEWCIBNPasspodRequest();
 		bool __AuthState_RecvPanamaPack();
 #ifdef _IMPROVED_PACKET_ENCRYPTION_
 		bool __AuthState_RecvKeyAgreement();
diff --git a/Lead-Client-Source/UserInterface/Locale.cpp b/Lead-Client-Source/UserInterface/Locale.cpp
index b83d0b38b..db314d709 100644
--- a/Lead-Client-Source/UserInterface/Locale.cpp
+++ b/Lead-Client-Source/UserInterface/Locale.cpp
@@ -12,7 +12,6 @@ const char* LSS_JAPAN		= "JAPAN";
 const char* LSS_ENGLISH		= "ENGLISH";
 const char* LSS_HONGKONG	= "HONGKONG";
 const char* LSS_TAIWAN		= "TAIWAN";
-const char* LSS_NEWCIBN		= "NEWCIBN";
 const char* LSS_EUROPE		= "EUROPE";
 const char* LSS_GLOBAL		= "GLOBAL";
 
@@ -183,7 +182,7 @@ bool LocaleService_IsCHEONMA()
 
 // END_OF_CHEONMA
 
-#if defined(LOCALE_SERVICE_EUROPE) || defined(LOCALE_SERVICE_BRAZIL) || defined(LOCALE_SERVICE_CANADA) || defined(LOCALE_SERVICE_SINGAPORE) || defined(LOCALE_SERVICE_VIETNAM) || defined(LOCALE_SERVICE_TAIWAN) || defined(LOCALE_SERVICE_NEWCIBN)
+#if defined(LOCALE_SERVICE_EUROPE) || defined(LOCALE_SERVICE_BRAZIL) || defined(LOCALE_SERVICE_CANADA) || defined(LOCALE_SERVICE_SINGAPORE) || defined(LOCALE_SERVICE_VIETNAM) || defined(LOCALE_SERVICE_TAIWAN) 
 #define _LSS_USE_LOCALE_CFG			1
 #define _LSS_SERVICE_NAME			LSS_EUROPE
 #elif defined(LOCALE_SERVICE_ITALY)
@@ -216,8 +215,6 @@ bool LocaleService_IsCHEONMA()
 #define _LSS_SERVICE_CODEPAGE		CP_CHINESE_TRAD
 #define _LSS_SERVICE_LOCALE_NAME	"taiwan"
 #define _LSS_SERVICE_LOCALE_PATH	"locale/taiwan"
-#elif defined(LOCALE_SERVICE_NEWCIBN)
-#define _LSS_SERVICE_NAME			LSS_NEWCIBN
 #define _LSS_SERVICE_CODEPAGE		CP_CHINESE_SIMPLE
 #define _LSS_SERVICE_LOCALE_NAME	"newcibn"
 #define _LSS_SERVICE_LOCALE_PATH	"locale/newcibn"
@@ -283,7 +280,6 @@ struct SLOCALEDATA
 	{ LSS_JAPAN,	"japan",		932,	"testtesttesttest"	},		// Japan
 	{ LSS_EUROPE,	"br",			1252,	"testtesttesttest"	},		// OnGame (Brazil)
 	{ LSS_HONGKONG,	"hongkong",		950,	"testtesttesttest"	},		// HongKong & Taiwan
-	{ LSS_NEWCIBN,	"newcibn",		936,	"testtesttesttest"	},		// CIBN (Free world)
 	{ LSS_ENGLISH,	"english",		949,	"testtesttesttest"	},		// English (Obsoleted)
 	{ LSS_YMIR,		"kr",			949,	"testtesttesttest"	},		// Korea (Obsoleted)
 	{ NULL,			NULL,			0,		"testtesttesttest"	}
@@ -396,7 +392,6 @@ bool LocaleService_IsENGLISH()	{ return (stricmp( LocaleService_GetName(), LSS_E
 bool LocaleService_IsEUROPE()	{ return (stricmp( LocaleService_GetName(), LSS_EUROPE ) == 0);		}
 bool LocaleService_IsHONGKONG()	{ return (stricmp( LocaleService_GetName(), LSS_HONGKONG ) == 0);	}
 bool LocaleService_IsTAIWAN()	{ return (stricmp( LocaleService_GetName(), LSS_TAIWAN ) == 0);		}
-bool LocaleService_IsNEWCIBN()	{ return (stricmp( LocaleService_GetName(), LSS_NEWCIBN ) == 0);	}
 
 #if defined(LOCALE_SERVICE_WE_JAPAN)
 BOOL LocaleService_IsLeadByte( const char chByte )
diff --git a/Lead-Client-Source/UserInterface/Locale.h b/Lead-Client-Source/UserInterface/Locale.h
index d1630429c..62206dac1 100644
--- a/Lead-Client-Source/UserInterface/Locale.h
+++ b/Lead-Client-Source/UserInterface/Locale.h
@@ -7,7 +7,6 @@ bool		LocaleService_IsJAPAN();
 bool		LocaleService_IsENGLISH();
 bool		LocaleService_IsHONGKONG();
 bool		LocaleService_IsTAIWAN();
-bool		LocaleService_IsNEWCIBN();
 bool		LocaleService_IsEUROPE();
 bool		LocaleService_IsWorldEdition();
 
diff --git a/Lead-Client-Source/UserInterface/Locale_inc_NEWCIBN.h b/Lead-Client-Source/UserInterface/Locale_inc_NEWCIBN.h
deleted file mode 100644
index 4c20a68e7..000000000
--- a/Lead-Client-Source/UserInterface/Locale_inc_NEWCIBN.h
+++ /dev/null
@@ -1,6 +0,0 @@
-#define LOCALE_SERVICE_NEWCIBN			// 중국 자유세계
-
-#define ENABLE_COSTUME_SYSTEM
-#define ENABLE_ENERGY_SYSTEM
-#define ENABLE_DRAGON_SOUL_SYSTEM
-#define ENABLE_NEW_EQUIPMENT_SYSTEM
\ No newline at end of file
diff --git a/Lead-Client-Source/UserInterface/Packet.h b/Lead-Client-Source/UserInterface/Packet.h
index 0fd90dfaf..377b7be0a 100644
--- a/Lead-Client-Source/UserInterface/Packet.h
+++ b/Lead-Client-Source/UserInterface/Packet.h
@@ -119,7 +119,6 @@ enum
 	HEADER_CG_HACK								= 105,
     HEADER_CG_CHANGE_NAME                       = 106,
     HEADER_CG_SMS                               = 107,
-    HEADER_CG_CHINA_MATRIX_CARD                 = 108,
     HEADER_CG_LOGIN2                            = 109,
 	HEADER_CG_DUNGEON							= 110,
 	HEADER_CG_LOGIN3							= 111,
@@ -129,8 +128,6 @@ enum
 	HEADER_CG_LOGIN4							= 115,
 	HEADER_CG_LOGIN5_OPENID						= 116,	//OpenID : 실행시 받은 인증키를 서버에 보냄.
 
-	HEADER_CG_RUNUP_MATRIX_ANSWER               = 201,
-	HEADER_CG_NEWCIBN_PASSPOD_ANSWER			= 202,
 
 
 	HEADER_CG_DRAGON_SOUL_REFINE			= 205,
@@ -263,7 +260,6 @@ enum
     HEADER_GC_SEPCIAL_EFFECT                    = 114,
 	HEADER_GC_NPC_POSITION						= 115,
 
-    HEADER_GC_CHINA_MATRIX_CARD                 = 116,
     HEADER_GC_CHARACTER_UPDATE2                 = 117,
     HEADER_GC_LOGIN_KEY                         = 118,
     HEADER_GC_REFINE_INFORMATION_NEW            = 119,
@@ -304,9 +300,6 @@ enum
 
 	HEADER_GC_AUTH_SUCCESS_OPENID				= 154,
 
-	HEADER_GC_RUNUP_MATRIX_QUIZ                 = 201,
-	HEADER_GC_NEWCIBN_PASSPOD_REQUEST			= 202,
-	HEADER_GC_NEWCIBN_PASSPOD_FAILURE			= 203,
 
 #ifdef __AUCTION__
 	HEADER_GC_AUCTOIN_ITEM_LIST					= 206,
@@ -374,12 +367,7 @@ enum
 
 	REFINE_MATERIAL_MAX_NUM = 5,
 
-	CHINA_MATRIX_ANSWER_MAX_LEN	= 8,
 
-	RUNUP_MATRIX_QUIZ_MAX_LEN	= 8,
-	RUNUP_MATRIX_ANSWER_MAX_LEN = 4,
-	NEWCIBN_PASSPOD_ANSWER_MAX_LEN = 8,
-	NEWCIBN_PASSPOD_FAILURE_MAX_LEN = 128,
 
 	WEAR_MAX_NUM = 11,
 
@@ -394,654 +382,8 @@ enum
 
 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
 // Mark
-typedef struct command_mark_login
-{
-    BYTE    header;
-    DWORD   handle;
-    DWORD   random_key;
-} TPacketCGMarkLogin;
-
-typedef struct command_mark_upload
-{
-    BYTE    header;
-    DWORD   gid;
-    BYTE    image[16*12*4];
-} TPacketCGMarkUpload;
-
-typedef struct command_mark_idxlist
-{
-    BYTE    header;
-} TPacketCGMarkIDXList;
-
-typedef struct command_mark_crclist
-{
-    BYTE    header;
-    BYTE    imgIdx;
-    DWORD   crclist[80];
-} TPacketCGMarkCRCList;
-
-typedef struct packet_mark_idxlist
-{
-    BYTE    header;
-	DWORD	bufSize;
-    WORD    count;
-    //뒤에 size * (WORD + WORD)만큼 데이터 붙음
-} TPacketGCMarkIDXList;
-
-typedef struct packet_mark_block
-{
-    BYTE    header;
-    DWORD   bufSize;
-	BYTE	imgIdx;
-    DWORD   count;
-    // 뒤에 64 x 48 x 픽셀크기(4바이트) = 12288만큼 데이터 붙음
-} TPacketGCMarkBlock;
-
-typedef struct command_symbol_upload
-{
-	BYTE	header;
-	WORD	size;
-	DWORD	handle;
-} TPacketCGSymbolUpload;
-
-typedef struct command_symbol_crc
-{
-	BYTE	header;
-	DWORD	dwGuildID;
-	DWORD	dwCRC;
-	DWORD	dwSize;
-} TPacketCGSymbolCRC;
-
-typedef struct packet_symbol_data
-{
-    BYTE header;
-    WORD size;
-    DWORD guild_id;
-} TPacketGCGuildSymbolData;
-
-//
-//
-//
-typedef struct packet_observer_add
-{
-	BYTE	header;
-	DWORD	vid;
-	WORD	x;
-	WORD	y;
-} TPacketGCObserverAdd;
-
-typedef struct packet_observer_move
-{
-	BYTE	header;
-	DWORD	vid;
-	WORD	x;
-	WORD	y;
-} TPacketGCObserverMove;
-
-
-typedef struct packet_observer_remove
-{
-	BYTE	header;
-	DWORD	vid;	
-} TPacketGCObserverRemove;
-
-
-/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
-// To Server
-
-typedef struct command_checkin
-{
-	BYTE header;
-	char name[ID_MAX_NUM+1];
-	char pwd[PASS_MAX_NUM+1];
-} TPacketCGCheckin;
-
-typedef struct command_login
-{
-    BYTE header;
-    char name[ID_MAX_NUM + 1];
-    char pwd[PASS_MAX_NUM + 1];
-} TPacketCGLogin;
-
-// start - 권한 서버 접속을 위한 패킷들
-typedef struct command_login2
-{
-	BYTE	header;
-	char	name[ID_MAX_NUM + 1];
-	DWORD	login_key;
-    DWORD	adwClientKey[4];
-} TPacketCGLogin2;
-
-typedef struct command_login3
-{
-    BYTE	header;
-    char	name[ID_MAX_NUM + 1];
-    char	pwd[PASS_MAX_NUM + 1];
-    DWORD	adwClientKey[4];
-} TPacketCGLogin3;
-
-typedef struct command_login5
-{
-    BYTE	header;
-    char	authKey[OPENID_AUTHKEY_LEN + 1];
-    DWORD	adwClientKey[4];
-} TPacketCGLogin5;
-// end - 권한 서버 접속을 위한 패킷들
-
-typedef struct command_direct_enter
-{
-    BYTE        bHeader;
-    char        login[ID_MAX_NUM + 1];
-    char        passwd[PASS_MAX_NUM + 1];
-    BYTE        index;
-} TPacketCGDirectEnter;
-
-typedef struct command_player_select
-{
-	BYTE	header;
-	BYTE	player_index;
-} TPacketCGSelectCharacter;
-
-typedef struct command_attack
-{
-	BYTE	header;
-	BYTE	bType;			// 공격 유형
-	DWORD	dwVictimVID;	// 적 VID
-	BYTE	bCRCMagicCubeProcPiece;
-	BYTE	bCRCMagicCubeFilePiece;
-} TPacketCGAttack;
-
-typedef struct command_chat
-{
-	BYTE	header;
-	WORD	length;
-	BYTE	type;
-} TPacketCGChat;
-
-typedef struct command_whisper
-{
-    BYTE        bHeader;
-    WORD        wSize;
-    char        szNameTo[CHARACTER_NAME_MAX_LEN + 1];
-} TPacketCGWhisper;
-
-typedef struct command_sms
-{
-    BYTE        bHeader;
-    WORD        wSize;
-    char        szNameTo[CHARACTER_NAME_MAX_LEN + 1];
-} TPacketCGSMS;
-
-enum EBattleMode
-{
-	BATTLEMODE_ATTACK = 0,
-	BATTLEMODE_DEFENSE = 1,
-};
-
-typedef struct command_EnterFrontGame
-{
-	BYTE header;
-} TPacketCGEnterFrontGame;
-
-typedef struct command_item_use
-{
-	BYTE header;
-	TItemPos pos;
-} TPacketCGItemUse;
-
-typedef struct command_item_use_to_item
-{
-	BYTE header;
-	TItemPos source_pos;
-	TItemPos target_pos;
-} TPacketCGItemUseToItem;
-
-typedef struct command_item_drop
-{
-	BYTE  header;
-	TItemPos pos;
-	DWORD elk;
-} TPacketCGItemDrop;
-
-typedef struct command_item_drop2
-{
-    BYTE        header;
-    TItemPos pos;
-    DWORD       gold;
-    BYTE        count;
-} TPacketCGItemDrop2;
-
-typedef struct command_item_move
-{
-	BYTE header;
-	TItemPos pos;
-	TItemPos change_pos;
-	BYTE num;
-} TPacketCGItemMove;
-
-typedef struct command_item_pickup
-{
-	BYTE header;
-	DWORD vid;
-} TPacketCGItemPickUp;
-
-typedef struct command_quickslot_add
-{
-    BYTE        header;
-    BYTE        pos;
-	TQuickSlot	slot;
-}TPacketCGQuickSlotAdd;
-
-typedef struct command_quickslot_del
-{
-    BYTE        header;
-    BYTE        pos;
-}TPacketCGQuickSlotDel;
-
-typedef struct command_quickslot_swap
-{
-    BYTE        header;
-    BYTE        pos;
-    BYTE        change_pos;
-}TPacketCGQuickSlotSwap;
-
-typedef struct command_on_click
-{
-	BYTE		header;
-	DWORD		vid;
-} TPacketCGOnClick;
-
-
-enum
-{
-    SHOP_SUBHEADER_CG_END,
-	SHOP_SUBHEADER_CG_BUY,
-	SHOP_SUBHEADER_CG_SELL,
-	SHOP_SUBHEADER_CG_SELL2,
-};
-
-typedef struct command_shop
-{
-	BYTE        header;
-	BYTE		subheader;
-} TPacketCGShop;
-
-enum
-{
-	EXCHANGE_SUBHEADER_CG_START,			// arg1 == vid of target character
-	EXCHANGE_SUBHEADER_CG_ITEM_ADD,		// arg1 == position of item
-	EXCHANGE_SUBHEADER_CG_ITEM_DEL,		// arg1 == position of item
-	EXCHANGE_SUBHEADER_CG_ELK_ADD,			// arg1 == amount of elk
-	EXCHANGE_SUBHEADER_CG_ACCEPT,			// arg1 == not used
-	EXCHANGE_SUBHEADER_CG_CANCEL,			// arg1 == not used
-};
-
-typedef struct command_exchange
-{
-	BYTE		header;
-	BYTE		subheader;
-	DWORD		arg1;
-	BYTE		arg2;
-	TItemPos	Pos;
-} TPacketCGExchange;
-
-typedef struct command_position
-{   
-    BYTE        header;
-    BYTE        position;
-} TPacketCGPosition;
-
-typedef struct command_script_answer
-{
-    BYTE        header;
-	BYTE		answer;
-} TPacketCGScriptAnswer;
-
-typedef struct command_script_button
-{
-    BYTE        header;
-	unsigned int			idx;
-} TPacketCGScriptButton;
-
-typedef struct command_target
-{
-    BYTE        header;
-    DWORD       dwVID;
-} TPacketCGTarget;
-
-typedef struct command_move
-{
-	BYTE		bHeader;
-	BYTE		bFunc;
-	BYTE		bArg;
-	BYTE		bRot;
-	LONG		lX;
-	LONG		lY;
-	DWORD		dwTime;	
-} TPacketCGMove;
-
-typedef struct command_sync_position_element 
-{ 
-    DWORD       dwVID; 
-    long        lX; 
-    long        lY; 
-} TPacketCGSyncPositionElement; 
-
-typedef struct command_sync_position
-{ 
-    BYTE        bHeader;
-	WORD		wSize;
-} TPacketCGSyncPosition; 
-
-typedef struct command_fly_targeting
-{
-	BYTE		bHeader;
-	DWORD		dwTargetVID;
-	long		lX;
-	long		lY;
-} TPacketCGFlyTargeting;
-
-typedef struct packet_fly_targeting
-{
-    BYTE        bHeader;
-	DWORD		dwShooterVID;
-	DWORD		dwTargetVID;
-	long		lX;
-	long		lY;
-} TPacketGCFlyTargeting;
-
-typedef struct packet_shoot
-{   
-    BYTE		bHeader;                
-    BYTE		bType;
-} TPacketCGShoot;
-
-typedef struct command_warp
-{
-	BYTE			bHeader;
-} TPacketCGWarp;
-
-enum
-{
-	MESSENGER_SUBHEADER_GC_LIST,
-	MESSENGER_SUBHEADER_GC_LOGIN,
-	MESSENGER_SUBHEADER_GC_LOGOUT,
-	MESSENGER_SUBHEADER_GC_INVITE,
-	MESSENGER_SUBHEADER_GC_MOBILE,
-};
-
-typedef struct packet_messenger
-{
-    BYTE header;
-    WORD size;
-    BYTE subheader;
-} TPacketGCMessenger;
-
-typedef struct packet_messenger_list_offline
-{
-    BYTE connected; // always 0
-	BYTE length;
-} TPacketGCMessengerListOffline;
-
-enum
-{
-	MESSENGER_CONNECTED_STATE_OFFLINE,
-	MESSENGER_CONNECTED_STATE_ONLINE,
-	MESSENGER_CONNECTED_STATE_MOBILE,
-};
-
-typedef struct packet_messenger_list_online
-{
-    BYTE connected;
-	BYTE length;
-	//BYTE length_char_name;
-} TPacketGCMessengerListOnline;
-
-typedef struct packet_messenger_login
-{
-	//BYTE length_login;
-	//BYTE length_char_name;
-	BYTE length;
-} TPacketGCMessengerLogin;
-
-typedef struct packet_messenger_logout
-{
-	BYTE length;
-} TPacketGCMessengerLogout;
-
-enum
-{
-    MESSENGER_SUBHEADER_CG_ADD_BY_VID,
-    MESSENGER_SUBHEADER_CG_ADD_BY_NAME,
-    MESSENGER_SUBHEADER_CG_REMOVE,
-};
-
-typedef struct command_messenger
-{
-    BYTE header;
-    BYTE subheader;
-} TPacketCGMessenger;
-
-typedef struct command_messenger_remove
-{
-	BYTE length;
-} TPacketCGMessengerRemove;
-
-enum
-{
-	SAFEBOX_MONEY_STATE_SAVE,
-	SAFEBOX_MONEY_STATE_WITHDRAW,
-};
-
-typedef struct command_safebox_money
-{
-    BYTE        bHeader;
-    BYTE        bState;
-    DWORD       dwMoney;
-} TPacketCGSafeboxMoney;
-
-typedef struct command_safebox_checkout
-{
-    BYTE        bHeader;
-    BYTE        bSafePos;
-    TItemPos	ItemPos;
-} TPacketCGSafeboxCheckout;
-
-typedef struct command_safebox_checkin
-{
-    BYTE        bHeader;
-    BYTE        bSafePos;
-    TItemPos	ItemPos;
-} TPacketCGSafeboxCheckin;
-
-typedef struct command_mall_checkout
-{
-    BYTE        bHeader;
-    BYTE        bMallPos;
-    TItemPos	ItemPos;
-} TPacketCGMallCheckout;
-
-///////////////////////////////////////////////////////////////////////////////////
-// Party
-
-typedef struct command_use_skill
-{
-    BYTE                bHeader;
-    DWORD               dwVnum;
-	DWORD				dwTargetVID;
-} TPacketCGUseSkill;
-
-typedef struct command_party_invite
-{
-    BYTE header;
-    DWORD vid;
-} TPacketCGPartyInvite;
-
-typedef struct command_party_invite_answer
-{
-    BYTE header;
-    DWORD leader_pid;
-    BYTE accept;
-} TPacketCGPartyInviteAnswer;
-
-typedef struct command_party_remove
-{
-    BYTE header;
-    DWORD pid;
-} TPacketCGPartyRemove;
-
-typedef struct command_party_set_state
-{
-    BYTE byHeader;
-    DWORD dwVID;
-	BYTE byState;
-    BYTE byFlag;
-} TPacketCGPartySetState;
-
-typedef struct packet_party_link
-{
-    BYTE header;
-    DWORD pid;
-    DWORD vid;
-} TPacketGCPartyLink;
-
-typedef struct packet_party_unlink
-{
-    BYTE header;
-    DWORD pid;
-	DWORD vid;
-} TPacketGCPartyUnlink;
-
-typedef struct command_party_use_skill
-{
-    BYTE byHeader;
-	BYTE bySkillIndex;
-    DWORD dwTargetVID;
-} TPacketCGPartyUseSkill;
-
-enum
-{
-	GUILD_SUBHEADER_CG_ADD_MEMBER,
-	GUILD_SUBHEADER_CG_REMOVE_MEMBER,
-	GUILD_SUBHEADER_CG_CHANGE_GRADE_NAME,
-	GUILD_SUBHEADER_CG_CHANGE_GRADE_AUTHORITY,
-	GUILD_SUBHEADER_CG_OFFER,
-	GUILD_SUBHEADER_CG_POST_COMMENT,
-	GUILD_SUBHEADER_CG_DELETE_COMMENT,
-	GUILD_SUBHEADER_CG_REFRESH_COMMENT,
-	GUILD_SUBHEADER_CG_CHANGE_MEMBER_GRADE,
-	GUILD_SUBHEADER_CG_USE_SKILL,
-	GUILD_SUBHEADER_CG_CHANGE_MEMBER_GENERAL,
-	GUILD_SUBHEADER_CG_GUILD_INVITE_ANSWER,
-	GUILD_SUBHEADER_CG_CHARGE_GSP,
-	GUILD_SUBHEADER_CG_DEPOSIT_MONEY,
-	GUILD_SUBHEADER_CG_WITHDRAW_MONEY,
-};
-
-typedef struct command_guild
-{
-    BYTE byHeader;
-	BYTE bySubHeader;
-} TPacketCGGuild;
-
-typedef struct command_guild_answer_make_guild
-{
-	BYTE header;
-	char guild_name[GUILD_NAME_MAX_LEN+1];
-} TPacketCGAnswerMakeGuild; 
-
-typedef struct command_give_item
-{
-	BYTE byHeader;
-	DWORD dwTargetVID;
-	TItemPos ItemPos;
-	BYTE byItemCount;
-} TPacketCGGiveItem;
-
-typedef struct SPacketCGHack
-{
-    BYTE        bHeader;
-    char        szBuf[255 + 1];
-} TPacketCGHack;
-
-typedef struct command_dungeon
-{
-	BYTE		bHeader;
-	WORD		size;
-} TPacketCGDungeon;
-
-// Private Shop
-typedef struct SShopItemTable
-{
-    DWORD		vnum;
-    BYTE		count;
-
-    TItemPos	pos;			// PC 상점에만 이용
-    DWORD		price;			// PC 상점에만 이용
-    BYTE		display_pos;	//	PC 상점에만 이용, 보일 위치.
-} TShopItemTable;
-
-typedef struct SPacketCGMyShop
-{
-    BYTE        bHeader;
-    char        szSign[SHOP_SIGN_MAX_LEN + 1];
-    BYTE        bCount;	// count of TShopItemTable, max 39
-} TPacketCGMyShop;
-
-typedef struct SPacketCGRefine
-{
-	BYTE		header;
-	BYTE		pos;
-	BYTE		type;
-} TPacketCGRefine;
-
-typedef struct SPacketCGChangeName
-{
-    BYTE header;
-    BYTE index;
-    char name[CHARACTER_NAME_MAX_LEN+1];
-} TPacketCGChangeName;
-
-typedef struct command_client_version
-{
-	BYTE header;
-	char filename[32+1];
-	char timestamp[32+1];
-} TPacketCGClientVersion;
-
-typedef struct command_client_version2
-{
-	BYTE header;
-	char filename[32+1];
-	char timestamp[32+1];
-} TPacketCGClientVersion2;
-
-typedef struct command_crc_report
-{
-	BYTE header;
-	BYTE byPackMode;
-	DWORD dwBinaryCRC32;
-	DWORD dwProcessCRC32;
-	DWORD dwRootPackCRC32;
-} TPacketCGCRCReport;
 
-typedef struct command_china_matrix_card
-{
-	BYTE	bHeader;
-	char	szAnswer[CHINA_MATRIX_ANSWER_MAX_LEN + 1];
-} TPacketCGChinaMatrixCard;
-
-typedef struct command_runup_matrix_answer
-{
-	BYTE	bHeader;
-	char	szAnswer[RUNUP_MATRIX_ANSWER_MAX_LEN + 1];
-} TPacketCGRunupMatrixAnswer;
 
-typedef struct command_newcibn_passpod_answer
-{
-	BYTE	bHeader;
-	char	szAnswer[NEWCIBN_PASSPOD_ANSWER_MAX_LEN + 1];
-} TPacketCGNEWCIBNPasspodAnswer;
 
 enum EPartyExpDistributionType
 {
@@ -1049,1338 +391,9 @@ enum EPartyExpDistributionType
     PARTY_EXP_DISTRIBUTION_PARITY,
 };
 
-typedef struct command_party_parameter
-{
-    BYTE        bHeader;
-    BYTE        bDistributeMode;
-} TPacketCGPartyParameter;
-
-typedef struct command_quest_input_string
-{
-    BYTE        bHeader;
-    char		szString[QUEST_INPUT_STRING_MAX_NUM+1];
-} TPacketCGQuestInputString;
-
-typedef struct command_quest_confirm
-{
-    BYTE header;
-    BYTE answer;
-    DWORD requestPID;
-} TPacketCGQuestConfirm;
-
-typedef struct command_script_select_item
-{
-    BYTE header;
-    DWORD selection;
-} TPacketCGScriptSelectItem;
-
-/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
-// From Server
-enum EPhase
-{
-    PHASE_CLOSE,				// 끊기는 상태 (또는 끊기 전 상태)
-    PHASE_HANDSHAKE,			// 악수..;;
-    PHASE_LOGIN,				// 로그인 중
-    PHASE_SELECT,				// 캐릭터 선택 화면
-    PHASE_LOADING,				// 선택 후 로딩 화면
-    PHASE_GAME,					// 게임 화면
-    PHASE_DEAD,					// 죽었을 때.. (게임 안에 있는 것일 수도..)
-
-	PHASE_DBCLIENT_CONNECTING,	// 서버용
-    PHASE_DBCLIENT,				// 서버용
-    PHASE_P2P,					// 서버용
-    PHASE_AUTH,					// 로그인 인증 용
-};
-
-typedef struct packet_phase
-{
-    BYTE        header;
-    BYTE        phase;
-} TPacketGCPhase;
 
-typedef struct packet_blank		// 공백패킷.
-{
-	BYTE		header;
-} TPacketGCBlank;
 
-typedef struct packet_blank_dynamic
-{
-	BYTE		header;
-	WORD		size;
-} TPacketGCBlankDynamic;
 
-typedef struct packet_header_handshake
-{
-	BYTE		header;
-	DWORD		dwHandshake;
-	DWORD		dwTime;
-	LONG		lDelta;
-} TPacketGCHandshake;
-
-typedef struct packet_header_bindudp
-{
-	BYTE		header;
-	DWORD		addr;
-	WORD		port;
-} TPacketGCBindUDP;
-
-typedef struct packet_header_dynamic_size
-{
-	BYTE		header;
-	WORD		size;
-} TDynamicSizePacketHeader;
-
-typedef struct SSimplePlayerInformation
-{
-    DWORD               dwID;
-    char                szName[CHARACTER_NAME_MAX_LEN + 1];
-    BYTE                byJob;
-    BYTE                byLevel;
-    DWORD               dwPlayMinutes;
-    BYTE                byST, byHT, byDX, byIQ;
-//	WORD				wParts[CRaceData::PART_MAX_NUM];
-    WORD                wMainPart;
-    BYTE                bChangeName;
-	WORD				wHairPart;
-    BYTE                bDummy[4];
-	long				x, y;
-	LONG				lAddr;
-	WORD				wPort;
-	BYTE				bySkillGroup;
-} TSimplePlayerInformation;
-
-typedef struct packet_login_success3
-{
-	BYTE						header;
-	TSimplePlayerInformation	akSimplePlayerInformation[PLAYER_PER_ACCOUNT3];
-    DWORD						guild_id[PLAYER_PER_ACCOUNT3];
-    char						guild_name[PLAYER_PER_ACCOUNT3][GUILD_NAME_MAX_LEN+1];
-	DWORD handle;
-	DWORD random_key;
-} TPacketGCLoginSuccess3;
-
-typedef struct packet_login_success4
-{
-	BYTE						header;
-	TSimplePlayerInformation	akSimplePlayerInformation[PLAYER_PER_ACCOUNT4];
-    DWORD						guild_id[PLAYER_PER_ACCOUNT4];
-    char						guild_name[PLAYER_PER_ACCOUNT4][GUILD_NAME_MAX_LEN+1];
-	DWORD handle;
-	DWORD random_key;
-} TPacketGCLoginSuccess4;
-
-
-enum { LOGIN_STATUS_MAX_LEN = 8 };
-typedef struct packet_login_failure
-{
-	BYTE	header;
-	char	szStatus[LOGIN_STATUS_MAX_LEN + 1];
-} TPacketGCLoginFailure;
-
-typedef struct command_player_create
-{
-	BYTE        header;
-	BYTE        index;
-	char        name[CHARACTER_NAME_MAX_LEN + 1];
-	WORD        job;
-	BYTE		shape;
-	BYTE		CON;
-	BYTE		INT;
-	BYTE		STR;
-	BYTE		DEX;
-} TPacketCGCreateCharacter;
-
-typedef struct command_player_create_success
-{
-    BYTE						header;
-    BYTE						bAccountCharacterSlot;
-    TSimplePlayerInformation	kSimplePlayerInfomation;
-} TPacketGCPlayerCreateSuccess;
-
-typedef struct command_create_failure
-{
-	BYTE	header;
-	BYTE	bType;
-} TPacketGCCreateFailure;
-
-typedef struct command_player_delete
-{
-	BYTE        header;
-	BYTE        index;
-	char		szPrivateCode[PRIVATE_CODE_LENGTH];
-} TPacketCGDestroyCharacter;
-
-typedef struct packet_player_delete_success
-{
-	BYTE        header;
-	BYTE        account_index;
-} TPacketGCDestroyCharacterSuccess;
-
-enum
-{
-	ADD_CHARACTER_STATE_DEAD   = (1 << 0),
-	ADD_CHARACTER_STATE_SPAWN  = (1 << 1),
-	ADD_CHARACTER_STATE_GUNGON = (1 << 2),
-	ADD_CHARACTER_STATE_KILLER = (1 << 3),
-	ADD_CHARACTER_STATE_PARTY  = (1 << 4),
-};
-
-enum EPKModes
-{
-	PK_MODE_PEACE,
-	PK_MODE_REVENGE,
-	PK_MODE_FREE,
-	PK_MODE_PROTECT,
-	PK_MODE_GUILD,
-	PK_MODE_MAX_NUM,
-};
-
-// 2004.11.20.myevan.CRaceData::PART_MAX_NUM 사용안하게 수정 - 서버에서 사용하는것과 일치하지 않음
-enum ECharacterEquipmentPart
-{
-	CHR_EQUIPPART_ARMOR,
-	CHR_EQUIPPART_WEAPON,
-	CHR_EQUIPPART_HEAD,
-	CHR_EQUIPPART_HAIR,
-
-	CHR_EQUIPPART_NUM,		
-};
-
-typedef struct packet_char_additional_info
-{
-	BYTE    header;
-	DWORD   dwVID;
-	char    name[CHARACTER_NAME_MAX_LEN + 1];
-	WORD    awPart[CHR_EQUIPPART_NUM];
-	BYTE	bEmpire;
-	DWORD   dwGuildID;
-	DWORD   dwLevel;
-	short   sAlignment; //선악치
-	BYTE    bPKMode;
-	DWORD   dwMountVnum;
-} TPacketGCCharacterAdditionalInfo;
-
-typedef struct packet_add_char
-{
-    BYTE        header;
-
-    DWORD       dwVID;
-
-    //char        name[CHARACTER_NAME_MAX_LEN + 1];
-
-    float       angle;
-    long        x;
-    long        y;
-    long        z;
-
-	BYTE		bType;
-    WORD        wRaceNum;
-    //WORD        awPart[CHR_EQUIPPART_NUM];
-    BYTE        bMovingSpeed;
-    BYTE        bAttackSpeed;
-
-    BYTE        bStateFlag;
-    DWORD       dwAffectFlag[2];        // ??
-    //BYTE      bEmpire;
-    //DWORD     dwGuild;
-    //short     sAlignment;	
-	//BYTE		bPKMode;
-	//DWORD		dwMountVnum;
-} TPacketGCCharacterAdd;
-
-typedef struct packet_add_char2
-{
-    BYTE        header;
-
-    DWORD       dwVID;
-
-    char        name[CHARACTER_NAME_MAX_LEN + 1];
-
-    float       angle;
-    long        x;
-    long        y;
-    long        z;
-
-	BYTE		bType;
-    WORD        wRaceNum;
-    WORD        awPart[CHR_EQUIPPART_NUM];
-    BYTE        bMovingSpeed;
-    BYTE        bAttackSpeed;
-
-    BYTE        bStateFlag;
-    DWORD       dwAffectFlag[2];        // ??
-    BYTE        bEmpire;
-
-    DWORD       dwGuild;
-    short       sAlignment;
-	BYTE		bPKMode;
-	DWORD		dwMountVnum;
-} TPacketGCCharacterAdd2;
-
-typedef struct packet_update_char
-{
-    BYTE        header;
-    DWORD       dwVID;
-
-    WORD        awPart[CHR_EQUIPPART_NUM];
-    BYTE        bMovingSpeed;
-	BYTE		bAttackSpeed;
-
-    BYTE        bStateFlag;
-    DWORD       dwAffectFlag[2];
-
-	DWORD		dwGuildID;
-    short       sAlignment;
-	BYTE		bPKMode;
-	DWORD		dwMountVnum;
-} TPacketGCCharacterUpdate;
-
-typedef struct packet_update_char2
-{
-    BYTE        header;
-    DWORD       dwVID;
-
-    WORD        awPart[CHR_EQUIPPART_NUM];
-    BYTE        bMovingSpeed;
-	BYTE		bAttackSpeed;
-
-    BYTE        bStateFlag;
-    DWORD       dwAffectFlag[2];
-
-	DWORD		dwGuildID;
-    short       sAlignment;
-	BYTE		bPKMode;
-	DWORD		dwMountVnum;
-} TPacketGCCharacterUpdate2;
-
-typedef struct packet_del_char
-{
-	BYTE	header;
-    DWORD	dwVID;
-} TPacketGCCharacterDelete;
-
-typedef struct packet_GlobalTime
-{
-	BYTE	header;
-	float	GlobalTime;
-} TPacketGCGlobalTime;
-
-enum EChatType
-{
-	CHAT_TYPE_TALKING,  /* 그냥 채팅 */
-	CHAT_TYPE_INFO,     /* 정보 (아이템을 집었다, 경험치를 얻었다. 등) */
-	CHAT_TYPE_NOTICE,   /* 공지사항 */
-	CHAT_TYPE_PARTY,    /* 파티말 */
-	CHAT_TYPE_GUILD,    /* 길드말 */
-	CHAT_TYPE_COMMAND,	/* 명령 */
-	CHAT_TYPE_SHOUT,	/* 외치기 */
-	CHAT_TYPE_WHISPER,	// 서버와는 연동되지 않는 Only Client Enum
-	CHAT_TYPE_BIG_NOTICE,
-	CHAT_TYPE_MAX_NUM,
-};
-
-typedef struct packet_chatting
-{
-	BYTE	header;
-	WORD	size;
-	BYTE	type;
-	DWORD	dwVID;
-	BYTE	bEmpire;
-} TPacketGCChat;
-
-typedef struct packet_whisper   // 가변 패킷    
-{   
-    BYTE        bHeader;                        
-    WORD        wSize;
-    BYTE        bType;
-    char        szNameFrom[CHARACTER_NAME_MAX_LEN + 1];
-} TPacketGCWhisper;
-
-typedef struct packet_stun
-{
-	BYTE		header;
-	DWORD		vid;
-} TPacketGCStun;
-
-typedef struct packet_dead
-{
-	BYTE		header;
-	DWORD		vid;
-} TPacketGCDead;
-
-typedef struct packet_main_character
-{
-    BYTE        header;
-    DWORD       dwVID;
-	WORD		wRaceNum;
-    char        szName[CHARACTER_NAME_MAX_LEN + 1];
-    long        lX, lY, lZ;
-	BYTE		bySkillGroup;
-} TPacketGCMainCharacter;
-
-// SUPPORT_BGM
-typedef struct packet_main_character2_empire
-{
-    BYTE        header;
-    DWORD       dwVID;
-	WORD		wRaceNum;
-    char        szName[CHARACTER_NAME_MAX_LEN + 1];
-    long        lX, lY, lZ;
-	BYTE		byEmpire;
-	BYTE		bySkillGroup;
-} TPacketGCMainCharacter2_EMPIRE;
-
-typedef struct packet_main_character3_bgm
-{
-	enum
-	{
-		MUSIC_NAME_MAX_LEN = 24,
-	};
-    BYTE        header;
-    DWORD       dwVID;
-	WORD		wRaceNum;
-    char        szUserName[CHARACTER_NAME_MAX_LEN + 1];
-	char        szBGMName[MUSIC_NAME_MAX_LEN + 1];
-    long        lX, lY, lZ;
-	BYTE		byEmpire;
-	BYTE		bySkillGroup;
-} TPacketGCMainCharacter3_BGM;
-
-typedef struct packet_main_character4_bgm_vol
-{
-	enum
-	{
-		MUSIC_NAME_MAX_LEN = 24,
-	};
-    BYTE        header;
-    DWORD       dwVID;
-	WORD		wRaceNum;
-    char        szUserName[CHARACTER_NAME_MAX_LEN + 1];
-	char        szBGMName[MUSIC_NAME_MAX_LEN + 1];
-	float		fBGMVol;
-    long        lX, lY, lZ;
-	BYTE		byEmpire;
-	BYTE		bySkillGroup;
-} TPacketGCMainCharacter4_BGM_VOL;
-// END_OF_SUPPORT_BGM
-
-enum EPointTypes
-{
-    POINT_NONE,                 // 0
-    POINT_LEVEL,                // 1
-    POINT_VOICE,                // 2
-    POINT_EXP,                  // 3
-    POINT_NEXT_EXP,             // 4
-    POINT_HP,                   // 5
-    POINT_MAX_HP,               // 6
-    POINT_SP,                   // 7
-    POINT_MAX_SP,               // 8  
-    POINT_STAMINA,              // 9  스테미너
-    POINT_MAX_STAMINA,          // 10 최대 스테미너
-    
-    POINT_GOLD,                 // 11
-    POINT_ST,                   // 12 근력
-    POINT_HT,                   // 13 체력
-    POINT_DX,                   // 14 민첩성
-    POINT_IQ,                   // 15 정신력
-    POINT_ATT_POWER,            // 16 공격력
-    POINT_ATT_SPEED,            // 17 공격속도
-    POINT_EVADE_RATE,           // 18 회피율
-    POINT_MOV_SPEED,            // 19 이동속도
-    POINT_DEF_GRADE,            // 20 방어등급
-	POINT_CASTING_SPEED,        // 21 주문속도 (쿨다운타임*100) / (100 + 이값) = 최종 쿨다운 타임
-	POINT_MAGIC_ATT_GRADE,      // 22 마법공격력
-    POINT_MAGIC_DEF_GRADE,      // 23 마법방어력
-    POINT_EMPIRE_POINT,         // 24 제국점수
-    POINT_LEVEL_STEP,           // 25 한 레벨에서의 단계.. (1 2 3 될 때 보상, 4 되면 레벨 업)
-    POINT_STAT,                 // 26 능력치 올릴 수 있는 개수
-	POINT_SUB_SKILL,            // 27 보조 스킬 포인트
-	POINT_SKILL,                // 28 액티브 스킬 포인트
-//    POINT_SKILL_PASV,           // 27 패시브 기술 올릴 수 있는 개수
-//    POINT_SKILL_ACTIVE,         // 28 액티브 스킬 포인트
-	POINT_MIN_ATK,				// 29 최소 파괴력
-	POINT_MAX_ATK,				// 30 최대 파괴력
-    POINT_PLAYTIME,             // 31 플레이시간
-    POINT_HP_REGEN,             // 32 HP 회복률
-    POINT_SP_REGEN,             // 33 SP 회복률
-    
-    POINT_BOW_DISTANCE,         // 34 활 사정거리 증가치 (meter)
-    
-    POINT_HP_RECOVERY,          // 35 체력 회복 증가량
-    POINT_SP_RECOVERY,          // 36 정신력 회복 증가량
-    
-    POINT_POISON_PCT,           // 37 독 확률
-    POINT_STUN_PCT,             // 38 기절 확률
-    POINT_SLOW_PCT,             // 39 슬로우 확률
-    POINT_CRITICAL_PCT,         // 40 크리티컬 확률
-    POINT_PENETRATE_PCT,        // 41 관통타격 확률
-    POINT_CURSE_PCT,            // 42 저주 확률
-    
-    POINT_ATTBONUS_HUMAN,       // 43 인간에게 강함
-    POINT_ATTBONUS_ANIMAL,      // 44 동물에게 데미지 % 증가
-    POINT_ATTBONUS_ORC,         // 45 웅귀에게 데미지 % 증가
-    POINT_ATTBONUS_MILGYO,      // 46 밀교에게 데미지 % 증가
-    POINT_ATTBONUS_UNDEAD,      // 47 시체에게 데미지 % 증가
-    POINT_ATTBONUS_DEVIL,       // 48 마귀(악마)에게 데미지 % 증가
-    POINT_ATTBONUS_INSECT,      // 49 벌레족
-    POINT_ATTBONUS_FIRE,        // 50 화염족
-    POINT_ATTBONUS_ICE,         // 51 빙설족
-    POINT_ATTBONUS_DESERT,      // 52 사막족
-    POINT_ATTBONUS_UNUSED0,     // 53 UNUSED0
-    POINT_ATTBONUS_UNUSED1,     // 54 UNUSED1
-    POINT_ATTBONUS_UNUSED2,     // 55 UNUSED2
-    POINT_ATTBONUS_UNUSED3,     // 56 UNUSED3
-    POINT_ATTBONUS_UNUSED4,     // 57 UNUSED4
-    POINT_ATTBONUS_UNUSED5,     // 58 UNUSED5
-    POINT_ATTBONUS_UNUSED6,     // 59 UNUSED6
-    POINT_ATTBONUS_UNUSED7,     // 60 UNUSED7
-    POINT_ATTBONUS_UNUSED8,     // 61 UNUSED8
-    POINT_ATTBONUS_UNUSED9,     // 62 UNUSED9
-
-    POINT_STEAL_HP,             // 63 생명력 흡수
-    POINT_STEAL_SP,             // 64 정신력 흡수
-
-    POINT_MANA_BURN_PCT,        // 65 마나 번
-
-    /// 피해시 보너스 ///
-
-    POINT_DAMAGE_SP_RECOVER,    // 66 공격당할 시 정신력 회복 확률
-
-    POINT_BLOCK,                // 67 블럭율
-    POINT_DODGE,                // 68 회피율
-
-    POINT_RESIST_SWORD,         // 69
-    POINT_RESIST_TWOHAND,       // 70
-    POINT_RESIST_DAGGER,        // 71
-    POINT_RESIST_BELL,          // 72
-    POINT_RESIST_FAN,           // 73
-    POINT_RESIST_BOW,           // 74  화살   저항   : 대미지 감소
-    POINT_RESIST_FIRE,          // 75  화염   저항   : 화염공격에 대한 대미지 감소
-    POINT_RESIST_ELEC,          // 76  전기   저항   : 전기공격에 대한 대미지 감소
-    POINT_RESIST_MAGIC,         // 77  술법   저항   : 모든술법에 대한 대미지 감소
-    POINT_RESIST_WIND,          // 78  바람   저항   : 바람공격에 대한 대미지 감소
-
-    POINT_REFLECT_MELEE,        // 79 공격 반사
-
-    /// 특수 피해시 ///
-    POINT_REFLECT_CURSE,        // 80 저주 반사
-    POINT_POISON_REDUCE,        // 81 독데미지 감소
-
-    /// 적 소멸시 ///
-    POINT_KILL_SP_RECOVER,      // 82 적 소멸시 MP 회복
-    POINT_EXP_DOUBLE_BONUS,     // 83
-    POINT_GOLD_DOUBLE_BONUS,    // 84
-    POINT_ITEM_DROP_BONUS,      // 85
-
-    /// 회복 관련 ///
-    POINT_POTION_BONUS,         // 86
-    POINT_KILL_HP_RECOVER,      // 87
-
-    POINT_IMMUNE_STUN,          // 88
-    POINT_IMMUNE_SLOW,          // 89
-    POINT_IMMUNE_FALL,          // 90
-    //////////////////
-
-    POINT_PARTY_ATT_GRADE,      // 91
-    POINT_PARTY_DEF_GRADE,      // 92
-
-    POINT_ATT_BONUS,            // 93
-    POINT_DEF_BONUS,            // 94
-
-    POINT_ATT_GRADE_BONUS,			// 95
-    POINT_DEF_GRADE_BONUS,			// 96
-    POINT_MAGIC_ATT_GRADE_BONUS,	// 97
-    POINT_MAGIC_DEF_GRADE_BONUS,	// 98
-
-    POINT_RESIST_NORMAL_DAMAGE,		// 99
-
-	POINT_STAT_RESET_COUNT = 112,
-    POINT_HORSE_SKILL = 113,
-
-	POINT_MALL_ATTBONUS,		// 114 공격력 +x%
-	POINT_MALL_DEFBONUS,		// 115 방어력 +x%
-	POINT_MALL_EXPBONUS,		// 116 경험치 +x%
-	POINT_MALL_ITEMBONUS,		// 117 아이템 드롭율 x/10배
-	POINT_MALL_GOLDBONUS,		// 118 돈 드롭율 x/10배
-    POINT_MAX_HP_PCT,			// 119 최대생명력 +x%
-    POINT_MAX_SP_PCT,			// 120 최대정신력 +x%
-
-	POINT_SKILL_DAMAGE_BONUS,       // 121 스킬 데미지 *(100+x)%
-	POINT_NORMAL_HIT_DAMAGE_BONUS,  // 122 평타 데미지 *(100+x)%
-   
-    POINT_SKILL_DEFEND_BONUS,       // 123 스킬 방어 데미지
-    POINT_NORMAL_HIT_DEFEND_BONUS,  // 124 평타 방어 데미지
-    POINT_PC_BANG_EXP_BONUS,        // 125
-	POINT_PC_BANG_DROP_BONUS,       // 126 PC방 전용 드롭률 보너스
-
-	POINT_ENERGY = 128,				// 128 기력
-
-	// 기력 ui 용.
-	// 이렇게 하고 싶지 않았지만, 
-	// uiTaskBar에서는 affect에 접근할 수 없고,
-	// 더구나 클라리언트에서는 blend_affect는 관리하지 않아,
-	// 임시로 이렇게 둔다.
-	POINT_ENERGY_END_TIME = 129,	// 129 기력 종료 시간
-
-	// 클라이언트 포인트
-	POINT_MIN_WEP = 200,
-	POINT_MAX_WEP,
-	POINT_MIN_MAGIC_WEP,
-	POINT_MAX_MAGIC_WEP,
-	POINT_HIT_RATE,
-
-
-    //POINT_MAX_NUM = 255,=>stdafx.h 로/
-};
-
-typedef struct packet_points
-{
-    BYTE        header;
-    long        points[POINT_MAX_NUM];
-} TPacketGCPoints;
-
-typedef struct packet_point_change
-{
-    int         header;
-
-	DWORD		dwVID;
-	BYTE		Type;
-
-	long        amount; // 바뀐 값
-    long        value;  // 현재 값
-} TPacketGCPointChange;
-
-typedef struct packet_motion
-{
-	BYTE		header;
-	DWORD		vid;
-	DWORD		victim_vid;
-	WORD		motion;
-} TPacketGCMotion;
-
-typedef struct packet_set_item
-{
-	BYTE		header;
-	TItemPos	Cell;
-	DWORD		vnum;
-	BYTE		count;
-	long		alSockets[ITEM_SOCKET_SLOT_MAX_NUM];
-    TPlayerItemAttribute aAttr[ITEM_ATTRIBUTE_SLOT_MAX_NUM];
-} TPacketGCItemSet;
-
-typedef struct packet_set_item2
-{
-	BYTE		header;
-	TItemPos	Cell;
-	DWORD		vnum;
-	BYTE		count;
-	DWORD		flags;	// 플래그 추가
-	DWORD		anti_flags;	// 플래그 추가
-	bool		highlight;
-	long		alSockets[ITEM_SOCKET_SLOT_MAX_NUM];
-    TPlayerItemAttribute aAttr[ITEM_ATTRIBUTE_SLOT_MAX_NUM];
-} TPacketGCItemSet2;
-
-typedef struct packet_item_del
-{
-    BYTE        header;
-    BYTE        pos;
-} TPacketGCItemDel;
-
-typedef struct packet_use_item
-{
-	BYTE		header;
-	TItemPos	Cell;
-	DWORD		ch_vid;
-	DWORD		victim_vid;
-
-	DWORD		vnum;
-} TPacketGCItemUse;
-
-typedef struct packet_update_item
-{
-	BYTE		header;
-	TItemPos	Cell;
-	BYTE		count;
-	long		alSockets[ITEM_SOCKET_SLOT_MAX_NUM];
-    TPlayerItemAttribute aAttr[ITEM_ATTRIBUTE_SLOT_MAX_NUM];
-} TPacketGCItemUpdate;
-
-typedef struct packet_ground_add_item
-{
-    BYTE        bHeader;
-    long        lX;
-	long		lY;
-	long		lZ;
-
-    DWORD       dwVID;
-    DWORD       dwVnum;
-} TPacketGCItemGroundAdd;
-
-typedef struct packet_ground_del_item
-{
-	BYTE		header;
-	DWORD		vid;
-} TPacketGCItemGroundDel;
-
-typedef struct packet_item_ownership
-{
-    BYTE        bHeader;
-    DWORD       dwVID;
-    char        szName[CHARACTER_NAME_MAX_LEN + 1];
-} TPacketGCItemOwnership;
-
-typedef struct packet_quickslot_add
-{
-    BYTE        header;
-    BYTE        pos;
-	TQuickSlot	slot;
-} TPacketGCQuickSlotAdd;
-
-typedef struct packet_quickslot_del
-{
-    BYTE        header;
-    BYTE        pos;
-} TPacketGCQuickSlotDel;
-
-typedef struct packet_quickslot_swap
-{
-    BYTE        header;
-    BYTE        pos;
-    BYTE        change_pos;
-} TPacketGCQuickSlotSwap;
-
-typedef struct packet_shop_start
-{
-	struct packet_shop_item		items[SHOP_HOST_ITEM_MAX_NUM];
-} TPacketGCShopStart;
-
-typedef struct packet_shop_start_ex // 다음에 TSubPacketShopTab* shop_tabs 이 따라옴.
-{
-	typedef struct sub_packet_shop_tab 
-	{
-		char name[SHOP_TAB_NAME_MAX];
-		BYTE coin_type;
-		packet_shop_item items[SHOP_HOST_ITEM_MAX_NUM];
-	} TSubPacketShopTab;
-	DWORD owner_vid;
-	BYTE shop_tab_count;
-} TPacketGCShopStartEx;
-
-
-typedef struct packet_shop_update_item
-{
-	BYTE						pos;
-	struct packet_shop_item		item;
-} TPacketGCShopUpdateItem;
-
-typedef struct packet_shop_update_price
-{
-	int iElkAmount;
-} TPacketGCShopUpdatePrice;
-
-enum EPacketShopSubHeaders
-{
-	SHOP_SUBHEADER_GC_START,
-    SHOP_SUBHEADER_GC_END,
-	SHOP_SUBHEADER_GC_UPDATE_ITEM,
-	SHOP_SUBHEADER_GC_UPDATE_PRICE,
-    SHOP_SUBHEADER_GC_OK,
-    SHOP_SUBHEADER_GC_NOT_ENOUGH_MONEY,
-    SHOP_SUBHEADER_GC_SOLDOUT,
-    SHOP_SUBHEADER_GC_INVENTORY_FULL,
-    SHOP_SUBHEADER_GC_INVALID_POS,
-	SHOP_SUBHEADER_GC_SOLD_OUT,
-	SHOP_SUBHEADER_GC_START_EX,
-	SHOP_SUBHEADER_GC_NOT_ENOUGH_MONEY_EX,
-};
-
-typedef struct packet_shop
-{
-	BYTE        header;
-	WORD		size;
-	BYTE        subheader;
-} TPacketGCShop;
-
-typedef struct packet_exchange
-{
-    BYTE        header;
-    BYTE        subheader;
-    BYTE        is_me;
-    DWORD       arg1;
-    TItemPos       arg2;
-    DWORD       arg3;
-	long		alValues[ITEM_SOCKET_SLOT_MAX_NUM];
-    TPlayerItemAttribute aAttr[ITEM_ATTRIBUTE_SLOT_MAX_NUM];
-} TPacketGCExchange;
-
-enum
-{
-    EXCHANGE_SUBHEADER_GC_START,			// arg1 == vid
-    EXCHANGE_SUBHEADER_GC_ITEM_ADD,		// arg1 == vnum  arg2 == pos  arg3 == count
-	EXCHANGE_SUBHEADER_GC_ITEM_DEL,		// arg1 == pos
-    EXCHANGE_SUBHEADER_GC_ELK_ADD,			// arg1 == elk
-    EXCHANGE_SUBHEADER_GC_ACCEPT,			// arg1 == accept
-    EXCHANGE_SUBHEADER_GC_END,				// arg1 == not used
-    EXCHANGE_SUBHEADER_GC_ALREADY,			// arg1 == not used
-    EXCHANGE_SUBHEADER_GC_LESS_ELK,		// arg1 == not used
-};
-
-typedef struct packet_position
-{
-    BYTE        header;
-	DWORD		vid;
-    BYTE        position;
-} TPacketGCPosition;
-
-typedef struct packet_ping
-{
-	BYTE		header;
-} TPacketGCPing;
-
-typedef struct packet_pong
-{
-	BYTE		bHeader;
-} TPacketCGPong;
-
-typedef struct packet_script
-{
-    BYTE		header;
-    WORD        size;
-	BYTE		skin;
-    WORD        src_size;
-} TPacketGCScript;
-
-typedef struct packet_target
-{
-    BYTE        header;
-    DWORD       dwVID;
-    BYTE        bHPPercent;
-} TPacketGCTarget;
-
-typedef struct packet_damage_info
-{
-	BYTE header;
-	DWORD dwVID;
-	BYTE flag;
-	int  damage;
-} TPacketGCDamageInfo;
-
-typedef struct packet_mount
-{
-    BYTE        header;
-    DWORD       vid;
-    DWORD       mount_vid;
-    BYTE        pos;
-	DWORD		_x, _y;
-} TPacketGCMount;
-
-typedef struct packet_change_speed
-{
-	BYTE		header;
-	DWORD		vid;
-	WORD		moving_speed;
-} TPacketGCChangeSpeed;
-
-typedef struct packet_move
-{	
-	BYTE		bHeader;
-	BYTE		bFunc;
-	BYTE		bArg;
-	BYTE		bRot;
-	DWORD		dwVID;
-	LONG		lX;
-	LONG		lY;
-	DWORD		dwTime;
-	DWORD		dwDuration;
-} TPacketGCMove;
-
-enum
-{
-	QUEST_SEND_IS_BEGIN         = 1 << 0,
-    QUEST_SEND_TITLE            = 1 << 1,  // 28자 까지
-    QUEST_SEND_CLOCK_NAME       = 1 << 2,  // 16자 까지
-    QUEST_SEND_CLOCK_VALUE      = 1 << 3,
-    QUEST_SEND_COUNTER_NAME     = 1 << 4,  // 16자 까지
-    QUEST_SEND_COUNTER_VALUE    = 1 << 5,
-	QUEST_SEND_ICON_FILE		= 1 << 6,  // 24자 까지 
-};
-
-typedef struct packet_quest_info
-{
-	BYTE header;
-	WORD size;
-	WORD index;
-	BYTE flag;
-} TPacketGCQuestInfo;
-
-typedef struct packet_quest_confirm
-{
-    BYTE header;
-    char msg[64+1];
-    long timeout;
-    DWORD requestPID;
-} TPacketGCQuestConfirm;
-
-typedef struct packet_attack
-{
-    BYTE        header;
-    DWORD       dwVID;
-    DWORD       dwVictimVID;    // 적 VID
-    BYTE        bType;          // 공격 유형
-} TPacketGCAttack;
-
-typedef struct packet_c2c
-{
-	BYTE		header;
-	WORD		wSize;
-} TPacketGCC2C;
-
-typedef struct packetd_sync_position_element 
-{ 
-    DWORD       dwVID; 
-    long        lX; 
-    long        lY; 
-} TPacketGCSyncPositionElement; 
-
-typedef struct packetd_sync_position
-{ 
-    BYTE        bHeader; 
-    WORD		wSize;
-} TPacketGCSyncPosition; 
-
-typedef struct packet_ownership 
-{ 
-    BYTE                bHeader; 
-    DWORD               dwOwnerVID; 
-    DWORD               dwVictimVID; 
-} TPacketGCOwnership; 
-
-#define	SKILL_MAX_NUM 255
-
-typedef struct packet_skill_level
-{
-    BYTE        bHeader;
-    BYTE        abSkillLevels[SKILL_MAX_NUM];
-} TPacketGCSkillLevel;
-
-typedef struct SPlayerSkill
-{
-	BYTE bMasterType;
-	BYTE bLevel;
-	time_t tNextRead;
-} TPlayerSkill;
-
-typedef struct packet_skill_level_new
-{
-	BYTE bHeader;
-	TPlayerSkill skills[SKILL_MAX_NUM];
-} TPacketGCSkillLevelNew;
-
-// fly
-typedef struct packet_fly
-{
-    BYTE        bHeader;
-    BYTE        bType;
-    DWORD       dwStartVID;
-    DWORD       dwEndVID;
-} TPacketGCCreateFly;
-
-enum EPVPModes
-{
-	PVP_MODE_NONE,
-    PVP_MODE_AGREE,
-    PVP_MODE_FIGHT,
-    PVP_MODE_REVENGE,
-};
-
-typedef struct packet_duel_start
-{
-    BYTE	header ;
-    WORD	wSize ;	// DWORD가 몇개? 개수 = (wSize - sizeof(TPacketGCPVPList)) / 4
-} TPacketGCDuelStart ;
-
-typedef struct packet_pvp
-{
-	BYTE		header;
-	DWORD		dwVIDSrc;
-	DWORD		dwVIDDst;
-	BYTE		bMode;
-} TPacketGCPVP;
-
-typedef struct packet_skill_cooltime_end
-{
-	BYTE		header;
-	BYTE		bSkill;
-} TPacketGCSkillCoolTimeEnd;
-
-typedef struct packet_warp
-{
-	BYTE			bHeader;
-	LONG			lX;
-	LONG			lY;
-	LONG			lAddr;
-	WORD			wPort;
-} TPacketGCWarp;
-
-typedef struct packet_party_invite
-{
-    BYTE header;
-    DWORD leader_pid;
-} TPacketGCPartyInvite;
-
-typedef struct packet_party_add
-{
-    BYTE header;
-    DWORD pid;
-    char name[CHARACTER_NAME_MAX_LEN+1];
-} TPacketGCPartyAdd;
-
-typedef struct packet_party_update
-{
-    BYTE header;
-    DWORD pid;
-    BYTE state;
-    BYTE percent_hp;
-    short affects[PARTY_AFFECT_SLOT_MAX_NUM];
-} TPacketGCPartyUpdate;
-
-typedef struct packet_party_remove
-{
-    BYTE header;
-    DWORD pid;
-} TPacketGCPartyRemove;
-
-typedef TPacketCGSafeboxCheckout TPacketGCSafeboxCheckout;
-typedef TPacketCGSafeboxCheckin TPacketGCSafeboxCheckin;
-
-typedef struct packet_safebox_wrong_password
-{
-    BYTE        bHeader;
-} TPacketGCSafeboxWrongPassword;
-
-typedef struct packet_safebox_size
-{
-	BYTE bHeader;
-	BYTE bSize;
-} TPacketGCSafeboxSize; 
-
-typedef struct packet_safebox_money_change
-{
-    BYTE bHeader;
-    DWORD dwMoney;
-} TPacketGCSafeboxMoneyChange;
-
-typedef struct command_empire
-{
-    BYTE        bHeader;
-    BYTE        bEmpire;
-} TPacketCGEmpire;
-
-typedef struct packet_empire
-{
-    BYTE        bHeader;
-    BYTE        bEmpire;
-} TPacketGCEmpire;
-
-enum
-{
-	FISHING_SUBHEADER_GC_START,
-	FISHING_SUBHEADER_GC_STOP,
-	FISHING_SUBHEADER_GC_REACT,
-	FISHING_SUBHEADER_GC_SUCCESS,
-	FISHING_SUBHEADER_GC_FAIL,
-    FISHING_SUBHEADER_GC_FISH,
-};
-
-typedef struct packet_fishing
-{
-    BYTE header;
-    BYTE subheader;
-    DWORD info;
-    BYTE dir;
-} TPacketGCFishing;
-
-typedef struct paryt_parameter
-{
-    BYTE        bHeader;
-    BYTE        bDistributeMode;
-} TPacketGCPartyParameter;
-
-//////////////////////////////////////////////////////////////////////////
-// Guild
-
-enum
-{
-    GUILD_SUBHEADER_GC_LOGIN,
-	GUILD_SUBHEADER_GC_LOGOUT,
-	GUILD_SUBHEADER_GC_LIST,
-	GUILD_SUBHEADER_GC_GRADE,
-	GUILD_SUBHEADER_GC_ADD,
-	GUILD_SUBHEADER_GC_REMOVE,
-	GUILD_SUBHEADER_GC_GRADE_NAME,
-	GUILD_SUBHEADER_GC_GRADE_AUTH, 
-	GUILD_SUBHEADER_GC_INFO,
-	GUILD_SUBHEADER_GC_COMMENTS,
-    GUILD_SUBHEADER_GC_CHANGE_EXP,
-    GUILD_SUBHEADER_GC_CHANGE_MEMBER_GRADE,
-	GUILD_SUBHEADER_GC_SKILL_INFO,
-	GUILD_SUBHEADER_GC_CHANGE_MEMBER_GENERAL,
-	GUILD_SUBHEADER_GC_GUILD_INVITE,
-    GUILD_SUBHEADER_GC_WAR,
-    GUILD_SUBHEADER_GC_GUILD_NAME,
-    GUILD_SUBHEADER_GC_GUILD_WAR_LIST,
-    GUILD_SUBHEADER_GC_GUILD_WAR_END_LIST,
-    GUILD_SUBHEADER_GC_WAR_POINT,
-	GUILD_SUBHEADER_GC_MONEY_CHANGE,
-};
-
-typedef struct packet_guild
-{
-    BYTE header;
-    WORD size;
-    BYTE subheader;
-} TPacketGCGuild;
-
-// SubHeader - Grade
-enum
-{
-    GUILD_AUTH_ADD_MEMBER       = (1 << 0),
-    GUILD_AUTH_REMOVE_MEMBER    = (1 << 1),
-    GUILD_AUTH_NOTICE           = (1 << 2),
-    GUILD_AUTH_SKILL            = (1 << 3),
-};
-
-typedef struct packet_guild_sub_grade
-{
-	char grade_name[GUILD_GRADE_NAME_MAX_LEN+1]; // 8+1 길드장, 길드원 등의 이름
-	BYTE auth_flag;
-} TPacketGCGuildSubGrade;
-
-typedef struct packet_guild_sub_member
-{
-	DWORD pid;
-	BYTE byGrade;
-	BYTE byIsGeneral;
-	BYTE byJob;
-	BYTE byLevel;
-	DWORD dwOffer;
-	BYTE byNameFlag;
-// if NameFlag is TRUE, name is sent from server.
-//	char szName[CHARACTER_ME_MAX_LEN+1];
-} TPacketGCGuildSubMember;
-
-typedef struct packet_guild_sub_info
-{
-    WORD member_count;
-    WORD max_member_count;
-	DWORD guild_id;
-    DWORD master_pid;
-    DWORD exp;
-    BYTE level;
-    char name[GUILD_NAME_MAX_LEN+1];
-	DWORD gold;
-	BYTE hasLand;
-} TPacketGCGuildInfo;
-
-enum EGuildWarState
-{
-    GUILD_WAR_NONE,
-    GUILD_WAR_SEND_DECLARE,
-    GUILD_WAR_REFUSE,
-    GUILD_WAR_RECV_DECLARE,
-    GUILD_WAR_WAIT_START,
-    GUILD_WAR_CANCEL,
-    GUILD_WAR_ON_WAR,
-    GUILD_WAR_END,
-
-    GUILD_WAR_DURATION = 2*60*60, // 2시간
-};
-
-typedef struct packet_guild_war
-{
-    DWORD       dwGuildSelf;
-    DWORD       dwGuildOpp;
-    BYTE        bType;
-    BYTE        bWarState;
-} TPacketGCGuildWar;
-
-typedef struct SPacketGuildWarPoint
-{
-    DWORD dwGainGuildID;
-    DWORD dwOpponentGuildID;
-    long lPoint;
-} TPacketGuildWarPoint;
-
-// SubHeader - Dungeon
-enum
-{
-	DUNGEON_SUBHEADER_GC_TIME_ATTACK_START = 0,
-	DUNGEON_SUBHEADER_GC_DESTINATION_POSITION = 1,
-};
-
-typedef struct packet_dungeon
-{
-	BYTE		bHeader;
-    WORD		size;
-    BYTE		subheader;
-} TPacketGCDungeon;
-
-// Private Shop
-typedef struct SPacketGCShopSign
-{
-    BYTE        bHeader;
-    DWORD       dwVID;
-    char        szSign[SHOP_SIGN_MAX_LEN + 1];
-} TPacketGCShopSign;
-
-typedef struct SPacketGCTime
-{
-    BYTE        bHeader;
-    time_t      time;
-} TPacketGCTime;
-
-enum
-{
-    WALKMODE_RUN,
-    WALKMODE_WALK,
-};
-
-typedef struct SPacketGCWalkMode
-{
-    BYTE        header;
-    DWORD       vid;
-    BYTE        mode;
-} TPacketGCWalkMode;
-
-typedef struct SPacketGCChangeSkillGroup
-{
-    BYTE        header;
-    BYTE        skill_group;
-} TPacketGCChangeSkillGroup;
-
-struct TMaterial
-{
-    DWORD vnum;
-    DWORD count;
-};
-
-typedef struct SRefineTable
-{
-    DWORD src_vnum;
-    DWORD result_vnum;
-    BYTE material_count;
-    int cost; // 소요 비용
-    int prob; // 확률
-    TMaterial materials[REFINE_MATERIAL_MAX_NUM];
-} TRefineTable;
-
-typedef struct SPacketGCRefineInformation
-{
-	BYTE			header;
-	BYTE			pos;
-	TRefineTable	refine_table;
-} TPacketGCRefineInformation;
-
-typedef struct SPacketGCRefineInformationNew
-{
-	BYTE			header;
-	BYTE			type;
-	BYTE			pos;
-	TRefineTable	refine_table;
-} TPacketGCRefineInformationNew;
-
-enum SPECIAL_EFFECT
-{
-	SE_NONE,
-	SE_HPUP_RED,
-	SE_SPUP_BLUE,
-	SE_SPEEDUP_GREEN,
-	SE_DXUP_PURPLE,
-	SE_CRITICAL,
-	SE_PENETRATE,
-	SE_BLOCK,
-	SE_DODGE,
-	SE_CHINA_FIREWORK,
-	SE_SPIN_TOP,
-	SE_SUCCESS,
-	SE_FAIL,
-	SE_FR_SUCCESS,    
-    SE_LEVELUP_ON_14_FOR_GERMANY,	//레벨업 14일때 ( 독일전용 )
-    SE_LEVELUP_UNDER_15_FOR_GERMANY,//레벨업 15일때 ( 독일전용 )
-    SE_PERCENT_DAMAGE1,
-    SE_PERCENT_DAMAGE2,
-    SE_PERCENT_DAMAGE3,    
-	SE_AUTO_HPUP,
-	SE_AUTO_SPUP,
-	SE_EQUIP_RAMADAN_RING,			// 초승달의 반지를 착용하는 순간에 발동하는 이펙트
-	SE_EQUIP_HALLOWEEN_CANDY,		// 할로윈 사탕을 착용(-_-;)한 순간에 발동하는 이펙트
-	SE_EQUIP_HAPPINESS_RING,		// 크리스마스 행복의 반지를 착용하는 순간에 발동하는 이펙트
-	SE_EQUIP_LOVE_PENDANT,		// 발렌타인 사랑의 팬던트(71145) 착용할 때 이펙트 (발동이펙트임, 지속이펙트 아님)
-};
-
-typedef struct SPacketGCSpecialEffect
-{
-    BYTE header;
-    BYTE type;
-    DWORD vid;
-} TPacketGCSpecialEffect;
-
-typedef struct SPacketGCNPCPosition
-{
-    BYTE header;
-	WORD size;
-    WORD count;
-} TPacketGCNPCPosition;
-
-struct TNPCPosition
-{
-    BYTE bType;
-    char name[CHARACTER_NAME_MAX_LEN+1];
-    long x;
-    long y;
-};
-
-typedef struct SPacketGCChangeName
-{
-    BYTE header;
-    DWORD pid;
-    char name[CHARACTER_NAME_MAX_LEN+1];
-} TPacketGCChangeName;
-
-enum EBlockAction
-{
-    BLOCK_EXCHANGE              = (1 << 0),
-    BLOCK_PARTY_INVITE          = (1 << 1),
-    BLOCK_GUILD_INVITE          = (1 << 2),
-    BLOCK_WHISPER               = (1 << 3),
-    BLOCK_MESSENGER_INVITE      = (1 << 4),
-    BLOCK_PARTY_REQUEST         = (1 << 5),
-};
-
-typedef struct packet_china_matrixd_card
-{
-	BYTE	bHeader;
-	DWORD	dwRows;
-	DWORD	dwCols;
-} TPacketGCChinaMatrixCard;
-
-typedef struct packet_runup_matrixd_quiz
-{
-	BYTE	bHeader;
-	char	szQuiz[RUNUP_MATRIX_QUIZ_MAX_LEN + 1];	
-} TPacketGCRunupMatrixQuiz;
-
-typedef struct packet_newcibn_passpod_request
-{
-	BYTE	bHeader;
-} TPacketGCNEWCIBNPasspodRequest;
-
-typedef struct packet_newcibn_passpod_failure
-{
-	BYTE	bHeader;
-	char	szMessage[NEWCIBN_PASSPOD_FAILURE_MAX_LEN + 1];
-} TPacketGCNEWCIBNPasspodFailure;
 
 typedef struct packet_login_key
 {
diff --git a/Lead-Client-Source/UserInterface/PythonChat.cpp b/Lead-Client-Source/UserInterface/PythonChat.cpp
index 28acd7e86..c5955bad6 100644
--- a/Lead-Client-Source/UserInterface/PythonChat.cpp
+++ b/Lead-Client-Source/UserInterface/PythonChat.cpp
@@ -702,7 +702,7 @@ void CWhisper::AppendChat(int iType, const char * c_szChat)
 	// DEFAULT_FONT
 	//static CResource * s_pResource = CResourceManager::Instance().GetResourcePointer(g_strDefaultFontName.c_str());
 
-#if defined(LOCALE_SERVICE_YMIR) || defined(LOCALE_SERVICE_JAPAN) || defined(LOCALE_SERVICE_HONGKONG) || defined(LOCALE_SERVICE_TAIWAN) || defined(LOCALE_SERVICE_NEWCIBN)
+#if defined(LOCALE_SERVICE_YMIR) || defined(LOCALE_SERVICE_JAPAN) || defined(LOCALE_SERVICE_HONGKONG) || defined(LOCALE_SERVICE_TAIWAN) 
 	CGraphicText* pkDefaultFont = static_cast<CGraphicText*>(DefaultFont_GetResource());
 #else
 	CGraphicText* pkDefaultFont = (iType == CPythonChat::WHISPER_TYPE_GM) ? static_cast<CGraphicText*>(DefaultItalicFont_GetResource()) : static_cast<CGraphicText*>(DefaultFont_GetResource());
diff --git a/Lead-Client-Source/UserInterface/PythonNetworkStream.cpp b/Lead-Client-Source/UserInterface/PythonNetworkStream.cpp
index b2093013f..650db1e4e 100644
--- a/Lead-Client-Source/UserInterface/PythonNetworkStream.cpp
+++ b/Lead-Client-Source/UserInterface/PythonNetworkStream.cpp
@@ -147,10 +147,6 @@ class CMainPacketHeaderMap : public CNetworkPacketHeaderMap
 			Set(HEADER_GC_NPC_POSITION, CNetworkPacketHeaderMap::TPacketType(sizeof(TPacketGCNPCPosition), DYNAMIC_SIZE_PACKET));
 			Set(HEADER_GC_CHANGE_NAME, CNetworkPacketHeaderMap::TPacketType(sizeof(TPacketGCChangeName), STATIC_SIZE_PACKET));
 
-			Set(HEADER_GC_CHINA_MATRIX_CARD, CNetworkPacketHeaderMap::TPacketType(sizeof(TPacketGCChinaMatrixCard), STATIC_SIZE_PACKET));
-			Set(HEADER_GC_RUNUP_MATRIX_QUIZ, CNetworkPacketHeaderMap::TPacketType(sizeof(TPacketGCRunupMatrixQuiz), STATIC_SIZE_PACKET));
-			Set(HEADER_GC_NEWCIBN_PASSPOD_REQUEST, CNetworkPacketHeaderMap::TPacketType(sizeof(TPacketGCNEWCIBNPasspodRequest), STATIC_SIZE_PACKET));
-			Set(HEADER_GC_NEWCIBN_PASSPOD_FAILURE, CNetworkPacketHeaderMap::TPacketType(sizeof(TPacketGCNEWCIBNPasspodFailure), STATIC_SIZE_PACKET));
 			Set(HEADER_GC_LOGIN_KEY, CNetworkPacketHeaderMap::TPacketType(sizeof(TPacketGCLoginKey), STATIC_SIZE_PACKET));
 
 			Set(HEADER_GC_AUTH_SUCCESS, CNetworkPacketHeaderMap::TPacketType(sizeof(TPacketGCAuthSuccess), STATIC_SIZE_PACKET));
diff --git a/Lead-Client-Source/UserInterface/PythonNetworkStream.h b/Lead-Client-Source/UserInterface/PythonNetworkStream.h
index 98b6e90da..534014bef 100644
--- a/Lead-Client-Source/UserInterface/PythonNetworkStream.h
+++ b/Lead-Client-Source/UserInterface/PythonNetworkStream.h
@@ -295,9 +295,6 @@ class CPythonNetworkStream : public CNetworkStream, public CSingleton<CPythonNet
 		// Login Phase
 		bool SendLoginPacket(const char * c_szName, const char * c_szPassword);
 		bool SendLoginPacketNew(const char * c_szName, const char * c_szPassword);
-		bool SendChinaMatrixCardPacket(const char * c_szMatrixCardString);
-		bool SendRunupMatrixAnswerPacket(const char * c_szMatrixCardString);
-		bool SendNEWCIBNPasspodAnswerPacket(const char * answer);
 		bool SendDirectEnterPacket(const char * c_szName, const char * c_szPassword, UINT uChrSlot);
 
 		bool SendEnterGame();
@@ -399,10 +396,6 @@ class CPythonNetworkStream : public CNetworkStream, public CSingleton<CPythonNet
 		bool __RecvLoginSuccessPacket4();
 		bool __RecvLoginFailurePacket();
 		bool __RecvEmpirePacket();
-		bool __RecvChinaMatrixCardPacket();
-		bool __RecvRunupMatrixQuizPacket();
-		bool __RecvNEWCIBNPasspodRequestPacket();
-		bool __RecvNEWCIBNPasspodFailurePacket();
 		bool __RecvLoginKeyPacket();
 
 		// Select Phase
diff --git a/Lead-Client-Source/UserInterface/PythonNetworkStreamModule.cpp b/Lead-Client-Source/UserInterface/PythonNetworkStreamModule.cpp
index ca1207e68..514901084 100644
--- a/Lead-Client-Source/UserInterface/PythonNetworkStreamModule.cpp
+++ b/Lead-Client-Source/UserInterface/PythonNetworkStreamModule.cpp
@@ -418,38 +418,8 @@ PyObject* netSendLoginPacket(PyObject* poSelf, PyObject* poArgs)
 	return Py_BuildNone();
 }
 
-PyObject* netSendChinaMatrixCardPacket(PyObject* poSelf, PyObject* poArgs)
-{
-	char* szMatrixCardString;
-	if (!PyTuple_GetString(poArgs, 0, &szMatrixCardString))
-		return Py_BuildException();
-
-	CAccountConnector & rkAccountConnector = CAccountConnector::Instance();
-	rkAccountConnector.SendChinaMatrixCardPacket(szMatrixCardString);
-	return Py_BuildNone();
-}
-
-PyObject* netSendRunupMatrixCardPacket(PyObject* poSelf, PyObject* poArgs)
-{
-	char* szMatrixCardString;
-	if (!PyTuple_GetString(poArgs, 0, &szMatrixCardString))
-		return Py_BuildException();
 
-	CAccountConnector & rkAccountConnector = CAccountConnector::Instance();
-	rkAccountConnector.SendRunupMatrixCardPacket(szMatrixCardString);
-	return Py_BuildNone();
-}
 
-PyObject* netSendNEWCIBNPasspodAnswerPacket(PyObject* poSelf, PyObject* poArgs)
-{
-	char* szMatrixCardString;
-	if (!PyTuple_GetString(poArgs, 0, &szMatrixCardString))
-		return Py_BuildException();
-
-	CAccountConnector & rkAccountConnector = CAccountConnector::Instance();
-	rkAccountConnector.SendNEWCIBNPasspodAnswerPacket(szMatrixCardString);
-	return Py_BuildNone();
-}
 
 
 PyObject* netDirectEnter(PyObject* poSelf, PyObject* poArgs)
@@ -1762,9 +1732,6 @@ void initnet()
 		{ "ConnectToAccountServer",				netConnectToAccountServer,				METH_VARARGS },
 
 		{ "SendLoginPacket",					netSendLoginPacket,						METH_VARARGS },
-		{ "SendChinaMatrixCardPacket",			netSendChinaMatrixCardPacket,			METH_VARARGS },
-		{ "SendRunupMatrixCardPacket",			netSendRunupMatrixCardPacket,			METH_VARARGS },
-		{ "SendNEWCIBNPasspodAnswerPacket",		netSendNEWCIBNPasspodAnswerPacket,		METH_VARARGS },
 		{ "SendSelectEmpirePacket",				netSendSelectEmpirePacket,				METH_VARARGS },
 		{ "SendSelectCharacterPacket",			netSendSelectCharacterPacket,			METH_VARARGS },
 		{ "SendChangeNamePacket",				netSendChangeNamePacket,				METH_VARARGS },
diff --git a/Lead-Client-Source/UserInterface/PythonNetworkStreamPhaseLogin.cpp b/Lead-Client-Source/UserInterface/PythonNetworkStreamPhaseLogin.cpp
index 4020c8e33..16ffa5a75 100644
--- a/Lead-Client-Source/UserInterface/PythonNetworkStreamPhaseLogin.cpp
+++ b/Lead-Client-Source/UserInterface/PythonNetworkStreamPhaseLogin.cpp
@@ -38,24 +38,8 @@ void CPythonNetworkStream::LoginPhase()
 				return;
 			break;
 
-		case HEADER_GC_CHINA_MATRIX_CARD:
-			if (__RecvChinaMatrixCardPacket())
-				return;
-			break;
 
-		case HEADER_GC_RUNUP_MATRIX_QUIZ:
-			if (__RecvRunupMatrixQuizPacket())
-				return;
-			break;
 
-		case HEADER_GC_NEWCIBN_PASSPOD_REQUEST:
-			if (__RecvNEWCIBNPasspodRequestPacket())
-				return;
-			break;
-		case HEADER_GC_NEWCIBN_PASSPOD_FAILURE:
-			if (__RecvNEWCIBNPasspodFailurePacket())
-				return;
-			break;
 
 
 		case HEADER_GC_LOGIN_KEY:
@@ -302,103 +286,16 @@ bool CPythonNetworkStream::SendLoginPacketNew(const char * c_szName, const char
 	return true;
 }
 
-bool CPythonNetworkStream::__RecvRunupMatrixQuizPacket()
-{
-	TPacketGCRunupMatrixQuiz kMatrixQuizPacket;
-	if (!Recv(sizeof(TPacketGCRunupMatrixQuiz), &kMatrixQuizPacket))
-		return false;
-
-	PyCallClassMemberFunc(m_apoPhaseWnd[PHASE_WINDOW_LOGIN], "BINARY_OnRunupMatrixQuiz", Py_BuildValue("(s)", kMatrixQuizPacket.szQuiz));	
-	return true;
-}
-
-bool CPythonNetworkStream::SendRunupMatrixAnswerPacket(const char * c_szMatrixCardString)
-{
-	TPacketCGRunupMatrixAnswer answerPacket;
-	answerPacket.bHeader = HEADER_CG_RUNUP_MATRIX_ANSWER;
-	strncpy(answerPacket.szAnswer, c_szMatrixCardString, RUNUP_MATRIX_ANSWER_MAX_LEN);
-	answerPacket.szAnswer[RUNUP_MATRIX_ANSWER_MAX_LEN] = '\0';
-	if (!Send(sizeof(answerPacket), &answerPacket))
-	{
-		TraceError("SendRunupMatrixCardPacketError");
-		return false;
-	}
-	return SendSequence();
-}
-
-bool CPythonNetworkStream::__RecvNEWCIBNPasspodRequestPacket()
-{
-	TPacketGCNEWCIBNPasspodRequest kRequestPacket;
-	if (!Recv(sizeof(kRequestPacket), &kRequestPacket))
-		return false;
-
-	PyCallClassMemberFunc(m_apoPhaseWnd[PHASE_WINDOW_LOGIN], "BINARY_OnNEWCIBNPasspodRequest", Py_BuildValue("()"));	
-	return true;
-}
-
-bool CPythonNetworkStream::__RecvNEWCIBNPasspodFailurePacket()
-{
-	TPacketGCNEWCIBNPasspodFailure kFailurePacket;
-	if (!Recv(sizeof(kFailurePacket), &kFailurePacket))
-		return false;
 
-	PyCallClassMemberFunc(m_apoPhaseWnd[PHASE_WINDOW_LOGIN], "BINARY_OnNEWCIBNPasspodFailure", Py_BuildValue("()"));	
-	return true;
-}
 
 
-bool CPythonNetworkStream::SendNEWCIBNPasspodAnswerPacket(const char * answer)
-{
-	TPacketCGNEWCIBNPasspodAnswer answerPacket;
-	answerPacket.bHeader = HEADER_CG_NEWCIBN_PASSPOD_ANSWER;
-	strncpy(answerPacket.szAnswer, answer, NEWCIBN_PASSPOD_ANSWER_MAX_LEN);
-	answerPacket.szAnswer[NEWCIBN_PASSPOD_ANSWER_MAX_LEN] = '\0';	
-	if (!Send(sizeof(answerPacket), &answerPacket))
-	{
-		TraceError("SendNEWCIBNPasspodAnswerPacket");
-		return false;
-	}
-	return SendSequence();
-}
 
-bool CPythonNetworkStream::SendChinaMatrixCardPacket(const char * c_szMatrixCardString)
-{
-	TPacketCGChinaMatrixCard MatrixCardPacket;
-	MatrixCardPacket.bHeader = HEADER_CG_CHINA_MATRIX_CARD;
-	strncpy(MatrixCardPacket.szAnswer, c_szMatrixCardString, CHINA_MATRIX_ANSWER_MAX_LEN);
-	MatrixCardPacket.szAnswer[CHINA_MATRIX_ANSWER_MAX_LEN]='\0';
 
-	if (!Send(sizeof(MatrixCardPacket), &MatrixCardPacket))
-	{
-		Tracen("SendLogin Error");
-		return false;
-	}
-
-	m_isWaitLoginKey = TRUE;
 
-	return SendSequence();
-}
 
 #define ROW(rows, i) ((rows >> ((4 - i - 1) * 8)) & 0x000000FF)
 #define COL(cols, i) ((cols >> ((4 - i - 1) * 8)) & 0x000000FF)
 
-bool CPythonNetworkStream::__RecvChinaMatrixCardPacket()
-{
-	TPacketGCChinaMatrixCard kMatrixCardPacket;
-	if (!Recv(sizeof(TPacketGCChinaMatrixCard), &kMatrixCardPacket))
-		return false;
-
-	PyObject * pyValue = Py_BuildValue("(iiiiiiii)",	ROW(kMatrixCardPacket.dwRows, 0),
-														ROW(kMatrixCardPacket.dwRows, 1),
-														ROW(kMatrixCardPacket.dwRows, 2),
-														ROW(kMatrixCardPacket.dwRows, 3),
-														COL(kMatrixCardPacket.dwCols, 0),
-														COL(kMatrixCardPacket.dwCols, 1),
-														COL(kMatrixCardPacket.dwCols, 2),
-														COL(kMatrixCardPacket.dwCols, 3));
-	PyCallClassMemberFunc(m_apoPhaseWnd[PHASE_WINDOW_LOGIN], "OnMatrixCard", pyValue);
-	return true;
-}
 
 bool CPythonNetworkStream::__RecvLoginKeyPacket()
 {
diff --git a/Lead-Client-Source/UserInterface/UserInterface_VC71.vcproj b/Lead-Client-Source/UserInterface/UserInterface_VC71.vcproj
index 454ae038d..31a081a57 100644
--- a/Lead-Client-Source/UserInterface/UserInterface_VC71.vcproj
+++ b/Lead-Client-Source/UserInterface/UserInterface_VC71.vcproj
@@ -1055,9 +1055,6 @@
 			<File
 				RelativePath=".\Locale_inc_KO.h">
 			</File>
-			<File
-				RelativePath=".\Locale_inc_NEWCIBN.h">
-			</File>
 			<File
 				RelativePath=".\Locale_inc_SG.h">
 			</File>
diff --git a/Lead-Client-Source/UserInterface/UserInterface_VC90.vcproj b/Lead-Client-Source/UserInterface/UserInterface_VC90.vcproj
index 6776ba244..ce6b69fe9 100644
--- a/Lead-Client-Source/UserInterface/UserInterface_VC90.vcproj
+++ b/Lead-Client-Source/UserInterface/UserInterface_VC90.vcproj
@@ -1453,10 +1453,6 @@
 				RelativePath=".\Locale_inc_KO_DEV.h"
 				>
 			</File>
-			<File
-				RelativePath=".\Locale_inc_NEWCIBN.h"
-				>
-			</File>
 			<File
 				RelativePath=".\Locale_inc_SG.h"
 				>
diff --git a/Lead-Client-Source/UserInterface/UserInterface_VC90.vcxproj b/Lead-Client-Source/UserInterface/UserInterface_VC90.vcxproj
index 31b31877a..5aad31e9b 100644
--- a/Lead-Client-Source/UserInterface/UserInterface_VC90.vcxproj
+++ b/Lead-Client-Source/UserInterface/UserInterface_VC90.vcxproj
@@ -294,7 +294,6 @@
     <ClInclude Include="Locale_inc_JP.h" />
     <ClInclude Include="Locale_inc_KO.h" />
     <ClInclude Include="Locale_inc_KO_DEV.h" />
-    <ClInclude Include="Locale_inc_NEWCIBN.h" />
     <ClInclude Include="Locale_inc_SG.h" />
     <ClInclude Include="Locale_inc_VI.h" />
     <ClInclude Include="MarkImage.h" />
diff --git a/Lead-Client-Source/UserInterface/UserInterface_VC90.vcxproj.filters b/Lead-Client-Source/UserInterface/UserInterface_VC90.vcxproj.filters
index 4e88fe375..ac5a14bc5 100644
--- a/Lead-Client-Source/UserInterface/UserInterface_VC90.vcxproj.filters
+++ b/Lead-Client-Source/UserInterface/UserInterface_VC90.vcxproj.filters
@@ -448,9 +448,6 @@
     <ClInclude Include="Locale_inc_KO_DEV.h">
       <Filter>Locale</Filter>
     </ClInclude>
-    <ClInclude Include="Locale_inc_NEWCIBN.h">
-      <Filter>Locale</Filter>
-    </ClInclude>
     <ClInclude Include="Locale_inc_SG.h">
       <Filter>Locale</Filter>
     </ClInclude>
diff --git a/Lead-Server-Source/common/length.h b/Lead-Server-Source/common/length.h
index 90782ccca..7e339db3b 100644
--- a/Lead-Server-Source/common/length.h
+++ b/Lead-Server-Source/common/length.h
@@ -67,8 +67,6 @@ enum EMisc
 	//LIMIT_GOLD
 	GOLD_MAX = 2000000000,
 
-	MAX_PASSPOD = 8 ,
-
 		
 	//END_LIMIT_GOLD
 
@@ -101,11 +99,6 @@ enum EMisc
 */
 };
 
-enum EMatrixCard
-{
-	MATRIX_CODE_MAX_LEN		= 192,
-	MATRIX_ANSWER_MAX_LEN	= 8,
-};
 
 enum EWearPositions
 {
diff --git a/Lead-Server-Source/common/tables.h b/Lead-Server-Source/common/tables.h
index d8c52cebd..7163be998 100644
--- a/Lead-Server-Source/common/tables.h
+++ b/Lead-Server-Source/common/tables.h
@@ -285,37 +285,11 @@ enum
 
 	HEADER_DG_MAP_LOCATIONS		= 0xfe,
 	HEADER_DG_P2P			= 0xff,
-
-	HEADER_GP_CONFIRM_PASSPOD = 1,
-	HEADER_PG_CONFIRM_PASSPOD = 2,
-
 };
 
-enum E_PASSPOD
-{
-	E_PASSPOD_SUCCESS = 0,
-	E_PASSPOD_FAILED_PASSPOD_ERROR,
-	E_PASSPOD_FAILED_USER_NOT_FOUND,
-	E_PASSPOD_FAILED_SYSTEM_NOT_FOUND,
-	E_PASSPOD_FAILED_TOKEN_DISABLED,
-	E_PASSPOD_FAILED_EMPTY,
-};
 
 
-typedef struct SRequestConfirmPasspod
-{
-	int pid;
-	char passpod[MAX_PASSPOD + 1];
-	char login[LOGIN_MAX_LEN + 1];
-
-} RequestConfirmPasspod;
 
-typedef struct SResultConfirmPasspod
-{
-	int pid;
-	int ret_code;
-	char login[LOGIN_MAX_LEN + 1];
-} ResultConfirmPasspod;
 /* ----------------------------------------------
  * table
  * ----------------------------------------------
diff --git a/Lead-Server-Source/game/src/Makefile b/Lead-Server-Source/game/src/Makefile
index add68232e..c3fb2c9c2 100644
--- a/Lead-Server-Source/game/src/Makefile
+++ b/Lead-Server-Source/game/src/Makefile
@@ -78,9 +78,9 @@ CPPFILE = BattleArena.cpp FSM.cpp MarkConvert.cpp MarkImage.cpp MarkManager.cpp
 		  guild_manager.cpp guild_war.cpp horse_rider.cpp horsename_manager.cpp input.cpp input_auth.cpp input_db.cpp\
 		  input_login.cpp input_main.cpp input_p2p.cpp input_teen.cpp input_udp.cpp ip_ban.cpp\
 		  item.cpp item_addon.cpp item_attribute.cpp item_manager.cpp item_manager_idrange.cpp locale.cpp\
-		  locale_service.cpp log.cpp login_data.cpp lzo_manager.cpp marriage.cpp matrix_card.cpp\
+		  locale_service.cpp log.cpp login_data.cpp lzo_manager.cpp marriage.cpp\
 		  messenger_manager.cpp mining.cpp mob_manager.cpp monarch.cpp motion.cpp over9refine.cpp p2p.cpp packet_info.cpp\
-		  party.cpp passpod.cpp pcbang.cpp polymorph.cpp priv_manager.cpp pvp.cpp\
+		  party.cpp pcbang.cpp polymorph.cpp priv_manager.cpp pvp.cpp\
 		  questevent.cpp questlua.cpp questlua_affect.cpp questlua_arena.cpp questlua_ba.cpp questlua_building.cpp\
 		  questlua_dungeon.cpp questlua_forked.cpp questlua_game.cpp questlua_global.cpp\
 		  questlua_guild.cpp questlua_horse.cpp questlua_pet.cpp questlua_item.cpp questlua_marriage.cpp questlua_mgmt.cpp\
diff --git a/Lead-Server-Source/game/src/config.cpp b/Lead-Server-Source/game/src/config.cpp
index 2273e9d02..e2f824280 100644
--- a/Lead-Server-Source/game/src/config.cpp
+++ b/Lead-Server-Source/game/src/config.cpp
@@ -33,7 +33,6 @@ int		save_event_second_cycle = passes_per_sec * 120;	// 3
 int		ping_event_second_cycle = passes_per_sec * 60;
 bool	g_bNoMoreClient = false;
 bool	g_bNoRegen = false;
-bool	g_bNoPasspod = false;
 
 // TRAFFIC_PROFILER
 bool		g_bTrafficProfileOn = false;
diff --git a/Lead-Server-Source/game/src/config.h b/Lead-Server-Source/game/src/config.h
index 8a84ee3ea..de8c3ad37 100644
--- a/Lead-Server-Source/game/src/config.h
+++ b/Lead-Server-Source/game/src/config.h
@@ -20,8 +20,6 @@ extern WORD db_port;
 extern char teen_addr[ADDRESS_MAX_LEN + 1];
 extern WORD teen_port;
 
-extern char passpod_addr[ADDRESS_MAX_LEN + 1];
-extern WORD passpod_port;
 
 extern int passes_per_sec;
 extern int save_event_second_cycle;
diff --git a/Lead-Server-Source/game/src/db.cpp b/Lead-Server-Source/game/src/db.cpp
index 28ca3491a..e64fb04bb 100644
--- a/Lead-Server-Source/game/src/db.cpp
+++ b/Lead-Server-Source/game/src/db.cpp
@@ -1,1224 +1,1053 @@
-#include "stdafx.h"
-#include <sstream>
-#include "../../common/length.h"
-
-#include "db.h"
-
-#include "config.h"
-#include "desc_client.h"
-#include "desc_manager.h"
-#include "char.h"
-#include "char_manager.h"
-#include "item.h"
-#include "item_manager.h"
-#include "p2p.h"
-#include "matrix_card.h"
-#include "log.h"
-#include "login_data.h"
-#include "locale_service.h"
-#include "pcbang.h"
-#include "spam.h"
-#include "auth_brazil.h"
-
-extern bool g_bNoPasspod;
-extern std::string g_stBlockDate;
-extern int openid_server;
-
-//占쌩깍옙 passpod 占쏙옙占쏙옙 占쌉쇽옙 
-bool CheckPasspod(const char * account)
-{
-	char szQuery[1024];
-
-	snprintf(szQuery, sizeof(szQuery), "SELECT ID FROM passpod WHERE Login='%s'", account); 
-	SQLMsg * pMsg = DBManager::instance().DirectQuery(szQuery);
- 	
-	if (!pMsg)
-	{
-		//fprintf(stderr, "cannot get the MATRIX\n");
-		sys_log(0, "cannot get the PASSPOD");
-		delete pMsg;
-		return false;
-	}
-
-	if (pMsg->Get()->uiNumRows == 0)
-	{
-		puts(szQuery);
-		sys_log(0, "[PASSPOD]DirectQuery failed(%s)", szQuery);
-
-		delete pMsg;
-		return false;
-	}
-
-	delete pMsg;
-
-	return true;
-}
-
-
-DBManager::DBManager() : m_bIsConnect(false)
-{
-}
-
-DBManager::~DBManager()
-{
-}
-
-bool DBManager::Connect(const char * host, const int port, const char * user, const char * pwd, const char * db)
-{
-	if (m_sql.Setup(host, user, pwd, db, g_stLocale.c_str(), false, port))
-		m_bIsConnect = true;
-
-	if (!m_sql_direct.Setup(host, user, pwd, db, g_stLocale.c_str(), true, port))
-		sys_err("cannot open direct sql connection to host %s", host);
-
-	if (m_bIsConnect && !g_bAuthServer)
-	{
-		LoadDBString();
-	}
-
-	return m_bIsConnect;
-}
-
-void DBManager::Query(const char * c_pszFormat, ...)
-{
-	char szQuery[4096];
-	va_list args;
-
-	va_start(args, c_pszFormat);
-	vsnprintf(szQuery, sizeof(szQuery), c_pszFormat, args);
-	va_end(args);
-
-	m_sql.AsyncQuery(szQuery);
-}
-
-SQLMsg * DBManager::DirectQuery(const char * c_pszFormat, ...)
-{
-	char szQuery[4096];
-	va_list args;
-
-	va_start(args, c_pszFormat);
-	vsnprintf(szQuery, sizeof(szQuery), c_pszFormat, args);
-	va_end(args);
-
-	return m_sql_direct.DirectQuery(szQuery);
-}
-
-bool DBManager::IsConnected()
-{
-	return m_bIsConnect;
-}
-
-void DBManager::ReturnQuery(int iType, DWORD dwIdent, void * pvData, const char * c_pszFormat, ...)
-{
-	//sys_log(0, "ReturnQuery %s", c_pszQuery);
-	char szQuery[4096];
-	va_list args;
-
-	va_start(args, c_pszFormat);
-	vsnprintf(szQuery, sizeof(szQuery), c_pszFormat, args);
-	va_end(args);
-
-	CReturnQueryInfo * p = M2_NEW CReturnQueryInfo;
-
-	p->iQueryType = QUERY_TYPE_RETURN;
-	p->iType = iType;
-	p->dwIdent = dwIdent;
-	p->pvData = pvData;
-
-	m_sql.ReturnQuery(szQuery, p);
-}
-
-SQLMsg * DBManager::PopResult()
-{
-	SQLMsg * p;
-
-	if (m_sql.PopResult(&p))
-		return p;
-
-	return NULL;
-}
-
-void DBManager::Process()
-{
-	SQLMsg* pMsg = NULL;
-
-	while ((pMsg = PopResult()))
-	{
-		if( NULL != pMsg->pvUserData )
-		{
-			switch( reinterpret_cast<CQueryInfo*>(pMsg->pvUserData)->iQueryType )
-			{
-				case QUERY_TYPE_RETURN:
-					AnalyzeReturnQuery(pMsg);
-					break;
-
-				case QUERY_TYPE_FUNCTION:
-					{
-						CFuncQueryInfo* qi = reinterpret_cast<CFuncQueryInfo*>( pMsg->pvUserData );
-						qi->f(pMsg);
-						M2_DELETE(qi);
-					}
-					break;
-
-				case QUERY_TYPE_AFTER_FUNCTION:
-					{
-						CFuncAfterQueryInfo* qi = reinterpret_cast<CFuncAfterQueryInfo*>( pMsg->pvUserData );
-						qi->f();
-						M2_DELETE(qi);
-					}
-					break;
-			}
-		}
-
-		delete pMsg;
-	}
-}
-
-CLoginData * DBManager::GetLoginData(DWORD dwKey)
-{
-	std::map<DWORD, CLoginData *>::iterator it = m_map_pkLoginData.find(dwKey);
-
-	if (it == m_map_pkLoginData.end())
-		return NULL;
-
-	return it->second;
-}
-
-void DBManager::InsertLoginData(CLoginData * pkLD)
-{
-	m_map_pkLoginData.insert(std::make_pair(pkLD->GetKey(), pkLD));
-}
-
-void DBManager::DeleteLoginData(CLoginData * pkLD)
-{
-	std::map<DWORD, CLoginData *>::iterator it = m_map_pkLoginData.find(pkLD->GetKey());
-
-	if (it == m_map_pkLoginData.end())
-		return;
-
-	sys_log(0, "DeleteLoginData %s %p", pkLD->GetLogin(), pkLD);
-
-	M2_DELETE(it->second);
-	m_map_pkLoginData.erase(it);
-}
-
-void DBManager::SendLoginPing(const char * c_pszLogin)
-{
-	TPacketGGLoginPing ptog;
-
-	ptog.bHeader = HEADER_GG_LOGIN_PING;
-	strlcpy(ptog.szLogin, c_pszLogin, sizeof(ptog.szLogin));
-
-	if (!g_pkAuthMasterDesc)  // If I am master, broadcast to others
-	{
-		P2P_MANAGER::instance().Send(&ptog, sizeof(TPacketGGLoginPing));
-	}
-	else // If I am slave send login ping to master
-	{
-		g_pkAuthMasterDesc->Packet(&ptog, sizeof(TPacketGGLoginPing));
-	}
-}
-
-void DBManager::SendAuthLogin(LPDESC d)
-{
-	const TAccountTable & r = d->GetAccountTable();
-
-	CLoginData * pkLD = GetLoginData(d->GetLoginKey());
-
-	if (!pkLD)
-		return;
-
-	TPacketGDAuthLogin ptod;
-	ptod.dwID = r.id;
-	
-	trim_and_lower(r.login, ptod.szLogin, sizeof(ptod.szLogin));
-	strlcpy(ptod.szSocialID, r.social_id, sizeof(ptod.szSocialID));
-	ptod.dwLoginKey = d->GetLoginKey();
-
-	thecore_memcpy(ptod.iPremiumTimes, pkLD->GetPremiumPtr(), sizeof(ptod.iPremiumTimes));
-	thecore_memcpy(&ptod.adwClientKey, pkLD->GetClientKey(), sizeof(DWORD) * 4);
-
-	db_clientdesc->DBPacket(HEADER_GD_AUTH_LOGIN, d->GetHandle(), &ptod, sizeof(TPacketGDAuthLogin));
-	sys_log(0, "SendAuthLogin %s key %u", ptod.szLogin, ptod.dwID);
-
-	SendLoginPing(r.login);
-}
-
-void DBManager::LoginPrepare(BYTE bBillType, DWORD dwBillID, long lRemainSecs, LPDESC d, DWORD * pdwClientKey, int * paiPremiumTimes)
-{
-	const TAccountTable & r = d->GetAccountTable();
-
-	CLoginData * pkLD = M2_NEW CLoginData;
-
-	pkLD->SetKey(d->GetLoginKey());
-	pkLD->SetLogin(r.login);
-	pkLD->SetIP(d->GetHostName());
-	pkLD->SetClientKey(pdwClientKey);
-
-	if (paiPremiumTimes)
-		pkLD->SetPremium(paiPremiumTimes);
-
-	InsertLoginData(pkLD);
-
-	if (*d->GetMatrixCode())
-	{
-		unsigned long rows = 0, cols = 0;
-		MatrixCardRndCoordinate(rows, cols);
-
-		d->SetMatrixCardRowsAndColumns(rows, cols);
-
-		TPacketGCMatrixCard pm;
-
-		pm.bHeader = HEADER_GC_MATRIX_CARD;
-		pm.dwRows = rows;
-		pm.dwCols = cols;
-
-		d->Packet(&pm, sizeof(TPacketGCMatrixCard));
-
-		sys_log(0, "MATRIX_QUERY: %s %c%d %c%d %c%d %c%d %s", 
-				r.login,
-				MATRIX_CARD_ROW(rows, 0) + 'A',
-				MATRIX_CARD_COL(cols, 0) + 1,
-				MATRIX_CARD_ROW(rows, 1) + 'A',
-				MATRIX_CARD_COL(cols, 1) + 1,
-				MATRIX_CARD_ROW(rows, 2) + 'A',
-				MATRIX_CARD_COL(cols, 2) + 1,
-				MATRIX_CARD_ROW(rows, 3) + 'A',
-				MATRIX_CARD_COL(cols, 3) + 1,
-				d->GetMatrixCode());
-	}
-	else
-	{
-		if (LC_IsNewCIBN())
-		{
-			if (!g_bNoPasspod)
-			{
-				if (CheckPasspod(r.login))
-				{
-					BYTE id = HEADER_GC_REQUEST_PASSPOD;
-					d->Packet(&id, sizeof(BYTE));
-					sys_log(0, "%s request passpod", r.login);
-				}
-				else
-				{
-					SendAuthLogin(d);
-
-				}
-			}
-			else
-			{
-				SendAuthLogin(d);
-			}
-		}
-		else
-			SendAuthLogin(d);
-	}
-}
-
-void DBManager::AnalyzeReturnQuery(SQLMsg * pMsg)
-{
-	CReturnQueryInfo * qi = (CReturnQueryInfo *) pMsg->pvUserData;
-
-	switch (qi->iType)
-	{
-		case QID_AUTH_LOGIN:
-			{
-				TPacketCGLogin3 * pinfo = (TPacketCGLogin3 *) qi->pvData;
-				LPDESC d = DESC_MANAGER::instance().FindByLoginKey(qi->dwIdent);
-
-				if (!d)
-				{
-					M2_DELETE(pinfo);
-					break;
-				}
-				//占쏙옙치 占쏙옙占쏙옙 - By SeMinZ
-				d->SetLogin(pinfo->login);
-
-				sys_log(0, "QID_AUTH_LOGIN: START %u %p", qi->dwIdent, get_pointer(d));
-
-				if (pMsg->Get()->uiNumRows == 0)
-				{
-					if (true == LC_IsBrazil())
-					{
-						// 占쏙옙占쏙옙占쏙옙 占쏙옙占쏙옙占쏙옙 占쏙옙占쏙옙 占쏙옙占쏙옙占쏙옙 占싼댐옙
-						ReturnQuery(QID_BRAZIL_CREATE_ID, qi->dwIdent, pinfo,
-								"INSERT INTO account(login, password, social_id, create_time) "
-								"VALUES('%s', password('%s'), '0000000', NOW()) ;",
-								pinfo->login, pinfo->passwd);
-
-						sys_log(0, "[AUTH_BRAZIL] : Create A new AccountID From OnGame");
-					}
-					else
-					{
-						sys_log(0, "   NOID");
-						LoginFailure(d, "NOID");
-						M2_DELETE(pinfo);
-					}
-				}
-				else
-				{
-					MYSQL_ROW row = mysql_fetch_row(pMsg->Get()->pSQLResult);
-					int col = 0;
-
-					// PASSWORD('%s'), password, securitycode, social_id, id, status
-					char szEncrytPassword[45 + 1];
-					char szPassword[45 + 1];
-					char szMatrixCode[MATRIX_CODE_MAX_LEN + 1];
-					char szSocialID[SOCIAL_ID_MAX_LEN + 1];
-					char szStatus[ACCOUNT_STATUS_MAX_LEN + 1];
-					DWORD dwID = 0;
-
-					if (!row[col]) 
-					{ 
-						sys_err("error column %d", col);
-						M2_DELETE(pinfo);
-					   	break; 
-					}
-					
-					strlcpy(szEncrytPassword, row[col++], sizeof(szEncrytPassword));
-
-					if (!row[col]) 
-					{
-					   	sys_err("error column %d", col);
-						M2_DELETE(pinfo);
-					   	break;
-				   	}
-				
-					strlcpy(szPassword, row[col++], sizeof(szPassword));
-
-					if (!row[col]) 
-					{
-						*szMatrixCode = '\0'; 
-						col++;
-					}
-					else
-					{
-						strlcpy(szMatrixCode, row[col++], sizeof(szMatrixCode));
-					}
-
-					if (!row[col])
-				   	{ 
-						sys_err("error column %d", col); 
-						M2_DELETE(pinfo);
-						break;
-				   	}
-
-					strlcpy(szSocialID, row[col++], sizeof(szSocialID));
-
-					if (!row[col])
-				   	{
-					   	sys_err("error column %d", col);
-						M2_DELETE(pinfo);
-					   	break;
-				   	}
-				
-					str_to_number(dwID, row[col++]);
-					
-					if (!row[col]) 
-					{
-					   	sys_err("error column %d", col); 
-						M2_DELETE(pinfo);
-						break;
-				   	}
-
-					strlcpy(szStatus, row[col++], sizeof(szStatus));
-
-					BYTE bNotAvail = 0;
-					str_to_number(bNotAvail, row[col++]);
-
-					int aiPremiumTimes[PREMIUM_MAX_NUM];
-					memset(&aiPremiumTimes, 0, sizeof(aiPremiumTimes));
-
-					char szCreateDate[256] = "00000000";
-
-					if (!g_iUseLocale)
-					{
-						str_to_number(aiPremiumTimes[PREMIUM_EXP], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_ITEM], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_SAFEBOX], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_AUTOLOOT], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_FISH_MIND], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_MARRIAGE_FAST], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_GOLD], row[col++]);
-					}
-					else
-					{
-						str_to_number(aiPremiumTimes[PREMIUM_EXP], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_ITEM], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_SAFEBOX], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_AUTOLOOT], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_FISH_MIND], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_MARRIAGE_FAST], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_GOLD], row[col++]);
-
-						if (LC_IsEurope() || test_server)
-						{
-							long retValue = 0;
-							str_to_number(retValue, row[col]);
-
-							time_t create_time = retValue;
-							struct tm * tm1;
-							tm1 = localtime(&create_time);
-							strftime(szCreateDate, 255, "%Y%m%d", tm1);
-
-							sys_log(0, "Create_Time %d %s", retValue, szCreateDate);
-							sys_log(0, "Block Time %d ", strncmp(szCreateDate, g_stBlockDate.c_str(), 8));
-						}
-					}
-
-					int nPasswordDiff = strcmp(szEncrytPassword, szPassword);
-
-					if (true == LC_IsBrazil())
-					{
-						nPasswordDiff = 0; // 占쏙옙占쏙옙占 占쏙옙占쏙옙占쏙옙占쏙옙占쏙옙 占쏙옙橘占싫 체크占쏙옙 占쏙옙占쏙옙 占십는댐옙.
-					}
-
-					if (nPasswordDiff)
-					{
-						LoginFailure(d, "WRONGPWD");
-						sys_log(0, "   WRONGPWD");
-						M2_DELETE(pinfo);
-					}
-					else if (bNotAvail)
-					{
-						LoginFailure(d, "NOTAVAIL");
-						sys_log(0, "   NOTAVAIL");
-						M2_DELETE(pinfo);
-					}
-					else if (DESC_MANAGER::instance().FindByLoginName(pinfo->login))
-					{
-						LoginFailure(d, "ALREADY");
-						sys_log(0, "   ALREADY");
-						M2_DELETE(pinfo);
-					}
-					else if (strcmp(szStatus, "OK"))
-					{
-						LoginFailure(d, szStatus);
-						sys_log(0, "   STATUS: %s", szStatus);
-						M2_DELETE(pinfo);
-					}
-					else
-					{
-						if (LC_IsEurope())
-						{
-							//stBlockData >= 0 == 占쏙옙짜占쏙옙 BlockDate 占쏙옙占쏙옙 占싱뤄옙 
-							if (strncmp(szCreateDate, g_stBlockDate.c_str(), 8) >= 0)
-							{
-								LoginFailure(d, "BLKLOGIN");
-								sys_log(0, "   BLKLOGIN");
-								M2_DELETE(pinfo);
-								break;
-							}
-
-							char szQuery[1024];
-							snprintf(szQuery, sizeof(szQuery), "UPDATE account SET last_play=NOW() WHERE id=%u", dwID);
-							std::unique_ptr<SQLMsg> msg( DBManager::instance().DirectQuery(szQuery) );
-						}
-
-						TAccountTable & r = d->GetAccountTable();
-
-						r.id = dwID;
-						trim_and_lower(pinfo->login, r.login, sizeof(r.login));
-						strlcpy(r.passwd, pinfo->passwd, sizeof(r.passwd));
-						strlcpy(r.social_id, szSocialID, sizeof(r.social_id));
-						DESC_MANAGER::instance().ConnectAccount(r.login, d);
-
-						d->SetMatrixCode(szMatrixCode);
-
-						sys_log(0, "QID_AUTH_LOGIN: SUCCESS %s", pinfo->login);
-
-						LoginPrepare(0, 0, 0, d, pinfo->adwClientKey, aiPremiumTimes);
-						M2_DELETE(pinfo);
-					}
-				}
-			}
-			break;
-
-		case QID_AUTH_LOGIN_OPENID:
-			{
-				TPacketCGLogin3 * pinfo = (TPacketCGLogin3 *) qi->pvData;
-				LPDESC d = DESC_MANAGER::instance().FindByLoginKey(qi->dwIdent);
-
-				if (!d)
-				{
-					M2_DELETE(pinfo);
-					break;
-				}
-				//占쏙옙치 占쏙옙占쏙옙 - By SeMinZ
-				d->SetLogin(pinfo->login);
-
-				sys_log(0, "QID_AUTH_LOGIN_OPENID: START %u %p", qi->dwIdent, get_pointer(d));
-
-				if (pMsg->Get()->uiNumRows == 0)
-				{
-					if (true == LC_IsBrazil())
-					{
-						// 占쏙옙占쏙옙占쏙옙 占쏙옙占쏙옙占쏙옙 占쏙옙占쏙옙 占쏙옙占쏙옙占쏙옙 占싼댐옙
-						ReturnQuery(QID_BRAZIL_CREATE_ID, qi->dwIdent, pinfo,
-								"INSERT INTO account(login, password, social_id, create_time) "
-								"VALUES('%s', password('%s'), '0000000', NOW()) ;",
-								pinfo->login, pinfo->passwd);
-
-						sys_log(0, "[AUTH_BRAZIL] : Create A new AccountID From OnGame");
-					} else if (true == LC_IsJapan())
-					{
-						// 占쏙옙占쏙옙占쏙옙 占쏙옙占쏙옙占쏙옙 占쏙옙占쏙옙 占쏙옙占쏙옙占쏙옙 占싼댐옙
-						ReturnQuery(QID_JAPAN_CREATE_ID, qi->dwIdent, pinfo,
-								"INSERT INTO account(login, password, social_id, create_time) "
-								"VALUES('%s', password('%s'), '0000000', NOW()) ;",
-								pinfo->login, "^Aasl@(!$)djl!231fj!&#");
-
-						sys_log(0, "[AUTH_JAPAN] : Create A new AccountID From OGE");
-					}
-					else
-					{
-						sys_log(0, "   NOID");
-						LoginFailure(d, "NOID");
-						M2_DELETE(pinfo);
-					}
-				}
-				else
-				{
-					MYSQL_ROW row = mysql_fetch_row(pMsg->Get()->pSQLResult);
-					int col = 0;
-
-					// PASSWORD('%s'), password, securitycode, social_id, id, status
-					char szEncrytPassword[45 + 1];
-					char szPassword[45 + 1];
-					char szMatrixCode[MATRIX_CODE_MAX_LEN + 1];
-					char szSocialID[SOCIAL_ID_MAX_LEN + 1];
-					char szStatus[ACCOUNT_STATUS_MAX_LEN + 1];
-					DWORD dwID = 0;
-
-					if (!row[col]) 
-					{ 
-						sys_err("error column %d", col);
-						M2_DELETE(pinfo);
-					   	break; 
-					}
-					
-					strlcpy(szEncrytPassword, row[col++], sizeof(szEncrytPassword));
-
-					if (!row[col]) 
-					{
-					   	sys_err("error column %d", col);
-						M2_DELETE(pinfo);
-					   	break;
-				   	}
-				
-					strlcpy(szPassword, row[col++], sizeof(szPassword));
-
-					if (!row[col]) 
-					{
-						*szMatrixCode = '\0'; 
-						col++;
-					}
-					else
-					{
-						strlcpy(szMatrixCode, row[col++], sizeof(szMatrixCode));
-					}
-
-					if (!row[col])
-				   	{ 
-						sys_err("error column %d", col); 
-						M2_DELETE(pinfo);
-						break;
-				   	}
-
-					strlcpy(szSocialID, row[col++], sizeof(szSocialID));
-
-					if (!row[col])
-				   	{
-					   	sys_err("error column %d", col);
-						M2_DELETE(pinfo);
-					   	break;
-				   	}
-				
-					str_to_number(dwID, row[col++]);
-					
-					if (!row[col]) 
-					{
-					   	sys_err("error column %d", col); 
-						M2_DELETE(pinfo);
-						break;
-				   	}
-
-					strlcpy(szStatus, row[col++], sizeof(szStatus));
-
-					BYTE bNotAvail = 0;
-					str_to_number(bNotAvail, row[col++]);
-
-					int aiPremiumTimes[PREMIUM_MAX_NUM];
-					memset(&aiPremiumTimes, 0, sizeof(aiPremiumTimes));
-
-					char szCreateDate[256] = "00000000";
-
-					if (!g_iUseLocale)
-					{
-						str_to_number(aiPremiumTimes[PREMIUM_EXP], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_ITEM], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_SAFEBOX], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_AUTOLOOT], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_FISH_MIND], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_MARRIAGE_FAST], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_GOLD], row[col++]);
-					}
-					else
-					{
-						str_to_number(aiPremiumTimes[PREMIUM_EXP], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_ITEM], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_SAFEBOX], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_AUTOLOOT], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_FISH_MIND], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_MARRIAGE_FAST], row[col++]);
-						str_to_number(aiPremiumTimes[PREMIUM_GOLD], row[col++]);
-
-						if (LC_IsEurope() || test_server)
-						{
-							long retValue = 0;
-							str_to_number(retValue, row[col]);
-
-							time_t create_time = retValue;
-							struct tm * tm1;
-							tm1 = localtime(&create_time);
-							strftime(szCreateDate, 255, "%Y%m%d", tm1);
-
-							sys_log(0, "Create_Time %d %s", retValue, szCreateDate);
-							sys_log(0, "Block Time %d ", strncmp(szCreateDate, g_stBlockDate.c_str(), 8));
-						}
-					}
-
-					int nPasswordDiff = strcmp(szEncrytPassword, szPassword);
-
-					if (true == LC_IsBrazil())
-					{
-						nPasswordDiff = 0; // 占쏙옙占쏙옙占 占쏙옙占쏙옙占쏙옙占쏙옙占쏙옙 占쏙옙橘占싫 체크占쏙옙 占쏙옙占쏙옙 占십는댐옙.
-					}
-
-					//OpenID : OpenID 占쏙옙 占쏙옙占, 占쏙옙橘占싫 체크占쏙옙 占쏙옙占쏙옙 占십는댐옙.
-					if (openid_server)
-					{
-						nPasswordDiff = 0;
-					}
-
-					if (nPasswordDiff)
-					{
-						LoginFailure(d, "WRONGPWD");
-						sys_log(0, "   WRONGPWD");
-						M2_DELETE(pinfo);
-					}
-					else if (bNotAvail)
-					{
-						LoginFailure(d, "NOTAVAIL");
-						sys_log(0, "   NOTAVAIL");
-						M2_DELETE(pinfo);
-					}
-					else if (DESC_MANAGER::instance().FindByLoginName(pinfo->login))
-					{
-						LoginFailure(d, "ALREADY");
-						sys_log(0, "   ALREADY");
-						M2_DELETE(pinfo);
-					}
-					else if (strcmp(szStatus, "OK"))
-					{
-						LoginFailure(d, szStatus);
-						sys_log(0, "   STATUS: %s", szStatus);
-						M2_DELETE(pinfo);
-					}
-					else
-					{
-						if (LC_IsEurope())
-						{
-							//stBlockData >= 0 == 占쏙옙짜占쏙옙 BlockDate 占쏙옙占쏙옙 占싱뤄옙 
-							if (strncmp(szCreateDate, g_stBlockDate.c_str(), 8) >= 0)
-							{
-								LoginFailure(d, "BLKLOGIN");
-								sys_log(0, "   BLKLOGIN");
-								M2_DELETE(pinfo);
-								break;
-							}
-
-							char szQuery[1024];
-							snprintf(szQuery, sizeof(szQuery), "UPDATE account SET last_play=NOW() WHERE id=%u", dwID);
-							std::unique_ptr<SQLMsg> msg( DBManager::instance().DirectQuery(szQuery) );
-						}
-
-						TAccountTable & r = d->GetAccountTable();
-
-						r.id = dwID;
-						trim_and_lower(pinfo->login, r.login, sizeof(r.login));
-						strlcpy(r.passwd, pinfo->passwd, sizeof(r.passwd));
-						strlcpy(r.social_id, szSocialID, sizeof(r.social_id));
-						DESC_MANAGER::instance().ConnectAccount(r.login, d);
-
-						d->SetMatrixCode(szMatrixCode);
-						sys_log(0, "QID_AUTH_LOGIN_OPENID: SUCCESS %s", pinfo->login);
-					}
-				}
-			}
-			break;
-
-		case QID_SAFEBOX_SIZE:
-			{
-				LPCHARACTER ch = CHARACTER_MANAGER::instance().FindByPID(qi->dwIdent);
-
-				if (ch)
-				{
-					if (pMsg->Get()->uiNumRows > 0)
-					{
-						MYSQL_ROW row = mysql_fetch_row(pMsg->Get()->pSQLResult);
-						int	size = 0;
-						str_to_number(size, row[0]);
-						ch->SetSafeboxSize(SAFEBOX_PAGE_SIZE * size);
-					}
-				}
-			}
-			break;
-
-		case QID_DB_STRING:
-			{
-				m_map_dbstring.clear();
-				m_vec_GreetMessage.clear();
-
-				for (uint i = 0; i < pMsg->Get()->uiNumRows; ++i)
-				{
-					MYSQL_ROW row = mysql_fetch_row(pMsg->Get()->pSQLResult);
-					//ch->SetSafeboxSize(SAFEBOX_PAGE_SIZE * atoi(row[0]));
-					if (row[0] && row[1])
-					{
-						m_map_dbstring.insert(make_pair(std::string(row[0]), std::string(row[1])));
-						sys_log(0, "DBSTR '%s' '%s'", row[0], row[1]);
-					}
-				}
-				if (m_map_dbstring.find("GREET") != m_map_dbstring.end())
-				{
-					std::istringstream is(m_map_dbstring["GREET"]);
-					while (!is.eof())
-					{
-						std::string str;
-						getline(is, str);
-						m_vec_GreetMessage.push_back(str);
-					}
-				}
-			}
-			break;
-
-		case QID_LOTTO:
-			{
-				LPCHARACTER ch = CHARACTER_MANAGER::instance().FindByPID(qi->dwIdent);
-				DWORD * pdw = (DWORD *) qi->pvData;
-
-				if (ch)
-				{
-					if (pMsg->Get()->uiAffectedRows == 0 || pMsg->Get()->uiAffectedRows == (uint32_t)-1)
-					{
-						sys_log(0, "GIVE LOTTO FAIL TO pid %u", ch->GetPlayerID());
-					}
-					else
-					{
-						LPITEM pkItem = ch->AutoGiveItem(pdw[0], pdw[1]);
-
-						if (pkItem)
-						{
-							sys_log(0, "GIVE LOTTO SUCCESS TO %s (pid %u)", ch->GetName(), qi->dwIdent);
-							//ch->ChatPacket(CHAT_TYPE_INFO, LC_TEXT("占쏙옙占쏙옙占쏙옙 획占쏙옙: %s"), pkItem->GetName());
-
-							pkItem->SetSocket(0, pMsg->Get()->uiInsertID);
-							pkItem->SetSocket(1, pdw[2]);
-						}
-						else
-							sys_log(0, "GIVE LOTTO FAIL2 TO pid %u", ch->GetPlayerID());
-					}
-				}
-
-				M2_DELETE_ARRAY(pdw);
-			}
-			break;
-
-			// BLOCK_CHAT
-		case QID_BLOCK_CHAT_LIST:
-			{
-				LPCHARACTER ch = CHARACTER_MANAGER::instance().FindByPID(qi->dwIdent);
-				
-				if (ch == NULL)
-					break;
-				if (pMsg->Get()->uiNumRows)
-				{
-					MYSQL_ROW row;
-					while ((row = mysql_fetch_row(pMsg->Get()->pSQLResult)))
-					{
-						ch->ChatPacket(CHAT_TYPE_INFO, "%s %s sec", row[0], row[1]);
-					}
-				}
-				else
-				{
-					ch->ChatPacket(CHAT_TYPE_INFO, "No one currently blocked.");
-				}
-			}
-			break;
-			// END_OF_BLOCK_CHAT
-
-			// PCBANG_IP_LIST
-		case QID_PCBANG_IP_LIST_CHECK:
-			{
-				const std::string PCBANG_IP_TABLE_NAME("pcbang_ip");
-
-				if (pMsg->Get()->uiNumRows > 0)
-				{
-					MYSQL_ROW row;
-					bool isFinded = false;
-
-					while ((row = mysql_fetch_row(pMsg->Get()->pSQLResult)))
-					{
-						const char* c_szName = row[0];
-						const char* c_szUpdateTime = row[12];
-
-						if (test_server)
-							sys_log(0, "%s:%s", c_szName, c_szUpdateTime);
-
-						if (PCBANG_IP_TABLE_NAME == c_szName)
-						{
-							isFinded = true;
-
-							static std::string s_stLastTime;
-							if (s_stLastTime != c_szUpdateTime)
-							{
-								s_stLastTime = c_szUpdateTime;
-								sys_log(0, "'%s' mysql table is UPDATED(%s)", PCBANG_IP_TABLE_NAME.c_str(), c_szUpdateTime);
-								ReturnQuery(QID_PCBANG_IP_LIST_SELECT, 0, NULL, "SELECT pcbang_id, ip FROM %s;", PCBANG_IP_TABLE_NAME.c_str());
-							}
-							else
-							{
-								sys_log(0, "'%s' mysql table is NOT updated(%s)", PCBANG_IP_TABLE_NAME.c_str(), c_szUpdateTime);
-							}
-							break;
-						}
-					}
-
-					if (!isFinded)
-					{
-						sys_err(0, "'%s' mysql table CANNOT FIND", PCBANG_IP_TABLE_NAME.c_str());
-					}
-				}
-				else if (test_server)
-				{
-					sys_err(0, "'%s' mysql table is NOT EXIST", PCBANG_IP_TABLE_NAME.c_str());
-				}
-			}
-			break;
-
-		case QID_PCBANG_IP_LIST_SELECT:
-			{
-				if (pMsg->Get()->uiNumRows > 0)
-				{
-					MYSQL_ROW row;
-
-					while ((row = mysql_fetch_row(pMsg->Get()->pSQLResult)))
-					{
-						CPCBangManager::instance().InsertIP(row[0], row[1]);
-					}
-				}
-				else if (test_server)
-				{
-					sys_log(0, "PCBANG_IP_LIST is EMPTY");
-				}
-			}
-			break;
-
-
-			// END_OF_PCBANG_IP_LIST
-
-		case QID_BRAZIL_CREATE_ID :
-			{
-				TPacketCGLogin3 * pinfo = (TPacketCGLogin3 *) qi->pvData ;
-
-				if( pMsg->Get()->uiAffectedRows == 0 || pMsg->Get()->uiAffectedRows == (uint32_t)-1 )
-				{
-					LPDESC d = DESC_MANAGER::instance().FindByLoginKey(qi->dwIdent) ;
-					sys_log(0, "[AUTH_BRAZIL]   NOID") ;
-					sys_log(0, "[AUTH_BRAZIL] : Failed to create a new account %s", pinfo->login) ;
-					LoginFailure(d, "NOID") ;
-					M2_DELETE(pinfo);
-				}
-				else
-				{
-					sys_log(0, "[AUTH_BRAZIL] : Succeed to create a new account %s", pinfo->login) ;
-
-					ReturnQuery(QID_AUTH_LOGIN, qi->dwIdent, pinfo,
-							"SELECT PASSWORD('%s'),password,securitycode,social_id,id,status,availDt - NOW() > 0,"
-							"UNIX_TIMESTAMP(silver_expire),"
-							"UNIX_TIMESTAMP(gold_expire),"
-							"UNIX_TIMESTAMP(safebox_expire),"
-							"UNIX_TIMESTAMP(autoloot_expire),"
-							"UNIX_TIMESTAMP(fish_mind_expire),"
-							"UNIX_TIMESTAMP(marriage_fast_expire),"
-							"UNIX_TIMESTAMP(money_drop_rate_expire),"
-							"UNIX_TIMESTAMP(create_time)"
-							" FROM account WHERE login='%s'",
-							pinfo->passwd, pinfo->login) ;
-				}
-			}
-			break;
-		case QID_JAPAN_CREATE_ID :
-			{
-				TPacketCGLogin3 * pinfo = (TPacketCGLogin3 *) qi->pvData ;
-
-				if( pMsg->Get()->uiAffectedRows == 0 || pMsg->Get()->uiAffectedRows == (uint32_t)-1 )
-				{
-					LPDESC d = DESC_MANAGER::instance().FindByLoginKey(qi->dwIdent) ;
-					sys_log(0, "[AUTH_JAPAN]   NOID") ;
-					sys_log(0, "[AUTH_JAPAN] : Failed to create a new account %s", pinfo->login) ;
-					LoginFailure(d, "NOID") ;
-					M2_DELETE(pinfo);
-				}
-				else
-				{
-					sys_log(0, "[AUTH_JAPAN] : Succeed to create a new account %s", pinfo->login) ;
-
-					ReturnQuery(QID_AUTH_LOGIN_OPENID, qi->dwIdent, pinfo,
-							"SELECT PASSWORD('%s'),password,securitycode,social_id,id,status,availDt - NOW() > 0,"
-							"UNIX_TIMESTAMP(silver_expire),"
-							"UNIX_TIMESTAMP(gold_expire),"
-							"UNIX_TIMESTAMP(safebox_expire),"
-							"UNIX_TIMESTAMP(autoloot_expire),"
-							"UNIX_TIMESTAMP(fish_mind_expire),"
-							"UNIX_TIMESTAMP(marriage_fast_expire),"
-							"UNIX_TIMESTAMP(money_drop_rate_expire),"
-							"UNIX_TIMESTAMP(create_time)"
-							" FROM account WHERE login='%s'",
-							pinfo->passwd, pinfo->login) ;
-				}
-			}
-			break;
-
-		default:
-			sys_err("FATAL ERROR!!! Unhandled return query id %d", qi->iType);
-			break;
-	}
-
-	M2_DELETE(qi);
-}
-
-void DBManager::LoadDBString()
-{
-	ReturnQuery(QID_DB_STRING, 0, NULL, "SELECT name, text FROM string%s", get_table_postfix());
-}
-
-const std::string& DBManager::GetDBString(const std::string& key)
-{
-	static std::string null_str = "";
-	itertype(m_map_dbstring) it = m_map_dbstring.find(key);
-	if (it == m_map_dbstring.end())
-		return null_str;
-	return it->second;
-}
-
-const std::vector<std::string>& DBManager::GetGreetMessage()
-{
-	return m_vec_GreetMessage;
-}
-
-void DBManager::SendMoneyLog(BYTE type, DWORD vnum, int gold)
-{
-	if (!gold)
-		return;
-	TPacketMoneyLog p;
-	p.type = type;
-	p.vnum = vnum;
-	p.gold = gold;
-	db_clientdesc->DBPacket(HEADER_GD_MONEY_LOG, 0, &p, sizeof(p));
-}
-
-void VCardUse(LPCHARACTER CardOwner, LPCHARACTER CardTaker, LPITEM item)
-{
-	TPacketGDVCard p;
-
-	p.dwID = item->GetSocket(0);
-	strlcpy(p.szSellCharacter, CardOwner->GetName(), sizeof(p.szSellCharacter));
-	strlcpy(p.szSellAccount, CardOwner->GetDesc()->GetAccountTable().login, sizeof(p.szSellAccount));
-	strlcpy(p.szBuyCharacter, CardTaker->GetName(), sizeof(p.szBuyCharacter));
-	strlcpy(p.szBuyAccount, CardTaker->GetDesc()->GetAccountTable().login, sizeof(p.szBuyAccount));
-
-	db_clientdesc->DBPacket(HEADER_GD_VCARD, 0, &p, sizeof(TPacketGDVCard));
-
-	CardTaker->ChatPacket(CHAT_TYPE_INFO, LC_TEXT("%d占쏙옙占쏙옙 占쏙옙占쏙옙占시곤옙占쏙옙 占쌩곤옙 占실억옙占쏙옙占싹댐옙. (占쏙옙占쏙옙占쏙옙호 %d)"), item->GetSocket(1) / 60, item->GetSocket(0));
-
-	LogManager::instance().VCardLog(p.dwID, CardTaker->GetX(), CardTaker->GetY(), g_stHostname.c_str(),
-			CardOwner->GetName(), CardOwner->GetDesc()->GetHostName(),
-			CardTaker->GetName(), CardTaker->GetDesc()->GetHostName());
-
-	ITEM_MANAGER::instance().RemoveItem(item);
-
-	sys_log(0, "VCARD_TAKE: %u %s -> %s", p.dwID, CardOwner->GetName(), CardTaker->GetName());
-}
-
-void DBManager::RequestBlockException(const char *login, int cmd)
-{
-	TPacketBlockException packet;
-
-	packet.cmd = cmd;
-	strlcpy(packet.login, login, sizeof(packet.login));
-	db_clientdesc->DBPacket(HEADER_GD_BLOCK_EXCEPTION, 0, &packet, sizeof(packet));
-}
-
-size_t DBManager::EscapeString(char* dst, size_t dstSize, const char *src, size_t srcSize)
-{
-	return m_sql_direct.EscapeString(dst, dstSize, src, srcSize);
-}
-
-//
-// Common SQL 
-//
-AccountDB::AccountDB() :
-	m_IsConnect(false)
-{
-}
-
-bool AccountDB::IsConnected()
-{
-	return m_IsConnect;
-}
-
-bool AccountDB::Connect(const char * host, const int port, const char * user, const char * pwd, const char * db)
-{
-	m_IsConnect = m_sql_direct.Setup(host, user, pwd, db, "", true, port);
-
-	if (false == m_IsConnect)
-	{
-		fprintf(stderr, "cannot open direct sql connection to host: %s user: %s db: %s\n", host, user, db);
-		return false;
-	}
-
-	return m_IsConnect;
-}
-
-bool AccountDB::ConnectAsync(const char * host, const int port, const char * user, const char * pwd, const char * db, const char * locale)
-{
-	m_sql.Setup(host, user, pwd, db, locale, false, port);
-	return true;
-}
-
-void AccountDB::SetLocale(const std::string & stLocale)
-{
-	m_sql_direct.SetLocale(stLocale);
-	m_sql_direct.QueryLocaleSet();
-}
-
-SQLMsg* AccountDB::DirectQuery(const char * query)
-{
-	return m_sql_direct.DirectQuery(query);
-}
-
-void AccountDB::AsyncQuery(const char* query)
-{
-	m_sql.AsyncQuery(query);
-}
-
-void AccountDB::ReturnQuery(int iType, DWORD dwIdent, void * pvData, const char * c_pszFormat, ...)
-{
-	char szQuery[4096];
-	va_list args;
-
-	va_start(args, c_pszFormat);
-	vsnprintf(szQuery, sizeof(szQuery), c_pszFormat, args);
-	va_end(args);
-
-	CReturnQueryInfo * p = M2_NEW CReturnQueryInfo;
-
-	p->iQueryType = QUERY_TYPE_RETURN;
-	p->iType = iType;
-	p->dwIdent = dwIdent;
-	p->pvData = pvData;
-
-	m_sql.ReturnQuery(szQuery, p);
-}
-
-SQLMsg * AccountDB::PopResult()
-{
-	SQLMsg * p;
-
-	if (m_sql.PopResult(&p))
-		return p;
-
-	return NULL;
-}
-
-void AccountDB::Process()
-{
-	SQLMsg* pMsg = NULL;
-
-	while ((pMsg = PopResult()))
-	{
-		CQueryInfo* qi = (CQueryInfo *) pMsg->pvUserData;
-
-		switch (qi->iQueryType)
-		{
-			case QUERY_TYPE_RETURN:
-				AnalyzeReturnQuery(pMsg);
-				break;
-		}
-	}
-
-	delete pMsg;
-}
-
-extern unsigned int g_uiSpamReloadCycle;
-
-enum EAccountQID
-{
-	QID_SPAM_DB,
-};
-
-// 10占싻몌옙占쏙옙 占쏙옙占싸듸옙
-static LPEVENT s_pkReloadSpamEvent = NULL;
-
-EVENTINFO(reload_spam_event_info)
-{
-	// used to send command
-	DWORD empty;
-};
-
-EVENTFUNC(reload_spam_event)
-{
-	AccountDB::instance().ReturnQuery(QID_SPAM_DB, 0, NULL, "SELECT word, score FROM spam_db WHERE type='SPAM'");
-	return PASSES_PER_SEC(g_uiSpamReloadCycle);
-}
-
-void LoadSpamDB()
-{
-	AccountDB::instance().ReturnQuery(QID_SPAM_DB, 0, NULL, "SELECT word, score FROM spam_db WHERE type='SPAM'");
-
-	if (NULL == s_pkReloadSpamEvent)
-	{
-		reload_spam_event_info* info = AllocEventInfo<reload_spam_event_info>();
-		s_pkReloadSpamEvent = event_create(reload_spam_event, info, PASSES_PER_SEC(g_uiSpamReloadCycle));
-	}
-}
-
-void CancelReloadSpamEvent() {
-	s_pkReloadSpamEvent = NULL;
-}
-
-void AccountDB::AnalyzeReturnQuery(SQLMsg * pMsg)
-{
-	CReturnQueryInfo * qi = (CReturnQueryInfo *) pMsg->pvUserData;
-
-	switch (qi->iType)
-	{
-		case QID_SPAM_DB:
-			{
-				if (pMsg->Get()->uiNumRows > 0)
-				{
-					MYSQL_ROW row;
-
-					SpamManager::instance().Clear();
-
-					while ((row = mysql_fetch_row(pMsg->Get()->pSQLResult)))
-						SpamManager::instance().Insert(row[0], atoi(row[1]));
-				}
-			}
-			break;
-	}
-
-	M2_DELETE(qi);
-}
+#include "stdafx.h"
+#include <sstream>
+#include "../../common/length.h"
+
+#include "db.h"
+
+#include "config.h"
+#include "desc_client.h"
+#include "desc_manager.h"
+#include "char.h"
+#include "char_manager.h"
+#include "item.h"
+#include "item_manager.h"
+#include "p2p.h"
+#include "log.h"
+#include "login_data.h"
+#include "locale_service.h"
+#include "pcbang.h"
+#include "spam.h"
+#include "auth_brazil.h"
+
+extern std::string g_stBlockDate;
+extern int openid_server;
+
+
+DBManager::DBManager() : m_bIsConnect(false)
+{
+}
+
+DBManager::~DBManager()
+{
+}
+
+bool DBManager::Connect(const char * host, const int port, const char * user, const char * pwd, const char * db)
+{
+	if (m_sql.Setup(host, user, pwd, db, g_stLocale.c_str(), false, port))
+		m_bIsConnect = true;
+
+	if (!m_sql_direct.Setup(host, user, pwd, db, g_stLocale.c_str(), true, port))
+		sys_err("cannot open direct sql connection to host %s", host);
+
+	if (m_bIsConnect && !g_bAuthServer)
+	{
+		LoadDBString();
+	}
+
+	return m_bIsConnect;
+}
+
+void DBManager::Query(const char * c_pszFormat, ...)
+{
+	char szQuery[4096];
+	va_list args;
+
+	va_start(args, c_pszFormat);
+	vsnprintf(szQuery, sizeof(szQuery), c_pszFormat, args);
+	va_end(args);
+
+	m_sql.AsyncQuery(szQuery);
+}
+
+SQLMsg * DBManager::DirectQuery(const char * c_pszFormat, ...)
+{
+	char szQuery[4096];
+	va_list args;
+
+	va_start(args, c_pszFormat);
+	vsnprintf(szQuery, sizeof(szQuery), c_pszFormat, args);
+	va_end(args);
+
+	return m_sql_direct.DirectQuery(szQuery);
+}
+
+bool DBManager::IsConnected()
+{
+	return m_bIsConnect;
+}
+
+void DBManager::ReturnQuery(int iType, DWORD dwIdent, void * pvData, const char * c_pszFormat, ...)
+{
+	//sys_log(0, "ReturnQuery %s", c_pszQuery);
+	char szQuery[4096];
+	va_list args;
+
+	va_start(args, c_pszFormat);
+	vsnprintf(szQuery, sizeof(szQuery), c_pszFormat, args);
+	va_end(args);
+
+	CReturnQueryInfo * p = M2_NEW CReturnQueryInfo;
+
+	p->iQueryType = QUERY_TYPE_RETURN;
+	p->iType = iType;
+	p->dwIdent = dwIdent;
+	p->pvData = pvData;
+
+	m_sql.ReturnQuery(szQuery, p);
+}
+
+SQLMsg * DBManager::PopResult()
+{
+	SQLMsg * p;
+
+	if (m_sql.PopResult(&p))
+		return p;
+
+	return NULL;
+}
+
+void DBManager::Process()
+{
+	SQLMsg* pMsg = NULL;
+
+	while ((pMsg = PopResult()))
+	{
+		if( NULL != pMsg->pvUserData )
+		{
+			switch( reinterpret_cast<CQueryInfo*>(pMsg->pvUserData)->iQueryType )
+			{
+				case QUERY_TYPE_RETURN:
+					AnalyzeReturnQuery(pMsg);
+					break;
+
+				case QUERY_TYPE_FUNCTION:
+					{
+						CFuncQueryInfo* qi = reinterpret_cast<CFuncQueryInfo*>( pMsg->pvUserData );
+						qi->f(pMsg);
+						M2_DELETE(qi);
+					}
+					break;
+
+				case QUERY_TYPE_AFTER_FUNCTION:
+					{
+						CFuncAfterQueryInfo* qi = reinterpret_cast<CFuncAfterQueryInfo*>( pMsg->pvUserData );
+						qi->f();
+						M2_DELETE(qi);
+					}
+					break;
+			}
+		}
+
+		delete pMsg;
+	}
+}
+
+CLoginData * DBManager::GetLoginData(DWORD dwKey)
+{
+	std::map<DWORD, CLoginData *>::iterator it = m_map_pkLoginData.find(dwKey);
+
+	if (it == m_map_pkLoginData.end())
+		return NULL;
+
+	return it->second;
+}
+
+void DBManager::InsertLoginData(CLoginData * pkLD)
+{
+	m_map_pkLoginData.insert(std::make_pair(pkLD->GetKey(), pkLD));
+}
+
+void DBManager::DeleteLoginData(CLoginData * pkLD)
+{
+	std::map<DWORD, CLoginData *>::iterator it = m_map_pkLoginData.find(pkLD->GetKey());
+
+	if (it == m_map_pkLoginData.end())
+		return;
+
+	sys_log(0, "DeleteLoginData %s %p", pkLD->GetLogin(), pkLD);
+
+	M2_DELETE(it->second);
+	m_map_pkLoginData.erase(it);
+}
+
+void DBManager::SendLoginPing(const char * c_pszLogin)
+{
+	TPacketGGLoginPing ptog;
+
+	ptog.bHeader = HEADER_GG_LOGIN_PING;
+	strlcpy(ptog.szLogin, c_pszLogin, sizeof(ptog.szLogin));
+
+	if (!g_pkAuthMasterDesc)  // If I am master, broadcast to others
+	{
+		P2P_MANAGER::instance().Send(&ptog, sizeof(TPacketGGLoginPing));
+	}
+	else // If I am slave send login ping to master
+	{
+		g_pkAuthMasterDesc->Packet(&ptog, sizeof(TPacketGGLoginPing));
+	}
+}
+
+void DBManager::SendAuthLogin(LPDESC d)
+{
+	const TAccountTable & r = d->GetAccountTable();
+
+	CLoginData * pkLD = GetLoginData(d->GetLoginKey());
+
+	if (!pkLD)
+		return;
+
+	TPacketGDAuthLogin ptod;
+	ptod.dwID = r.id;
+	
+	trim_and_lower(r.login, ptod.szLogin, sizeof(ptod.szLogin));
+	strlcpy(ptod.szSocialID, r.social_id, sizeof(ptod.szSocialID));
+	ptod.dwLoginKey = d->GetLoginKey();
+
+	thecore_memcpy(ptod.iPremiumTimes, pkLD->GetPremiumPtr(), sizeof(ptod.iPremiumTimes));
+	thecore_memcpy(&ptod.adwClientKey, pkLD->GetClientKey(), sizeof(DWORD) * 4);
+
+	db_clientdesc->DBPacket(HEADER_GD_AUTH_LOGIN, d->GetHandle(), &ptod, sizeof(TPacketGDAuthLogin));
+	sys_log(0, "SendAuthLogin %s key %u", ptod.szLogin, ptod.dwID);
+
+	SendLoginPing(r.login);
+}
+
+void DBManager::LoginPrepare(BYTE bBillType, DWORD dwBillID, long lRemainSecs, LPDESC d, DWORD * pdwClientKey, int * paiPremiumTimes)
+{
+	const TAccountTable & r = d->GetAccountTable();
+
+	CLoginData * pkLD = M2_NEW CLoginData;
+
+	pkLD->SetKey(d->GetLoginKey());
+	pkLD->SetLogin(r.login);
+	pkLD->SetIP(d->GetHostName());
+	pkLD->SetClientKey(pdwClientKey);
+
+	if (paiPremiumTimes)
+		pkLD->SetPremium(paiPremiumTimes);
+
+	InsertLoginData(pkLD);
+
+	SendAuthLogin(d);
+}
+
+
+void DBManager::AnalyzeReturnQuery(SQLMsg * pMsg)
+{
+	CReturnQueryInfo * qi = (CReturnQueryInfo *) pMsg->pvUserData;
+
+	switch (qi->iType)
+	{
+		case QID_AUTH_LOGIN:
+			{
+				TPacketCGLogin3 * pinfo = (TPacketCGLogin3 *) qi->pvData;
+				LPDESC d = DESC_MANAGER::instance().FindByLoginKey(qi->dwIdent);
+
+				if (!d)
+				{
+					M2_DELETE(pinfo);
+					break;
+				}
+				//占쏙옙치 占쏙옙占쏙옙 - By SeMinZ
+				d->SetLogin(pinfo->login);
+
+				sys_log(0, "QID_AUTH_LOGIN: START %u %p", qi->dwIdent, get_pointer(d));
+
+				if (pMsg->Get()->uiNumRows == 0)
+				{
+					if (true == LC_IsBrazil())
+					{
+						// 占쏙옙占쏙옙占쏙옙 占쏙옙占쏙옙占쏙옙 占쏙옙占쏙옙 占쏙옙占쏙옙占쏙옙 占싼댐옙
+						ReturnQuery(QID_BRAZIL_CREATE_ID, qi->dwIdent, pinfo,
+								"INSERT INTO account(login, password, social_id, create_time) "
+								"VALUES('%s', password('%s'), '0000000', NOW()) ;",
+								pinfo->login, pinfo->passwd);
+
+						sys_log(0, "[AUTH_BRAZIL] : Create A new AccountID From OnGame");
+					}
+					else
+					{
+						sys_log(0, "   NOID");
+						LoginFailure(d, "NOID");
+						M2_DELETE(pinfo);
+					}
+				}
+				else
+				{
+					MYSQL_ROW row = mysql_fetch_row(pMsg->Get()->pSQLResult);
+					int col = 0;
+
+					// PASSWORD('%s'), password, securitycode, social_id, id, status
+					char szEncrytPassword[45 + 1];
+					char szPassword[45 + 1];
+						char szSocialID[SOCIAL_ID_MAX_LEN + 1];
+					char szStatus[ACCOUNT_STATUS_MAX_LEN + 1];
+					DWORD dwID = 0;
+
+					if (!row[col])
+				{
+					col++;
+				}
+				else
+				{
+					col++;
+				}
+					
+					strlcpy(szEncrytPassword, row[col++], sizeof(szEncrytPassword));
+
+					if (!row[col])
+				{
+					col++;
+				}
+				else
+				{
+					col++;
+				}
+					else
+					{
+					}
+
+					if (!row[col])
+				{
+					col++;
+				}
+				else
+				{
+					col++;
+				}
+					else
+					{
+						str_to_number(aiPremiumTimes[PREMIUM_EXP], row[col++]);
+						str_to_number(aiPremiumTimes[PREMIUM_ITEM], row[col++]);
+						str_to_number(aiPremiumTimes[PREMIUM_SAFEBOX], row[col++]);
+						str_to_number(aiPremiumTimes[PREMIUM_AUTOLOOT], row[col++]);
+						str_to_number(aiPremiumTimes[PREMIUM_FISH_MIND], row[col++]);
+						str_to_number(aiPremiumTimes[PREMIUM_MARRIAGE_FAST], row[col++]);
+						str_to_number(aiPremiumTimes[PREMIUM_GOLD], row[col++]);
+
+						if (LC_IsEurope() || test_server)
+						{
+							long retValue = 0;
+							str_to_number(retValue, row[col]);
+
+							time_t create_time = retValue;
+							struct tm * tm1;
+							tm1 = localtime(&create_time);
+							strftime(szCreateDate, 255, "%Y%m%d", tm1);
+
+							sys_log(0, "Create_Time %d %s", retValue, szCreateDate);
+							sys_log(0, "Block Time %d ", strncmp(szCreateDate, g_stBlockDate.c_str(), 8));
+						}
+					}
+
+					int nPasswordDiff = strcmp(szEncrytPassword, szPassword);
+
+					if (true == LC_IsBrazil())
+					{
+						nPasswordDiff = 0; // 占쏙옙占쏙옙占 占쏙옙占쏙옙占쏙옙占쏙옙占쏙옙 占쏙옙橘占싫 체크占쏙옙 占쏙옙占쏙옙 占십는댐옙.
+					}
+
+					if (nPasswordDiff)
+					{
+						LoginFailure(d, "WRONGPWD");
+						sys_log(0, "   WRONGPWD");
+						M2_DELETE(pinfo);
+					}
+					else if (bNotAvail)
+					{
+						LoginFailure(d, "NOTAVAIL");
+						sys_log(0, "   NOTAVAIL");
+						M2_DELETE(pinfo);
+					}
+					else if (DESC_MANAGER::instance().FindByLoginName(pinfo->login))
+					{
+						LoginFailure(d, "ALREADY");
+						sys_log(0, "   ALREADY");
+						M2_DELETE(pinfo);
+					}
+					else if (strcmp(szStatus, "OK"))
+					{
+						LoginFailure(d, szStatus);
+						sys_log(0, "   STATUS: %s", szStatus);
+						M2_DELETE(pinfo);
+					}
+					else
+					{
+						if (LC_IsEurope())
+						{
+							//stBlockData >= 0 == 占쏙옙짜占쏙옙 BlockDate 占쏙옙占쏙옙 占싱뤄옙 
+							if (strncmp(szCreateDate, g_stBlockDate.c_str(), 8) >= 0)
+							{
+								LoginFailure(d, "BLKLOGIN");
+								sys_log(0, "   BLKLOGIN");
+								M2_DELETE(pinfo);
+								break;
+							}
+
+							char szQuery[1024];
+							snprintf(szQuery, sizeof(szQuery), "UPDATE account SET last_play=NOW() WHERE id=%u", dwID);
+							std::unique_ptr<SQLMsg> msg( DBManager::instance().DirectQuery(szQuery) );
+						}
+
+						TAccountTable & r = d->GetAccountTable();
+
+						r.id = dwID;
+						trim_and_lower(pinfo->login, r.login, sizeof(r.login));
+						strlcpy(r.passwd, pinfo->passwd, sizeof(r.passwd));
+						strlcpy(r.social_id, szSocialID, sizeof(r.social_id));
+						DESC_MANAGER::instance().ConnectAccount(r.login, d);
+
+
+						sys_log(0, "QID_AUTH_LOGIN: SUCCESS %s", pinfo->login);
+
+						LoginPrepare(0, 0, 0, d, pinfo->adwClientKey, aiPremiumTimes);
+						M2_DELETE(pinfo);
+					}
+				}
+			}
+			break;
+
+		case QID_AUTH_LOGIN_OPENID:
+			{
+				TPacketCGLogin3 * pinfo = (TPacketCGLogin3 *) qi->pvData;
+				LPDESC d = DESC_MANAGER::instance().FindByLoginKey(qi->dwIdent);
+
+				if (!d)
+				{
+					M2_DELETE(pinfo);
+					break;
+				}
+				//占쏙옙치 占쏙옙占쏙옙 - By SeMinZ
+				d->SetLogin(pinfo->login);
+
+				sys_log(0, "QID_AUTH_LOGIN_OPENID: START %u %p", qi->dwIdent, get_pointer(d));
+
+				if (pMsg->Get()->uiNumRows == 0)
+				{
+					if (true == LC_IsBrazil())
+					{
+						// 占쏙옙占쏙옙占쏙옙 占쏙옙占쏙옙占쏙옙 占쏙옙占쏙옙 占쏙옙占쏙옙占쏙옙 占싼댐옙
+						ReturnQuery(QID_BRAZIL_CREATE_ID, qi->dwIdent, pinfo,
+								"INSERT INTO account(login, password, social_id, create_time) "
+								"VALUES('%s', password('%s'), '0000000', NOW()) ;",
+								pinfo->login, pinfo->passwd);
+
+						sys_log(0, "[AUTH_BRAZIL] : Create A new AccountID From OnGame");
+					} else if (true == LC_IsJapan())
+					{
+						// 占쏙옙占쏙옙占쏙옙 占쏙옙占쏙옙占쏙옙 占쏙옙占쏙옙 占쏙옙占쏙옙占쏙옙 占싼댐옙
+						ReturnQuery(QID_JAPAN_CREATE_ID, qi->dwIdent, pinfo,
+								"INSERT INTO account(login, password, social_id, create_time) "
+								"VALUES('%s', password('%s'), '0000000', NOW()) ;",
+								pinfo->login, "^Aasl@(!$)djl!231fj!&#");
+
+						sys_log(0, "[AUTH_JAPAN] : Create A new AccountID From OGE");
+					}
+					else
+					{
+						sys_log(0, "   NOID");
+						LoginFailure(d, "NOID");
+						M2_DELETE(pinfo);
+					}
+				}
+				else
+				{
+					MYSQL_ROW row = mysql_fetch_row(pMsg->Get()->pSQLResult);
+					int col = 0;
+
+					// PASSWORD('%s'), password, securitycode, social_id, id, status
+					char szEncrytPassword[45 + 1];
+					char szPassword[45 + 1];
+						char szSocialID[SOCIAL_ID_MAX_LEN + 1];
+					char szStatus[ACCOUNT_STATUS_MAX_LEN + 1];
+					DWORD dwID = 0;
+
+					if (!row[col])
+				{
+					col++;
+				}
+				else
+				{
+					col++;
+				}
+					
+					strlcpy(szEncrytPassword, row[col++], sizeof(szEncrytPassword));
+
+					if (!row[col])
+				{
+					col++;
+				}
+				else
+				{
+					col++;
+				}
+					else
+					{
+					}
+
+					if (!row[col])
+				{
+					col++;
+				}
+				else
+				{
+					col++;
+				}
+					else
+					{
+						str_to_number(aiPremiumTimes[PREMIUM_EXP], row[col++]);
+						str_to_number(aiPremiumTimes[PREMIUM_ITEM], row[col++]);
+						str_to_number(aiPremiumTimes[PREMIUM_SAFEBOX], row[col++]);
+						str_to_number(aiPremiumTimes[PREMIUM_AUTOLOOT], row[col++]);
+						str_to_number(aiPremiumTimes[PREMIUM_FISH_MIND], row[col++]);
+						str_to_number(aiPremiumTimes[PREMIUM_MARRIAGE_FAST], row[col++]);
+						str_to_number(aiPremiumTimes[PREMIUM_GOLD], row[col++]);
+
+						if (LC_IsEurope() || test_server)
+						{
+							long retValue = 0;
+							str_to_number(retValue, row[col]);
+
+							time_t create_time = retValue;
+							struct tm * tm1;
+							tm1 = localtime(&create_time);
+							strftime(szCreateDate, 255, "%Y%m%d", tm1);
+
+							sys_log(0, "Create_Time %d %s", retValue, szCreateDate);
+							sys_log(0, "Block Time %d ", strncmp(szCreateDate, g_stBlockDate.c_str(), 8));
+						}
+					}
+
+					int nPasswordDiff = strcmp(szEncrytPassword, szPassword);
+
+					if (true == LC_IsBrazil())
+					{
+						nPasswordDiff = 0; // 占쏙옙占쏙옙占 占쏙옙占쏙옙占쏙옙占쏙옙占쏙옙 占쏙옙橘占싫 체크占쏙옙 占쏙옙占쏙옙 占십는댐옙.
+					}
+
+					//OpenID : OpenID 占쏙옙 占쏙옙占, 占쏙옙橘占싫 체크占쏙옙 占쏙옙占쏙옙 占십는댐옙.
+					if (openid_server)
+					{
+						nPasswordDiff = 0;
+					}
+
+					if (nPasswordDiff)
+					{
+						LoginFailure(d, "WRONGPWD");
+						sys_log(0, "   WRONGPWD");
+						M2_DELETE(pinfo);
+					}
+					else if (bNotAvail)
+					{
+						LoginFailure(d, "NOTAVAIL");
+						sys_log(0, "   NOTAVAIL");
+						M2_DELETE(pinfo);
+					}
+					else if (DESC_MANAGER::instance().FindByLoginName(pinfo->login))
+					{
+						LoginFailure(d, "ALREADY");
+						sys_log(0, "   ALREADY");
+						M2_DELETE(pinfo);
+					}
+					else if (strcmp(szStatus, "OK"))
+					{
+						LoginFailure(d, szStatus);
+						sys_log(0, "   STATUS: %s", szStatus);
+						M2_DELETE(pinfo);
+					}
+					else
+					{
+						if (LC_IsEurope())
+						{
+							//stBlockData >= 0 == 占쏙옙짜占쏙옙 BlockDate 占쏙옙占쏙옙 占싱뤄옙 
+							if (strncmp(szCreateDate, g_stBlockDate.c_str(), 8) >= 0)
+							{
+								LoginFailure(d, "BLKLOGIN");
+								sys_log(0, "   BLKLOGIN");
+								M2_DELETE(pinfo);
+								break;
+							}
+
+							char szQuery[1024];
+							snprintf(szQuery, sizeof(szQuery), "UPDATE account SET last_play=NOW() WHERE id=%u", dwID);
+							std::unique_ptr<SQLMsg> msg( DBManager::instance().DirectQuery(szQuery) );
+						}
+
+						TAccountTable & r = d->GetAccountTable();
+
+						r.id = dwID;
+						trim_and_lower(pinfo->login, r.login, sizeof(r.login));
+						strlcpy(r.passwd, pinfo->passwd, sizeof(r.passwd));
+						strlcpy(r.social_id, szSocialID, sizeof(r.social_id));
+						DESC_MANAGER::instance().ConnectAccount(r.login, d);
+
+						sys_log(0, "QID_AUTH_LOGIN_OPENID: SUCCESS %s", pinfo->login);
+					}
+				}
+			}
+			break;
+
+		case QID_SAFEBOX_SIZE:
+			{
+				LPCHARACTER ch = CHARACTER_MANAGER::instance().FindByPID(qi->dwIdent);
+
+				if (ch)
+				{
+					if (pMsg->Get()->uiNumRows > 0)
+					{
+						MYSQL_ROW row = mysql_fetch_row(pMsg->Get()->pSQLResult);
+						int	size = 0;
+						str_to_number(size, row[0]);
+						ch->SetSafeboxSize(SAFEBOX_PAGE_SIZE * size);
+					}
+				}
+			}
+			break;
+
+		case QID_DB_STRING:
+			{
+				m_map_dbstring.clear();
+				m_vec_GreetMessage.clear();
+
+				for (uint i = 0; i < pMsg->Get()->uiNumRows; ++i)
+				{
+					MYSQL_ROW row = mysql_fetch_row(pMsg->Get()->pSQLResult);
+					//ch->SetSafeboxSize(SAFEBOX_PAGE_SIZE * atoi(row[0]));
+					if (row[0] && row[1])
+					{
+						m_map_dbstring.insert(make_pair(std::string(row[0]), std::string(row[1])));
+						sys_log(0, "DBSTR '%s' '%s'", row[0], row[1]);
+					}
+				}
+				if (m_map_dbstring.find("GREET") != m_map_dbstring.end())
+				{
+					std::istringstream is(m_map_dbstring["GREET"]);
+					while (!is.eof())
+					{
+						std::string str;
+						getline(is, str);
+						m_vec_GreetMessage.push_back(str);
+					}
+				}
+			}
+			break;
+
+		case QID_LOTTO:
+			{
+				LPCHARACTER ch = CHARACTER_MANAGER::instance().FindByPID(qi->dwIdent);
+				DWORD * pdw = (DWORD *) qi->pvData;
+
+				if (ch)
+				{
+					if (pMsg->Get()->uiAffectedRows == 0 || pMsg->Get()->uiAffectedRows == (uint32_t)-1)
+					{
+						sys_log(0, "GIVE LOTTO FAIL TO pid %u", ch->GetPlayerID());
+					}
+					else
+					{
+						LPITEM pkItem = ch->AutoGiveItem(pdw[0], pdw[1]);
+
+						if (pkItem)
+						{
+							sys_log(0, "GIVE LOTTO SUCCESS TO %s (pid %u)", ch->GetName(), qi->dwIdent);
+							//ch->ChatPacket(CHAT_TYPE_INFO, LC_TEXT("占쏙옙占쏙옙占쏙옙 획占쏙옙: %s"), pkItem->GetName());
+
+							pkItem->SetSocket(0, pMsg->Get()->uiInsertID);
+							pkItem->SetSocket(1, pdw[2]);
+						}
+						else
+							sys_log(0, "GIVE LOTTO FAIL2 TO pid %u", ch->GetPlayerID());
+					}
+				}
+
+				M2_DELETE_ARRAY(pdw);
+			}
+			break;
+
+			// BLOCK_CHAT
+		case QID_BLOCK_CHAT_LIST:
+			{
+				LPCHARACTER ch = CHARACTER_MANAGER::instance().FindByPID(qi->dwIdent);
+				
+				if (ch == NULL)
+					break;
+				if (pMsg->Get()->uiNumRows)
+				{
+					MYSQL_ROW row;
+					while ((row = mysql_fetch_row(pMsg->Get()->pSQLResult)))
+					{
+						ch->ChatPacket(CHAT_TYPE_INFO, "%s %s sec", row[0], row[1]);
+					}
+				}
+				else
+				{
+					ch->ChatPacket(CHAT_TYPE_INFO, "No one currently blocked.");
+				}
+			}
+			break;
+			// END_OF_BLOCK_CHAT
+
+			// PCBANG_IP_LIST
+		case QID_PCBANG_IP_LIST_CHECK:
+			{
+				const std::string PCBANG_IP_TABLE_NAME("pcbang_ip");
+
+				if (pMsg->Get()->uiNumRows > 0)
+				{
+					MYSQL_ROW row;
+					bool isFinded = false;
+
+					while ((row = mysql_fetch_row(pMsg->Get()->pSQLResult)))
+					{
+						const char* c_szName = row[0];
+						const char* c_szUpdateTime = row[12];
+
+						if (test_server)
+							sys_log(0, "%s:%s", c_szName, c_szUpdateTime);
+
+						if (PCBANG_IP_TABLE_NAME == c_szName)
+						{
+							isFinded = true;
+
+							static std::string s_stLastTime;
+							if (s_stLastTime != c_szUpdateTime)
+							{
+								s_stLastTime = c_szUpdateTime;
+								sys_log(0, "'%s' mysql table is UPDATED(%s)", PCBANG_IP_TABLE_NAME.c_str(), c_szUpdateTime);
+								ReturnQuery(QID_PCBANG_IP_LIST_SELECT, 0, NULL, "SELECT pcbang_id, ip FROM %s;", PCBANG_IP_TABLE_NAME.c_str());
+							}
+							else
+							{
+								sys_log(0, "'%s' mysql table is NOT updated(%s)", PCBANG_IP_TABLE_NAME.c_str(), c_szUpdateTime);
+							}
+							break;
+						}
+					}
+
+					if (!isFinded)
+					{
+						sys_err(0, "'%s' mysql table CANNOT FIND", PCBANG_IP_TABLE_NAME.c_str());
+					}
+				}
+				else if (test_server)
+				{
+					sys_err(0, "'%s' mysql table is NOT EXIST", PCBANG_IP_TABLE_NAME.c_str());
+				}
+			}
+			break;
+
+		case QID_PCBANG_IP_LIST_SELECT:
+			{
+				if (pMsg->Get()->uiNumRows > 0)
+				{
+					MYSQL_ROW row;
+
+					while ((row = mysql_fetch_row(pMsg->Get()->pSQLResult)))
+					{
+						CPCBangManager::instance().InsertIP(row[0], row[1]);
+					}
+				}
+				else if (test_server)
+				{
+					sys_log(0, "PCBANG_IP_LIST is EMPTY");
+				}
+			}
+			break;
+
+
+			// END_OF_PCBANG_IP_LIST
+
+		case QID_BRAZIL_CREATE_ID :
+			{
+				TPacketCGLogin3 * pinfo = (TPacketCGLogin3 *) qi->pvData ;
+
+				if( pMsg->Get()->uiAffectedRows == 0 || pMsg->Get()->uiAffectedRows == (uint32_t)-1 )
+				{
+					LPDESC d = DESC_MANAGER::instance().FindByLoginKey(qi->dwIdent) ;
+					sys_log(0, "[AUTH_BRAZIL]   NOID") ;
+					sys_log(0, "[AUTH_BRAZIL] : Failed to create a new account %s", pinfo->login) ;
+					LoginFailure(d, "NOID") ;
+					M2_DELETE(pinfo);
+				}
+				else
+				{
+					sys_log(0, "[AUTH_BRAZIL] : Succeed to create a new account %s", pinfo->login) ;
+
+					ReturnQuery(QID_AUTH_LOGIN, qi->dwIdent, pinfo,
+							"SELECT PASSWORD('%s'),password,securitycode,social_id,id,status,availDt - NOW() > 0,"
+							"UNIX_TIMESTAMP(silver_expire),"
+							"UNIX_TIMESTAMP(gold_expire),"
+							"UNIX_TIMESTAMP(safebox_expire),"
+							"UNIX_TIMESTAMP(autoloot_expire),"
+							"UNIX_TIMESTAMP(fish_mind_expire),"
+							"UNIX_TIMESTAMP(marriage_fast_expire),"
+							"UNIX_TIMESTAMP(money_drop_rate_expire),"
+							"UNIX_TIMESTAMP(create_time)"
+							" FROM account WHERE login='%s'",
+							pinfo->passwd, pinfo->login) ;
+				}
+			}
+			break;
+		case QID_JAPAN_CREATE_ID :
+			{
+				TPacketCGLogin3 * pinfo = (TPacketCGLogin3 *) qi->pvData ;
+
+				if( pMsg->Get()->uiAffectedRows == 0 || pMsg->Get()->uiAffectedRows == (uint32_t)-1 )
+				{
+					LPDESC d = DESC_MANAGER::instance().FindByLoginKey(qi->dwIdent) ;
+					sys_log(0, "[AUTH_JAPAN]   NOID") ;
+					sys_log(0, "[AUTH_JAPAN] : Failed to create a new account %s", pinfo->login) ;
+					LoginFailure(d, "NOID") ;
+					M2_DELETE(pinfo);
+				}
+				else
+				{
+					sys_log(0, "[AUTH_JAPAN] : Succeed to create a new account %s", pinfo->login) ;
+
+					ReturnQuery(QID_AUTH_LOGIN_OPENID, qi->dwIdent, pinfo,
+							"SELECT PASSWORD('%s'),password,securitycode,social_id,id,status,availDt - NOW() > 0,"
+							"UNIX_TIMESTAMP(silver_expire),"
+							"UNIX_TIMESTAMP(gold_expire),"
+							"UNIX_TIMESTAMP(safebox_expire),"
+							"UNIX_TIMESTAMP(autoloot_expire),"
+							"UNIX_TIMESTAMP(fish_mind_expire),"
+							"UNIX_TIMESTAMP(marriage_fast_expire),"
+							"UNIX_TIMESTAMP(money_drop_rate_expire),"
+							"UNIX_TIMESTAMP(create_time)"
+							" FROM account WHERE login='%s'",
+							pinfo->passwd, pinfo->login) ;
+				}
+			}
+			break;
+
+		default:
+			sys_err("FATAL ERROR!!! Unhandled return query id %d", qi->iType);
+			break;
+	}
+
+	M2_DELETE(qi);
+}
+
+void DBManager::LoadDBString()
+{
+	ReturnQuery(QID_DB_STRING, 0, NULL, "SELECT name, text FROM string%s", get_table_postfix());
+}
+
+const std::string& DBManager::GetDBString(const std::string& key)
+{
+	static std::string null_str = "";
+	itertype(m_map_dbstring) it = m_map_dbstring.find(key);
+	if (it == m_map_dbstring.end())
+		return null_str;
+	return it->second;
+}
+
+const std::vector<std::string>& DBManager::GetGreetMessage()
+{
+	return m_vec_GreetMessage;
+}
+
+void DBManager::SendMoneyLog(BYTE type, DWORD vnum, int gold)
+{
+	if (!gold)
+		return;
+	TPacketMoneyLog p;
+	p.type = type;
+	p.vnum = vnum;
+	p.gold = gold;
+	db_clientdesc->DBPacket(HEADER_GD_MONEY_LOG, 0, &p, sizeof(p));
+}
+
+void VCardUse(LPCHARACTER CardOwner, LPCHARACTER CardTaker, LPITEM item)
+{
+	TPacketGDVCard p;
+
+	p.dwID = item->GetSocket(0);
+	strlcpy(p.szSellCharacter, CardOwner->GetName(), sizeof(p.szSellCharacter));
+	strlcpy(p.szSellAccount, CardOwner->GetDesc()->GetAccountTable().login, sizeof(p.szSellAccount));
+	strlcpy(p.szBuyCharacter, CardTaker->GetName(), sizeof(p.szBuyCharacter));
+	strlcpy(p.szBuyAccount, CardTaker->GetDesc()->GetAccountTable().login, sizeof(p.szBuyAccount));
+
+	db_clientdesc->DBPacket(HEADER_GD_VCARD, 0, &p, sizeof(TPacketGDVCard));
+
+	CardTaker->ChatPacket(CHAT_TYPE_INFO, LC_TEXT("%d占쏙옙占쏙옙 占쏙옙占쏙옙占시곤옙占쏙옙 占쌩곤옙 占실억옙占쏙옙占싹댐옙. (占쏙옙占쏙옙占쏙옙호 %d)"), item->GetSocket(1) / 60, item->GetSocket(0));
+
+	LogManager::instance().VCardLog(p.dwID, CardTaker->GetX(), CardTaker->GetY(), g_stHostname.c_str(),
+			CardOwner->GetName(), CardOwner->GetDesc()->GetHostName(),
+			CardTaker->GetName(), CardTaker->GetDesc()->GetHostName());
+
+	ITEM_MANAGER::instance().RemoveItem(item);
+
+	sys_log(0, "VCARD_TAKE: %u %s -> %s", p.dwID, CardOwner->GetName(), CardTaker->GetName());
+}
+
+void DBManager::RequestBlockException(const char *login, int cmd)
+{
+	TPacketBlockException packet;
+
+	packet.cmd = cmd;
+	strlcpy(packet.login, login, sizeof(packet.login));
+	db_clientdesc->DBPacket(HEADER_GD_BLOCK_EXCEPTION, 0, &packet, sizeof(packet));
+}
+
+size_t DBManager::EscapeString(char* dst, size_t dstSize, const char *src, size_t srcSize)
+{
+	return m_sql_direct.EscapeString(dst, dstSize, src, srcSize);
+}
+
+//
+// Common SQL 
+//
+AccountDB::AccountDB() :
+	m_IsConnect(false)
+{
+}
+
+bool AccountDB::IsConnected()
+{
+	return m_IsConnect;
+}
+
+bool AccountDB::Connect(const char * host, const int port, const char * user, const char * pwd, const char * db)
+{
+	m_IsConnect = m_sql_direct.Setup(host, user, pwd, db, "", true, port);
+
+	if (false == m_IsConnect)
+	{
+		fprintf(stderr, "cannot open direct sql connection to host: %s user: %s db: %s\n", host, user, db);
+		return false;
+	}
+
+	return m_IsConnect;
+}
+
+bool AccountDB::ConnectAsync(const char * host, const int port, const char * user, const char * pwd, const char * db, const char * locale)
+{
+	m_sql.Setup(host, user, pwd, db, locale, false, port);
+	return true;
+}
+
+void AccountDB::SetLocale(const std::string & stLocale)
+{
+	m_sql_direct.SetLocale(stLocale);
+	m_sql_direct.QueryLocaleSet();
+}
+
+SQLMsg* AccountDB::DirectQuery(const char * query)
+{
+	return m_sql_direct.DirectQuery(query);
+}
+
+void AccountDB::AsyncQuery(const char* query)
+{
+	m_sql.AsyncQuery(query);
+}
+
+void AccountDB::ReturnQuery(int iType, DWORD dwIdent, void * pvData, const char * c_pszFormat, ...)
+{
+	char szQuery[4096];
+	va_list args;
+
+	va_start(args, c_pszFormat);
+	vsnprintf(szQuery, sizeof(szQuery), c_pszFormat, args);
+	va_end(args);
+
+	CReturnQueryInfo * p = M2_NEW CReturnQueryInfo;
+
+	p->iQueryType = QUERY_TYPE_RETURN;
+	p->iType = iType;
+	p->dwIdent = dwIdent;
+	p->pvData = pvData;
+
+	m_sql.ReturnQuery(szQuery, p);
+}
+
+SQLMsg * AccountDB::PopResult()
+{
+	SQLMsg * p;
+
+	if (m_sql.PopResult(&p))
+		return p;
+
+	return NULL;
+}
+
+void AccountDB::Process()
+{
+	SQLMsg* pMsg = NULL;
+
+	while ((pMsg = PopResult()))
+	{
+		CQueryInfo* qi = (CQueryInfo *) pMsg->pvUserData;
+
+		switch (qi->iQueryType)
+		{
+			case QUERY_TYPE_RETURN:
+				AnalyzeReturnQuery(pMsg);
+				break;
+		}
+	}
+
+	delete pMsg;
+}
+
+extern unsigned int g_uiSpamReloadCycle;
+
+enum EAccountQID
+{
+	QID_SPAM_DB,
+};
+
+// 10占싻몌옙占쏙옙 占쏙옙占싸듸옙
+static LPEVENT s_pkReloadSpamEvent = NULL;
+
+EVENTINFO(reload_spam_event_info)
+{
+	// used to send command
+	DWORD empty;
+};
+
+EVENTFUNC(reload_spam_event)
+{
+	AccountDB::instance().ReturnQuery(QID_SPAM_DB, 0, NULL, "SELECT word, score FROM spam_db WHERE type='SPAM'");
+	return PASSES_PER_SEC(g_uiSpamReloadCycle);
+}
+
+void LoadSpamDB()
+{
+	AccountDB::instance().ReturnQuery(QID_SPAM_DB, 0, NULL, "SELECT word, score FROM spam_db WHERE type='SPAM'");
+
+	if (NULL == s_pkReloadSpamEvent)
+	{
+		reload_spam_event_info* info = AllocEventInfo<reload_spam_event_info>();
+		s_pkReloadSpamEvent = event_create(reload_spam_event, info, PASSES_PER_SEC(g_uiSpamReloadCycle));
+	}
+}
+
+void CancelReloadSpamEvent() {
+	s_pkReloadSpamEvent = NULL;
+}
+
+void AccountDB::AnalyzeReturnQuery(SQLMsg * pMsg)
+{
+	CReturnQueryInfo * qi = (CReturnQueryInfo *) pMsg->pvUserData;
+
+	switch (qi->iType)
+	{
+		case QID_SPAM_DB:
+			{
+				if (pMsg->Get()->uiNumRows > 0)
+				{
+					MYSQL_ROW row;
+
+					SpamManager::instance().Clear();
+
+					while ((row = mysql_fetch_row(pMsg->Get()->pSQLResult)))
+						SpamManager::instance().Insert(row[0], atoi(row[1]));
+				}
+			}
+			break;
+	}
+
+	M2_DELETE(qi);
+}
diff --git a/Lead-Server-Source/game/src/db.h b/Lead-Server-Source/game/src/db.h
index 2cea10fb8..3262ebb64 100644
--- a/Lead-Server-Source/game/src/db.h
+++ b/Lead-Server-Source/game/src/db.h
@@ -28,9 +28,7 @@ enum
 	QID_PCBANG_IP_LIST_SELECT,
 	// END_OF_PCBANG_IP_LIST
 
-	// PROTECT_CHILD_FOR_NEWCIBN
 	QID_PROTECT_CHILD,
-	// END_PROTECT_CHILD_FOR_NEWCIBN
 
 	QID_BRAZIL_CREATE_ID,
 	QID_JAPAN_CREATE_ID,
diff --git a/Lead-Server-Source/game/src/desc.cpp b/Lead-Server-Source/game/src/desc.cpp
index 7d226b774..3c75fefe9 100644
--- a/Lead-Server-Source/game/src/desc.cpp
+++ b/Lead-Server-Source/game/src/desc.cpp
@@ -78,8 +78,6 @@ void DESC::Initialize()
 
 	m_iCurrentSequence = 0;
 
-	m_dwMatrixRows = m_dwMatrixCols = 0;
-	m_bMatrixTryCount = 0;
 
 	m_pkLoginKey = NULL;
 	m_dwLoginKey = 0;
@@ -961,29 +959,9 @@ void DESC::SendLoginSuccessPacket()
 //	//printf("STATE_CHECK PACKET PROCESSED.\n");
 //}
 
-void DESC::SetMatrixCardRowsAndColumns(unsigned long rows, unsigned long cols)
-{
-	m_dwMatrixRows = rows;
-	m_dwMatrixCols = cols;
-}
 
-unsigned long DESC::GetMatrixRows()
-{
-	return m_dwMatrixRows;
-}
 
-unsigned long DESC::GetMatrixCols()
-{
-	return m_dwMatrixCols;
-}
 
-bool DESC::CheckMatrixTryCount()
-{
-	if (++m_bMatrixTryCount >= 3)
-		return false;
-
-	return true;
-}
 
 void DESC::SetLoginKey(DWORD dwKey)
 {
diff --git a/Lead-Server-Source/game/src/desc.h b/Lead-Server-Source/game/src/desc.h
index 2ac895ac2..a281d5685 100644
--- a/Lead-Server-Source/game/src/desc.h
+++ b/Lead-Server-Source/game/src/desc.h
@@ -157,13 +157,7 @@ class DESC
 		void			SendLoginSuccessPacket();
 		//void			SendServerStatePacket(int nIndex);
 
-		void			SetMatrixCode(const char * c_psz) { m_stMatrixCode = c_psz; }
-		const char *		GetMatrixCode() { return m_stMatrixCode.c_str(); }
 
-		void			SetMatrixCardRowsAndColumns(unsigned long rows, unsigned long cols);
-		unsigned long		GetMatrixRows();
-		unsigned long		GetMatrixCols();
-		bool			CheckMatrixTryCount();
 
 		void			SetPanamaKey(DWORD dwKey)	{m_dwPanamaKey = dwKey;}
 		DWORD			GetPanamaKey() const		{ return m_dwPanamaKey; }
@@ -233,9 +227,6 @@ class DESC
 
 		int			m_iCurrentSequence;
 
-		DWORD			m_dwMatrixRows;
-		DWORD			m_dwMatrixCols;
-		BYTE			m_bMatrixTryCount;
 
 		CLoginKey *		m_pkLoginKey;
 		DWORD			m_dwLoginKey;
@@ -247,7 +238,6 @@ class DESC
 		bool			m_bHackCRCQuery;
 
 		std::string		m_stClientVersion;
-		std::string		m_stMatrixCode;
 
 		std::string		m_Login;
 		int				m_outtime;
@@ -270,14 +260,8 @@ class DESC
 		LPEVENT			m_pkDisconnectEvent;
 
 	protected:
-		std::string m_stMatrixCardID;
-		std::string m_stMatrixQuiz;
 
 	public:
-		void SetMatrixCardID( const char * szCardID ) { m_stMatrixCardID = szCardID;} 
-		const char * GetMatrixCardID() { return m_stMatrixCardID.c_str();}
-		void SetMatrixQuiz( const char * szCode ) { m_stMatrixCode = szCode; }
-		const char * GetMatrixQuiz() { return m_stMatrixCode.c_str(); }
 
 		void SetLogin( const std::string & login ) { m_Login = login; }
 		void SetLogin( const char * login ) { m_Login = login; }
diff --git a/Lead-Server-Source/game/src/desc_client.cpp b/Lead-Server-Source/game/src/desc_client.cpp
index d502e1cb7..a806dab51 100644
--- a/Lead-Server-Source/game/src/desc_client.cpp
+++ b/Lead-Server-Source/game/src/desc_client.cpp
@@ -18,7 +18,6 @@ LPCLIENT_DESC db_clientdesc = NULL;
 LPCLIENT_DESC g_pkAuthMasterDesc = NULL;
 LPCLIENT_DESC g_NetmarbleDBDesc = NULL;
 LPCLIENT_DESC g_TeenDesc		= NULL;
-LPCLIENT_DESC g_PasspodDesc = NULL;
 
 static const char* GetKnownClientDescName(LPCLIENT_DESC desc) {
 	if (desc == db_clientdesc) {
@@ -29,8 +28,6 @@ static const char* GetKnownClientDescName(LPCLIENT_DESC desc) {
 		return "g_NetmarbleDBDesc";
 	} else if (desc == g_TeenDesc) {
 		return "g_TeenDesc";
-	} else if (desc == g_PasspodDesc) {
-		return "g_PasspodDesc";
 	}
 	return "unknown";
 }
diff --git a/Lead-Server-Source/game/src/desc_client.h b/Lead-Server-Source/game/src/desc_client.h
index 6c3c35a55..5ca923e29 100644
--- a/Lead-Server-Source/game/src/desc_client.h
+++ b/Lead-Server-Source/game/src/desc_client.h
@@ -48,6 +48,5 @@ extern LPCLIENT_DESC db_clientdesc;
 extern LPCLIENT_DESC g_pkAuthMasterDesc;
 extern LPCLIENT_DESC g_NetmarbleDBDesc;
 extern LPCLIENT_DESC g_TeenDesc;
-extern LPCLIENT_DESC g_PasspodDesc;
 
 #endif
diff --git a/Lead-Server-Source/game/src/game.2008.vcproj b/Lead-Server-Source/game/src/game.2008.vcproj
index fb9ab6d2c..467a5a646 100644
--- a/Lead-Server-Source/game/src/game.2008.vcproj
+++ b/Lead-Server-Source/game/src/game.2008.vcproj
@@ -866,14 +866,6 @@
 				RelativePath=".\marriage.h"
 				>
 			</File>
-			<File
-				RelativePath=".\matrix_card.cpp"
-				>
-			</File>
-			<File
-				RelativePath=".\matrix_card.h"
-				>
-			</File>
 			<File
 				RelativePath=".\messenger_manager.cpp"
 				>
@@ -974,14 +966,6 @@
 				RelativePath=".\party.h"
 				>
 			</File>
-			<File
-				RelativePath=".\passpod.cpp"
-				>
-			</File>
-			<File
-				RelativePath=".\passpod.h"
-				>
-			</File>
 			<File
 				RelativePath=".\pcbang.cpp"
 				>
diff --git a/Lead-Server-Source/game/src/game.2008.vcxproj b/Lead-Server-Source/game/src/game.2008.vcxproj
index e43663456..d71228d78 100644
--- a/Lead-Server-Source/game/src/game.2008.vcxproj
+++ b/Lead-Server-Source/game/src/game.2008.vcxproj
@@ -168,7 +168,6 @@
     <ClCompile Include="MarkImage.cpp" />
     <ClCompile Include="MarkManager.cpp" />
     <ClCompile Include="marriage.cpp" />
-    <ClCompile Include="matrix_card.cpp" />
     <ClCompile Include="messenger_manager.cpp" />
     <ClCompile Include="minilzo.c">
       <PrecompiledHeader Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">NotUsing</PrecompiledHeader>
@@ -183,7 +182,6 @@
     <ClCompile Include="packet_info.cpp" />
     <ClCompile Include="panama.cpp" />
     <ClCompile Include="party.cpp" />
-    <ClCompile Include="passpod.cpp" />
     <ClCompile Include="pcbang.cpp" />
     <ClCompile Include="PetSystem.cpp" />
     <ClCompile Include="polymorph.cpp" />
@@ -323,7 +321,6 @@
     <ClInclude Include="MarkImage.h" />
     <ClInclude Include="MarkManager.h" />
     <ClInclude Include="marriage.h" />
-    <ClInclude Include="matrix_card.h" />
     <ClInclude Include="messenger_manager.h" />
     <ClInclude Include="minilzo.h" />
     <ClInclude Include="mining.h" />
@@ -337,7 +334,6 @@
     <ClInclude Include="packet_info.h" />
     <ClInclude Include="panama.h" />
     <ClInclude Include="party.h" />
-    <ClInclude Include="passpod.h" />
     <ClInclude Include="pcbang.h" />
     <ClInclude Include="PetSystem.h" />
     <ClInclude Include="polymorph.h" />
diff --git a/Lead-Server-Source/game/src/game.2008.vcxproj.filters b/Lead-Server-Source/game/src/game.2008.vcxproj.filters
index f8e25a567..d3873ec39 100644
--- a/Lead-Server-Source/game/src/game.2008.vcxproj.filters
+++ b/Lead-Server-Source/game/src/game.2008.vcxproj.filters
@@ -283,9 +283,6 @@
     <ClCompile Include="marriage.cpp">
       <Filter>Source Files</Filter>
     </ClCompile>
-    <ClCompile Include="matrix_card.cpp">
-      <Filter>Source Files</Filter>
-    </ClCompile>
     <ClCompile Include="messenger_manager.cpp">
       <Filter>Source Files</Filter>
     </ClCompile>
@@ -322,9 +319,6 @@
     <ClCompile Include="party.cpp">
       <Filter>Source Files</Filter>
     </ClCompile>
-    <ClCompile Include="passpod.cpp">
-      <Filter>Source Files</Filter>
-    </ClCompile>
     <ClCompile Include="pcbang.cpp">
       <Filter>Source Files</Filter>
     </ClCompile>
@@ -729,9 +723,6 @@
     <ClInclude Include="marriage.h">
       <Filter>Source Files</Filter>
     </ClInclude>
-    <ClInclude Include="matrix_card.h">
-      <Filter>Source Files</Filter>
-    </ClInclude>
     <ClInclude Include="messenger_manager.h">
       <Filter>Source Files</Filter>
     </ClInclude>
@@ -771,9 +762,6 @@
     <ClInclude Include="party.h">
       <Filter>Source Files</Filter>
     </ClInclude>
-    <ClInclude Include="passpod.h">
-      <Filter>Source Files</Filter>
-    </ClInclude>
     <ClInclude Include="pcbang.h">
       <Filter>Source Files</Filter>
     </ClInclude>
diff --git a/Lead-Server-Source/game/src/input.cpp b/Lead-Server-Source/game/src/input.cpp
index 9e948db9c..4affb837a 100644
--- a/Lead-Server-Source/game/src/input.cpp
+++ b/Lead-Server-Source/game/src/input.cpp
@@ -19,7 +19,6 @@
 #include "dev_log.h"
 
 extern time_t get_global_time();
-extern bool g_bNoPasspod;
 
 bool IsEmptyAdminPage()
 {
@@ -285,10 +284,6 @@ int CInputHandshake::Analyze(LPDESC d, BYTE bHeader, const char * c_pData)
 			else
 				stResult = "YES";
 		}
-		else if (!stBuf.compare("IS_PASSPOD_UP"))
-		{
-			if (g_bNoPasspod)
-				stResult = "NO";
 			else
 				stResult = "YES";
 		}
@@ -395,15 +390,7 @@ int CInputHandshake::Analyze(LPDESC d, BYTE bHeader, const char * c_pData)
 					LogManager::instance().CharLog(0, 0, 0, 1, "NOTICE", msg.c_str(), d->GetHostName());
 					BroadcastNotice(msg.c_str());
 				}
-				else if (!stBuf.compare("CLOSE_PASSPOD"))
-				{
-					g_bNoPasspod = true;
-					stResult += "CLOSE_PASSPOD";
 				}
-				else if (!stBuf.compare("OPEN_PASSPOD"))
-				{
-					g_bNoPasspod = false;
-					stResult += "OPEN_PASSPOD";
 				}
 				else if (!stBuf.compare("SHUTDOWN"))
 				{
diff --git a/Lead-Server-Source/game/src/input.h b/Lead-Server-Source/game/src/input.h
index 060c6bb54..9d20a4a23 100644
--- a/Lead-Server-Source/game/src/input.h
+++ b/Lead-Server-Source/game/src/input.h
@@ -367,7 +367,6 @@ class CInputAuth : public CInputProcessor
 	public:
 		void		Login(LPDESC d, const char * c_pData);
 		void		LoginOpenID(LPDESC d, const char * c_pData);		//2012.07.19 OpenID : 김용욱
-		void		PasspodAnswer(LPDESC d, const char * c_pData );
 
 };
 
diff --git a/Lead-Server-Source/game/src/input_auth.cpp b/Lead-Server-Source/game/src/input_auth.cpp
index cd4397b78..3aa970bf6 100644
--- a/Lead-Server-Source/game/src/input_auth.cpp
+++ b/Lead-Server-Source/game/src/input_auth.cpp
@@ -5,8 +5,6 @@
 #include "desc_client.h"
 #include "desc_manager.h"
 #include "protocol.h"
-#include "matrix_card.h"
-#include "passpod.h"
 #include "locale_service.h"
 #include "auth_brazil.h"
 #include "db.h"
@@ -533,9 +531,6 @@ int CInputAuth::Analyze(LPDESC d, BYTE bHeader, const char * c_pData)
 				sys_err("HEADER_CG_LOGIN5_OPENID : wrong client access");
 			break;
 
-		case HEADER_CG_PASSPOD_ANSWER:
-			PasspodAnswer(d, c_pData);
-			break;
 
 		case HEADER_CG_HANDSHAKE:
 			break;
@@ -548,53 +543,3 @@ int CInputAuth::Analyze(LPDESC d, BYTE bHeader, const char * c_pData)
 	return iExtraLen;
 }
 
-void CInputAuth::PasspodAnswer(LPDESC d, const char * c_pData)
-{
-
-	if (!g_bAuthServer)
-	{
-		sys_err ("CInputAuth class is not for game server. IP %s might be a hacker.", 
-			inet_ntoa(d->GetAddr().sin_addr));
-		d->DelayedDisconnect(5);		
-		return;
-	}
-
-	TPacketCGPasspod * packet = (TPacketCGPasspod*)c_pData;
-
-	RequestConfirmPasspod Confirm;
-
-	memcpy(Confirm.passpod, packet->szAnswer, MAX_PASSPOD + 1);
-	memcpy(Confirm.login, d->GetAccountTable().login, LOGIN_MAX_LEN + 1);
-	
-
-	if (!d->GetAccountTable().id)
-	{
-		sys_err("HEADER_CG_PASSPOD_ANSWER received to desc with no account table binded");
-		return;
-	}   
-
-	int ret_code = 1;
-	sys_log(0, "Passpod start %s %s", d->GetAccountTable().login, packet->szAnswer);
-	ret_code = CPasspod::instance().ConfirmPasspod(d->GetAccountTable().login, packet->szAnswer);
-	
-	if (ret_code != 0)
-	{
-		sys_log(0, "PASSPOD: wrong answer: %s ret_code %d", d->GetAccountTable().login, ret_code);
-	
-		LoginFailure(d, ERR_MESSAGE[ret_code]);
-
-		if (!d->CheckMatrixTryCount())
-		{
-			LoginFailure(d, "QUIT");
-			d->SetPhase(PHASE_CLOSE);
-		}
-	}
-	else
-	{
-		sys_log(0, "PASSPOD: success: %s", d->GetAccountTable().login);
-		DBManager::instance().SendAuthLogin(d);
-	}
-//	g_PasspodDesc->DBPacket(HEADER_GP_CONFIRM_PASSPOD,  0, &Confirm, sizeof(Confirm));
-
-//	sys_log(0, "PASSPOD %s %d", Confirm.login, Confirm.passpod);	
-}
diff --git a/Lead-Server-Source/game/src/locale_service.cpp b/Lead-Server-Source/game/src/locale_service.cpp
index 54da15b12..a3d366e51 100644
--- a/Lead-Server-Source/game/src/locale_service.cpp
+++ b/Lead-Server-Source/game/src/locale_service.cpp
@@ -1246,7 +1246,6 @@ bool LC_InitLocalization( const std::string& szLocal )
 	else if ( !g_stLocal.compare("hongkong") )
 		g_eLocalType = LC_HONGKONG;
 	else if (!g_stLocal.compare("newcibn") )
-		g_eLocalType = LC_NEWCIBN;
 	else if ( !g_stLocal.compare("germany") )
 		g_eLocalType = LC_GERMANY;
 	else if ( !g_stLocal.compare("korea") )
@@ -1323,7 +1322,6 @@ bool LC_IsYMIR()		{ return LC_GetLocalType() == LC_YMIR ? true : false; }
 bool LC_IsJapan()		{ return LC_GetLocalType() == LC_JAPAN ? true : false; }
 bool LC_IsEnglish()		{ return LC_GetLocalType() == LC_ENGLISH ? true : false; } 
 bool LC_IsHongKong()	{ return LC_GetLocalType() == LC_HONGKONG ? true : false; }
-bool LC_IsNewCIBN()		{ return LC_GetLocalType() == LC_NEWCIBN ? true : false; }
 bool LC_IsGermany()		{ return LC_GetLocalType() == LC_GERMANY ? true : false; }
 bool LC_IsKorea()		{ return LC_GetLocalType() == LC_KOREA ? true : false; }
 bool LC_IsCanada()		{ return LC_GetLocalType() == LC_CANADA ? false : false; }
@@ -1368,7 +1366,6 @@ bool LC_IsEurope()
 		case LC_WE_KOREA:	// 한국이지만 UK 버전 기반이므로 여기 넣음
 		case LC_TAIWAN:		// 대만이지만 WE_KOREA 버전 기반이므로 여기 넣음
 		case LC_JAPAN:		// 일본이지만 WE(World Edition -_-) 버전이므로 여기 넣음
-		case LC_NEWCIBN:
 		case LC_CANADA:	// 캐나다 GF에서 서비스 시작
 			return true;
 	}
diff --git a/Lead-Server-Source/game/src/locale_service.h b/Lead-Server-Source/game/src/locale_service.h
index 1e2629898..71ab0a8cb 100644
--- a/Lead-Server-Source/game/src/locale_service.h
+++ b/Lead-Server-Source/game/src/locale_service.h
@@ -16,9 +16,7 @@ enum eLocalization
 	LC_YMIR,
 	LC_JAPAN,
 	LC_ENGLISH,
-	LC_HONGKONG,
-	LC_NEWCIBN,
-	LC_GERMANY,
+	LC_HONGKONG,	LC_GERMANY,
 	LC_KOREA,
 	LC_FRANCE,
 	LC_ITALY,
diff --git a/Lead-Server-Source/game/src/main.cpp b/Lead-Server-Source/game/src/main.cpp
index 8fc484d15..f8e08addb 100644
--- a/Lead-Server-Source/game/src/main.cpp
+++ b/Lead-Server-Source/game/src/main.cpp
@@ -46,7 +46,6 @@
 #include "polymorph.h"
 #include "blend_item.h"
 #include "castle.h"
-#include "passpod.h"
 #include "ani.h"
 #include "BattleArena.h"
 #include "over9refine.h"
@@ -453,7 +452,6 @@ int main(int argc, char **argv)
 	CTableBySkill SkillPowerByLevel;
 	CPolymorphUtils polymorph_utils;
 	CProfiler		profiler;
-	CPasspod		passpod;
 	CBattleArena	ba;
 	COver9RefineManager	o9r;
 	SpamManager		spam_mgr;
diff --git a/Lead-Server-Source/game/src/matrix_card.cpp b/Lead-Server-Source/game/src/matrix_card.cpp
deleted file mode 100644
index 34e7ef7ea..000000000
--- a/Lead-Server-Source/game/src/matrix_card.cpp
+++ /dev/null
@@ -1,191 +0,0 @@
-#include "stdafx.h"
-
-//#define __MATRIX_MAIN_ENABLE__ // define 되어 있으면 main 함수가 포함된다. Unit test 시에 사용
-
-#ifdef __MATRIX_MAIN_ENABLE__
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <time.h>
-#include <unistd.h>
-
-#define thecore_random random
-#define sys_err printf
-#define sys_log printf
-
-#endif
-
-#include "matrix_card.h"
-
-#define ROW(rows, i) ((rows >> ((4 - i - 1) * 8)) & 0x000000FF)
-#define COL(cols, i) ((cols >> ((4 - i - 1) * 8)) & 0x000000FF)
-
-const static int MAX_ROWS = 6;
-const static int MAX_COLS = 8;
-const static unsigned int MAX_LENS = (MAX_ROWS * MAX_COLS * 2);
-const static unsigned int MAX_LENE = (MAX_LENS * 2);
-const static int ASLENGTH = 8;
-
-bool EncodeMatrix(const char* szsrc, const char* szpwd, char* lpdes, const unsigned int usize)
-{
-	int nlen = strlen(szsrc);
-	int i;
-
-	if (strlen(szsrc) != MAX_LENS || strlen(szpwd) != MAX_LENS || lpdes == NULL || usize < (MAX_LENE + 1))
-		return false;
-
-	memset(lpdes, 0, usize);
-
-	for (i = 0; i < nlen; i++)
-	{
-		char sc = szsrc[i];
-		char pc = szpwd[i];
-		char dc = sc ^ pc;
-		char szhex[3];
-		snprintf(szhex, sizeof(szhex), "%02X", dc);
-		strlcat(lpdes, szhex, usize);
-	}
-
-	return (i == nlen) ? true : false;
-}
-
-bool DecodeMatrix(const char* szsrc, const char* szpwd, char* lpdes, const unsigned int usize)
-{
-	int nlen = strlen(szpwd);
-	int i;
-
-	if (strlen(szsrc) != MAX_LENE || strlen(szpwd) != MAX_LENS || lpdes == NULL || usize < (MAX_LENS + 1))
-		return false;
-
-	memset(lpdes, 0, usize);
-
-	char szhex[] = { "0123456789ABCDEF" };
-
-	for (i = 0; i < nlen; i++)
-	{
-		char sc1 = szsrc[i*2];
-		char sc2 = szsrc[i*2+1];
-		char pc = szpwd[i];
-		char sn1 = (char)(strchr(szhex, sc1) - szhex); 
-		char sn2 = (char)(strchr(szhex, sc2) - szhex);
-		char dc = (sn1 * 16 + sn2) ^ pc;
-		lpdes[i] = dc;
-	}
-
-	return (i == nlen) ? true : false;
-}
-
-void MatrixCardRndCoordinate(unsigned long & rows, unsigned long & cols)
-{
-	for (register unsigned long i = 0; i < (ASLENGTH >> 1); i++)
-	{
-		rows |= ((thecore_random() % MAX_ROWS) & 0x000000FF) << ((4 - i - 1) * 8);
-		cols |= ((thecore_random() % MAX_COLS) & 0x000000FF) << ((4 - i - 1) * 8);
-	}
-}
-
-bool ChkCoordinate(const unsigned long rows, const unsigned long cols, const char* matrix, const char* answer)
-{
-	unsigned int max_lens = strlen(matrix);
-	int answer_lens = strlen(answer);
-
-	if (max_lens != MAX_LENS || answer_lens != ASLENGTH)
-	{
-		sys_err("MATRIX_CARD: length error matrix %d answer %d", max_lens, answer_lens);
-		return false;
-	}
-
-	bool fResult = true;
-
-	unsigned short * pmatrix = (unsigned short *)matrix;
-	unsigned short * panswer = (unsigned short *)answer;
-
-	for (register unsigned long i = 0; i < (ASLENGTH >> 1); i++)
-	{
-		if (*(pmatrix + (ROW(rows, i) * MAX_COLS + COL(cols, i))) != *(panswer + i))
-		{
-			fResult = false;
-			break;
-		}
-	}
-
-	return fResult;
-}
-
-bool MatrixCardCheck(const char * src, const char * answer, unsigned long rows, unsigned cols)
-{
-	const char * szpasswd = "xEwx3Lb5fH2mnPaMh215cHTbCrFCSmh9yQ3FrybwPnD89QkNX4UTA8UdH41LnU4P94UnaeXDTk17dY5DLaSDPAwvEpMUNTxV";
-
-	char decode_result[MAX_LENS+1];
-	DecodeMatrix(src, szpasswd, decode_result, sizeof(decode_result));
-
-	sys_log(0, "MatrixCardCheck %c%d %c%d %c%d %c%d answer %s", 
-			MATRIX_CARD_ROW(rows, 0) + 'A',
-			MATRIX_CARD_COL(cols, 0) + 1,
-			MATRIX_CARD_ROW(rows, 1) + 'A',
-			MATRIX_CARD_COL(cols, 1) + 1,
-			MATRIX_CARD_ROW(rows, 2) + 'A',
-			MATRIX_CARD_COL(cols, 2) + 1,
-			MATRIX_CARD_ROW(rows, 3) + 'A',
-			MATRIX_CARD_COL(cols, 3) + 1,
-			answer);
-
-	return ChkCoordinate(rows, cols, decode_result, answer);
-}
-
-#ifdef __MATRIX_MAIN_ENABLE__
-
-void GetRightAnswer(const unsigned long rows, const unsigned long cols, const char* matrix, char* answer, const unsigned int nsize)
-{
-	if (strlen(matrix) != MAX_LENS || answer == NULL || nsize < (ASLENGTH + 1))
-		return;
-
-	unsigned short * pmatrix = (unsigned short *)matrix;
-	unsigned short * panswer = (unsigned short *)answer;
-
-	memset(answer, 0, nsize);
-
-	for (register unsigned long i = 0; i < (ASLENGTH >> 1); i++)
-	{
-		char sztemp[3] = { 0, 0, 0 };
-		memcpy(sztemp, (char*)(pmatrix + (ROW(rows, i) * MAX_COLS + COL(cols, i))), 2);
-		strlcat(answer, sztemp, nsize);
-	}
-}
-
-int main(int argc, char* argv[])
-{
-	srandomdev();
-
-	char* szmatrix = "9Vnppuvv6D8uDmKV9Lbn3ntav6Y86tbMLre7w3DmFc4mTNYEm2UtrppuC9LX6yhYShYTSTCLNC1GwCEV717hTaVYCftMK2xS";
-	char* szpasswd = "xEwx3Lb5fH2mnPaMh215cHTbCrFCSmh9yQ3FrybwPnD89QkNX4UTA8UdH41LnU4P94UnaeXDTk17dY5DLaSDPAwvEpMUNTxV";
-
-	// matrix encode and decode test
-	char encode_result[MAX_LENE + 1], decode_result[MAX_LENS+1];
-	EncodeMatrix(szmatrix, szpasswd, encode_result, sizeof(encode_result));
-	printf("Encode result: %s\r\n", encode_result);
-
-	DecodeMatrix(encode_result, szpasswd, decode_result, sizeof(decode_result));
-	printf("Decode result: %s\r\n", decode_result);
-
-	// matrix rand password test
-	unsigned long rand_rows = 0, rand_cols = 0;
-	MatrixCardRndCoordinate(rand_rows, rand_cols); // get rand position of matrix
-
-	// display rand position
-	printf("%c%d %c%d %c%d %c%d\r\n",
-			ROW(rand_rows, 0) + 'A', COL(rand_cols, 0) + 1, \
-			ROW(rand_rows, 1) + 'A', COL(rand_cols, 1) + 1, \
-			ROW(rand_rows, 2) + 'A', COL(rand_cols, 2) + 1, \
-			ROW(rand_rows, 3) + 'A', COL(rand_cols, 3) + 1);
-
-	char answer[9];
-	GetRightAnswer(rand_rows, rand_cols, szmatrix, answer, sizeof(answer));	// get right answer for test, release not need.
-	printf("Answer: %s\r\n", answer);
-
-	bool f = ChkCoordinate(rand_rows, rand_cols, szmatrix, answer);	// check answer
-	printf("Result: %s\n", (f) ? "true" : "false");
-	return 1;
-}
-
-#endif
diff --git a/Lead-Server-Source/game/src/matrix_card.h b/Lead-Server-Source/game/src/matrix_card.h
deleted file mode 100644
index 02dedfd36..000000000
--- a/Lead-Server-Source/game/src/matrix_card.h
+++ /dev/null
@@ -1,10 +0,0 @@
-#ifndef __INC_DB_MATRIXCARD_H__
-#define __INC_DB_MATRIXCARD_H__
-
-extern bool MatrixCardCheck(const char * src, const char * answer, unsigned long rows, unsigned cols);
-extern void MatrixCardRndCoordinate(unsigned long & rows, unsigned long & cols);
-
-#define MATRIX_CARD_ROW(rows, i) ((rows >> ((4 - i - 1) * 8)) & 0x000000FF)
-#define MATRIX_CARD_COL(cols, i) ((cols >> ((4 - i - 1) * 8)) & 0x000000FF)
-
-#endif
diff --git a/Lead-Server-Source/game/src/packet.h b/Lead-Server-Source/game/src/packet.h
index d63c8cbda..33522fcc5 100644
--- a/Lead-Server-Source/game/src/packet.h
+++ b/Lead-Server-Source/game/src/packet.h
@@ -95,10 +95,8 @@ enum
 	HEADER_CG_LOGIN5_OPENID			= 116,	//OpenID : 클라이언트로부터 OpenID 인증키를 받는다.
 
 //	HEADER_CG_ROULETTE				= 200,
-//	HEADER_CG_RUNUP_MATRIX_ANSWER	= 201,
 
 	//
-	HEADER_CG_PASSPOD_ANSWER		= 202,
 
 	//NOTE : 이런 개XXX 정말 이거 Packet설계한 사람은 누구냐. 이렇게 코딩하고 밥이 넘어가나.
 	//enum을 별도로 구별을 하던가. 아님 namepsace로 구별을 하던가..
@@ -232,7 +230,6 @@ enum
 
 	HEADER_GC_NPC_POSITION			= 115,
 
-	HEADER_GC_MATRIX_CARD			= 116,
 	HEADER_GC_LOGIN_KEY				= 118,
 	HEADER_GC_REFINE_INFORMATION		= 119,
 	HEADER_GC_CHANNEL				= 121,
@@ -282,8 +279,6 @@ enum
 	HEADER_GC_ROULETTE					= 200, 
 	// END_ROULETTE			
 	//
-	HEADER_GC_REQUEST_PASSPOD				= 202,
-	HEADER_GC_REQUEST_PASSPOD_FAILED		= 203,
 
 	HEADER_GC_SPECIFIC_EFFECT				= 208,
 
@@ -326,1849 +321,11 @@ enum
 };
 
 #pragma pack(1)
-typedef struct SPacketGGSetup
-{
-	BYTE	bHeader;
-	WORD	wPort;
-	BYTE	bChannel;
-} TPacketGGSetup;
-
-typedef struct SPacketGGLogin
-{
-	BYTE	bHeader;
-	char	szName[CHARACTER_NAME_MAX_LEN + 1];
-	DWORD	dwPID;
-	BYTE	bEmpire;
-	long	lMapIndex;
-	BYTE	bChannel;
-} TPacketGGLogin;
-
-typedef struct SPacketGGLogout
-{
-	BYTE	bHeader;
-	char	szName[CHARACTER_NAME_MAX_LEN + 1];
-} TPacketGGLogout;
-
-typedef struct SPacketGGRelay
-{
-	BYTE	bHeader;
-	char	szName[CHARACTER_NAME_MAX_LEN + 1];
-	long	lSize;
-} TPacketGGRelay;
-
-typedef struct SPacketGGNotice
-{
-	BYTE	bHeader;
-	long	lSize;
-} TPacketGGNotice;
-
-typedef struct SPacketGGMonarchNotice
-{
-	BYTE	bHeader;
-	BYTE	bEmpire;
-	long	lSize;
-} TPacketGGMonarchNotice;
-
-//FORKED_ROAD
-typedef struct SPacketGGForkedMapInfo
-{
-	BYTE	bHeader;
-	BYTE	bPass;
-	BYTE	bSungzi;
-} TPacketGGForkedMapInfo;
-//END_FORKED_ROAD
-typedef struct SPacketGGShutdown
-{
-	BYTE	bHeader;
-} TPacketGGShutdown;
-
-typedef struct SPacketGGGuild
-{
-	BYTE	bHeader;
-	BYTE	bSubHeader;
-	DWORD	dwGuild;
-} TPacketGGGuild;
-
-enum
-{
-	GUILD_SUBHEADER_GG_CHAT,
-	GUILD_SUBHEADER_GG_SET_MEMBER_COUNT_BONUS,
-};
-
-typedef struct SPacketGGGuildChat
-{
-	BYTE	bHeader;
-	BYTE	bSubHeader;
-	DWORD	dwGuild;
-	char	szText[CHAT_MAX_LEN + 1];
-} TPacketGGGuildChat;
-
-typedef struct SPacketGGParty
-{
-	BYTE	header;
-	BYTE	subheader;
-	DWORD	pid;
-	DWORD	leaderpid;
-} TPacketGGParty;
-
-enum
-{
-	PARTY_SUBHEADER_GG_CREATE,
-	PARTY_SUBHEADER_GG_DESTROY,
-	PARTY_SUBHEADER_GG_JOIN,
-	PARTY_SUBHEADER_GG_QUIT,
-};
-
-typedef struct SPacketGGDisconnect
-{
-	BYTE	bHeader;
-	char	szLogin[LOGIN_MAX_LEN + 1];
-} TPacketGGDisconnect;
-
-typedef struct SPacketGGShout
-{
-	BYTE	bHeader;
-	BYTE	bEmpire;
-	char	szText[CHAT_MAX_LEN + 1];
-} TPacketGGShout;
-
-typedef struct SPacketGGXmasWarpSanta
-{
-	BYTE	bHeader;
-	BYTE	bChannel;
-	long	lMapIndex;
-} TPacketGGXmasWarpSanta;
-
-typedef struct SPacketGGXmasWarpSantaReply
-{
-	BYTE	bHeader;
-	BYTE	bChannel;
-} TPacketGGXmasWarpSantaReply;
-
-typedef struct SMessengerData
-{
-	char        szMobile[MOBILE_MAX_LEN + 1];
-} TMessengerData;
-
-typedef struct SPacketGGMessenger
-{   
-	BYTE        bHeader;
-	char        szAccount[CHARACTER_NAME_MAX_LEN + 1];
-	char        szCompanion[CHARACTER_NAME_MAX_LEN + 1];
-} TPacketGGMessenger;
-
-typedef struct SPacketGGMessengerMobile
-{   
-	BYTE        bHeader;
-	char        szName[CHARACTER_NAME_MAX_LEN + 1];
-	char        szMobile[MOBILE_MAX_LEN + 1];
-} TPacketGGMessengerMobile;
-
-typedef struct SPacketGGFindPosition
-{
-	BYTE header;
-	DWORD dwFromPID; // 저 위치로 워프하려는 사람
-	DWORD dwTargetPID; // 찾는 사람
-} TPacketGGFindPosition;
-
-typedef struct SPacketGGWarpCharacter
-{
-	BYTE header;
-	DWORD pid;
-	long x;
-	long y;
-} TPacketGGWarpCharacter;
-
-//  HEADER_GG_GUILD_WAR_ZONE_MAP_INDEX	    = 15,
-
-typedef struct SPacketGGGuildWarMapIndex
-{
-	BYTE bHeader;
-	DWORD dwGuildID1;
-	DWORD dwGuildID2;
-	long lMapIndex;
-} TPacketGGGuildWarMapIndex;
-
-typedef struct SPacketGGTransfer
-{
-	BYTE	bHeader;
-	char	szName[CHARACTER_NAME_MAX_LEN + 1];
-	long	lX, lY;
-} TPacketGGTransfer;
-
-typedef struct SPacketGGLoginPing
-{
-	BYTE	bHeader;
-	char	szLogin[LOGIN_MAX_LEN + 1];
-} TPacketGGLoginPing;
-
-typedef struct SPacketGGBlockChat
-{
-	BYTE	bHeader;
-	char	szName[CHARACTER_NAME_MAX_LEN + 1];
-	long	lBlockDuration;
-} TPacketGGBlockChat;
-
-/* 클라이언트 측에서 보내는 패킷 */
-
-typedef struct command_text
-{
-	BYTE	bHeader;
-} TPacketCGText;
-
-/* 로그인 (1) */
-typedef struct command_handshake
-{
-	BYTE	bHeader;
-	DWORD	dwHandshake;
-	DWORD	dwTime;
-	long	lDelta;
-} TPacketCGHandshake;
-
-typedef struct command_login
-{
-	BYTE	header;
-	char	login[LOGIN_MAX_LEN + 1];
-	char	passwd[PASSWD_MAX_LEN + 1];
-} TPacketCGLogin;
-
-typedef struct command_login2
-{
-	BYTE	header;
-	char	login[LOGIN_MAX_LEN + 1];
-	DWORD	dwLoginKey;
-	DWORD	adwClientKey[4];
-} TPacketCGLogin2;
-
-typedef struct command_login3
-{
-	BYTE	header;
-	char	login[LOGIN_MAX_LEN + 1];
-	char	passwd[PASSWD_MAX_LEN + 1];
-	DWORD	adwClientKey[4];
-} TPacketCGLogin3;
-
-typedef struct command_login5
-{
-	BYTE	header;
-	char	authKey[OPENID_AUTHKEY_LEN + 1];
-	DWORD	adwClientKey[4];
-} TPacketCGLogin5;
-
-typedef struct command_matrix_card
-{
-	BYTE	bHeader;
-	char	szAnswer[MATRIX_ANSWER_MAX_LEN + 1];
-} TPacketCGMatrixCard;
-
-typedef struct packet_matrix_card
-{
-	BYTE	bHeader;
-	DWORD	dwRows;
-	DWORD	dwCols;
-} TPacketGCMatrixCard;
-
-typedef struct packet_login_key
-{
-	BYTE	bHeader;
-	DWORD	dwLoginKey;
-} TPacketGCLoginKey;
-
-typedef struct command_player_select
-{
-	BYTE	header;
-	BYTE	index;
-} TPacketCGPlayerSelect;
-
-typedef struct command_player_delete
-{
-	BYTE	header;
-	BYTE	index;
-	char	private_code[8];
-} TPacketCGPlayerDelete;
-
-typedef struct command_player_create
-{
-	BYTE        header;
-	BYTE        index;
-	char        name[CHARACTER_NAME_MAX_LEN + 1];
-	WORD        job;
-	BYTE	shape;
-	BYTE	Con;
-	BYTE	Int;
-	BYTE	Str;
-	BYTE	Dex;
-} TPacketCGPlayerCreate;
-
-typedef struct command_player_create_success
-{
-	BYTE		header;
-	BYTE		bAccountCharacterIndex;
-	TSimplePlayer	player;
-} TPacketGCPlayerCreateSuccess;
-
-// 공격
-typedef struct command_attack
-{
-	BYTE	bHeader;
-	BYTE	bType;
-	DWORD	dwVID;
-	BYTE	bCRCMagicCubeProcPiece;
-	BYTE	bCRCMagicCubeFilePiece;
-} TPacketCGAttack;
-
-enum EMoveFuncType
-{
-	FUNC_WAIT,
-	FUNC_MOVE,
-	FUNC_ATTACK,
-	FUNC_COMBO,
-	FUNC_MOB_SKILL,
-	_FUNC_SKILL,
-	FUNC_MAX_NUM,
-	FUNC_SKILL = 0x80,
-};
-
-// 이동
-typedef struct command_move
-{
-	BYTE	bHeader;
-	BYTE	bFunc;
-	BYTE	bArg;
-	BYTE	bRot;
-	long	lX;
-	long	lY;
-	DWORD	dwTime;
-} TPacketCGMove;
-
-typedef struct command_sync_position_element
-{
-	DWORD	dwVID;
-	long	lX;
-	long	lY;
-} TPacketCGSyncPositionElement;
-
-// 위치 동기화
-typedef struct command_sync_position	// 가변 패킷
-{
-	BYTE	bHeader;
-	WORD	wSize;
-} TPacketCGSyncPosition;
-
-/* 채팅 (3) */
-typedef struct command_chat	// 가변 패킷
-{
-	BYTE	header;
-	WORD	size;
-	BYTE	type;
-} TPacketCGChat;
-
-/* 귓속말 */
-typedef struct command_whisper
-{
-	BYTE	bHeader;
-	WORD	wSize;
-	char 	szNameTo[CHARACTER_NAME_MAX_LEN + 1];
-} TPacketCGWhisper;
-
-typedef struct command_entergame
-{
-	BYTE	header;
-} TPacketCGEnterGame;
-
-typedef struct command_item_use
-{
-	BYTE 	header;
-	TItemPos 	Cell;
-} TPacketCGItemUse;
-
-typedef struct command_item_use_to_item
-{
-	BYTE	header;
-	TItemPos	Cell;
-	TItemPos	TargetCell;
-} TPacketCGItemUseToItem;
-
-typedef struct command_item_drop
-{
-	BYTE 	header;
-	TItemPos 	Cell;
-	DWORD	gold;
-} TPacketCGItemDrop;
-
-typedef struct command_item_drop2
-{
-	BYTE 	header;
-	TItemPos 	Cell;
-	DWORD	gold;
-	BYTE	count;
-} TPacketCGItemDrop2;
-
-typedef struct command_item_move
-{
-	BYTE 	header;
-	TItemPos	Cell;
-	TItemPos	CellTo;
-	BYTE	count;
-} TPacketCGItemMove;
-
-typedef struct command_item_pickup
-{
-	BYTE 	header;
-	DWORD	vid;
-} TPacketCGItemPickup;
-
-typedef struct command_quickslot_add
-{
-	BYTE	header;
-	BYTE	pos;
-	TQuickslot	slot;
-} TPacketCGQuickslotAdd;
-
-typedef struct command_quickslot_del
-{
-	BYTE	header;
-	BYTE	pos;
-} TPacketCGQuickslotDel;
-
-typedef struct command_quickslot_swap
-{
-	BYTE	header;
-	BYTE	pos;
-	BYTE	change_pos;
-} TPacketCGQuickslotSwap;
-
-enum
-{
-	SHOP_SUBHEADER_CG_END,
-	SHOP_SUBHEADER_CG_BUY,
-	SHOP_SUBHEADER_CG_SELL,
-	SHOP_SUBHEADER_CG_SELL2
-};
-
-typedef struct command_shop_buy
-{
-	BYTE	count;
-} TPacketCGShopBuy;
-
-typedef struct command_shop_sell
-{
-	BYTE	pos;
-	BYTE	count;
-} TPacketCGShopSell;
-
-typedef struct command_shop
-{
-	BYTE	header;
-	BYTE	subheader;
-} TPacketCGShop;
-
-typedef struct command_on_click
-{
-	BYTE	header;
-	DWORD	vid;
-} TPacketCGOnClick;
-
-enum
-{
-	EXCHANGE_SUBHEADER_CG_START,	/* arg1 == vid of target character */
-	EXCHANGE_SUBHEADER_CG_ITEM_ADD,	/* arg1 == position of item */
-	EXCHANGE_SUBHEADER_CG_ITEM_DEL,	/* arg1 == position of item */
-	EXCHANGE_SUBHEADER_CG_ELK_ADD,	/* arg1 == amount of gold */
-	EXCHANGE_SUBHEADER_CG_ACCEPT,	/* arg1 == not used */
-	EXCHANGE_SUBHEADER_CG_CANCEL,	/* arg1 == not used */
-};
-
-typedef struct command_exchange
-{
-	BYTE	header;
-	BYTE	sub_header;
-	DWORD	arg1;
-	BYTE	arg2;
-	TItemPos	Pos;
-} TPacketCGExchange;
-
-typedef struct command_position
-{
-	BYTE	header;
-	BYTE	position;
-} TPacketCGPosition;
-
-typedef struct command_script_answer
-{
-	BYTE	header;
-	BYTE	answer;
-	//char	file[32 + 1];
-	//BYTE	answer[16 + 1];
-} TPacketCGScriptAnswer;
-
-
-typedef struct command_script_button
-{
-	BYTE        header;
-	unsigned int	idx;
-} TPacketCGScriptButton;
-
-typedef struct command_quest_input_string
-{
-	BYTE header;
-	char msg[64+1];
-} TPacketCGQuestInputString;
-
-typedef struct command_quest_confirm
-{
-	BYTE header;
-	BYTE answer;
-	DWORD requestPID;
-} TPacketCGQuestConfirm;
-
-/*
- * 서버 측에서 보내는 패킷 
- */
-typedef struct packet_quest_confirm
-{
-	BYTE header;
-	char msg[64+1]; 
-	long timeout;
-	DWORD requestPID;
-} TPacketGCQuestConfirm;
-
-typedef struct packet_handshake
-{
-	BYTE	bHeader;
-	DWORD	dwHandshake;
-	DWORD	dwTime;
-	long	lDelta;
-} TPacketGCHandshake;
-
-enum EPhase
-{
-	PHASE_CLOSE,
-	PHASE_HANDSHAKE,
-	PHASE_LOGIN,
-	PHASE_SELECT,
-	PHASE_LOADING,
-	PHASE_GAME,
-	PHASE_DEAD,
-
-	PHASE_CLIENT_CONNECTING,
-	PHASE_DBCLIENT,
-	PHASE_P2P,
-	PHASE_AUTH,
-	PHASE_TEEN,
-	PHASE_PASSPOD,
-};
-
-typedef struct packet_phase
-{
-	BYTE	header;
-	BYTE	phase;
-} TPacketGCPhase;
-
-typedef struct packet_bindudp
-{
-	BYTE	header;
-	DWORD	addr;
-	WORD	port;
-} TPacketGCBindUDP;
-
-enum
-{
-	LOGIN_FAILURE_ALREADY	= 1,
-	LOGIN_FAILURE_ID_NOT_EXIST	= 2,
-	LOGIN_FAILURE_WRONG_PASS	= 3,
-	LOGIN_FAILURE_FALSE		= 4,
-	LOGIN_FAILURE_NOT_TESTOR	= 5,
-	LOGIN_FAILURE_NOT_TEST_TIME	= 6,
-	LOGIN_FAILURE_FULL		= 7
-};
-
-typedef struct packet_login_success
-{
-	BYTE		bHeader;
-	TSimplePlayer	players[PLAYER_PER_ACCOUNT];
-	DWORD		guild_id[PLAYER_PER_ACCOUNT];
-	char		guild_name[PLAYER_PER_ACCOUNT][GUILD_NAME_MAX_LEN+1];
-
-	DWORD		handle;
-	DWORD		random_key;
-} TPacketGCLoginSuccess;
-
-typedef struct packet_auth_success
-{
-	BYTE	bHeader;
-	DWORD	dwLoginKey;
-	BYTE	bResult;
-} TPacketGCAuthSuccess;
-
-typedef struct packet_auth_success_openid
-{
-	BYTE	bHeader;
-	DWORD	dwLoginKey;
-	BYTE	bResult;
-	char	login[LOGIN_MAX_LEN + 1];
-} TPacketGCAuthSuccessOpenID;
-
-typedef struct packet_login_failure
-{
-	BYTE	header;
-	char	szStatus[ACCOUNT_STATUS_MAX_LEN + 1];
-} TPacketGCLoginFailure;
-
-typedef struct packet_create_failure
-{
-	BYTE	header;
-	BYTE	bType;
-} TPacketGCCreateFailure;
-
-enum
-{
-	ADD_CHARACTER_STATE_DEAD		= (1 << 0),
-	ADD_CHARACTER_STATE_SPAWN		= (1 << 1),
-	ADD_CHARACTER_STATE_GUNGON		= (1 << 2),
-	ADD_CHARACTER_STATE_KILLER		= (1 << 3),
-	ADD_CHARACTER_STATE_PARTY		= (1 << 4),
-};
-
-enum ECharacterEquipmentPart
-{
-	CHR_EQUIPPART_ARMOR,
-	CHR_EQUIPPART_WEAPON,
-	CHR_EQUIPPART_HEAD,
-	CHR_EQUIPPART_HAIR,
-	CHR_EQUIPPART_NUM,
-};
-
-typedef struct packet_add_char
-{
-	BYTE	header;
-	DWORD	dwVID;
-
-	float	angle;
-	long	x;
-	long	y;
-	long	z;
-
-	BYTE	bType;
-	WORD	wRaceNum;
-	BYTE	bMovingSpeed;
-	BYTE	bAttackSpeed;
-
-	BYTE	bStateFlag;
-	DWORD	dwAffectFlag[2];	// 효과
-} TPacketGCCharacterAdd;
-
-typedef struct packet_char_additional_info
-{
-	BYTE    header;
-	DWORD   dwVID;
-	char    name[CHARACTER_NAME_MAX_LEN + 1];
-	WORD    awPart[CHR_EQUIPPART_NUM];
-	BYTE	bEmpire;
-	DWORD   dwGuildID;
-	DWORD   dwLevel;
-	short	sAlignment;
-	BYTE	bPKMode;
-	DWORD	dwMountVnum;
-} TPacketGCCharacterAdditionalInfo;
-
-/*
-   typedef struct packet_update_char_old
-   {
-   BYTE	header;
-   DWORD	dwVID;
-
-   WORD        awPart[CHR_EQUIPPART_NUM];
-   BYTE	bMovingSpeed;
-   BYTE	bAttackSpeed;
-
-   BYTE	bStateFlag;
-   DWORD	dwAffectFlag[2];
-
-   DWORD	dwGuildID;
-   short	sAlignment;
-   BYTE	bPKMode;
-   DWORD	dwMountVnum;
-   } TPacketGCCharacterUpdateOld;
- */
-
-typedef struct packet_update_char
-{
-	BYTE	header;
-	DWORD	dwVID;
-
-	WORD        awPart[CHR_EQUIPPART_NUM];
-	BYTE	bMovingSpeed;
-	BYTE	bAttackSpeed;
-
-	BYTE	bStateFlag;
-	DWORD	dwAffectFlag[2];
-
-	DWORD	dwGuildID;
-	short	sAlignment;
-	BYTE	bPKMode;
-	DWORD	dwMountVnum;
-	//WORD	wRaceNum;
-} TPacketGCCharacterUpdate;
-
-typedef struct packet_del_char
-{
-	BYTE	header;
-	DWORD	id;
-} TPacketGCCharacterDelete;
-
-typedef struct packet_chat	// 가변 패킷
-{
-	BYTE	header;
-	WORD	size;
-	BYTE	type;
-	DWORD	id;
-	BYTE	bEmpire;
-} TPacketGCChat;
-
-typedef struct packet_whisper	// 가변 패킷
-{
-	BYTE	bHeader;
-	WORD	wSize;
-	BYTE	bType;
-	char	szNameFrom[CHARACTER_NAME_MAX_LEN + 1];
-} TPacketGCWhisper;
-
-typedef struct packet_main_character
-{
-	BYTE        header;
-	DWORD	dwVID;
-	WORD	wRaceNum;
-	char	szName[CHARACTER_NAME_MAX_LEN + 1];
-	long	lx, ly, lz;
-	BYTE	empire;
-	BYTE	skill_group;
-} TPacketGCMainCharacter;
-
-// SUPPORT_BGM
-typedef struct packet_main_character3_bgm
-{
-	enum
-	{
-		MUSIC_NAME_LEN = 24,
-	};
-
-	BYTE    header;
-	DWORD	dwVID;
-	WORD	wRaceNum;
-	char	szChrName[CHARACTER_NAME_MAX_LEN + 1];
-	char	szBGMName[MUSIC_NAME_LEN + 1];
-	long	lx, ly, lz;
-	BYTE	empire;
-	BYTE	skill_group;
-} TPacketGCMainCharacter3_BGM;
-
-typedef struct packet_main_character4_bgm_vol
-{
-	enum
-	{
-		MUSIC_NAME_LEN = 24,
-	};
-
-	BYTE    header;
-	DWORD	dwVID;
-	WORD	wRaceNum;
-	char	szChrName[CHARACTER_NAME_MAX_LEN + 1];
-	char	szBGMName[MUSIC_NAME_LEN + 1];
-	float	fBGMVol;
-	long	lx, ly, lz;
-	BYTE	empire;
-	BYTE	skill_group;
-} TPacketGCMainCharacter4_BGM_VOL;
-// END_OF_SUPPORT_BGM
-
-typedef struct packet_points
-{
-	BYTE	header;
-	INT		points[POINT_MAX_NUM];
-} TPacketGCPoints;
-
-typedef struct packet_skill_level
-{
-	BYTE		bHeader;
-	TPlayerSkill	skills[SKILL_MAX_NUM];
-} TPacketGCSkillLevel;
-
-typedef struct packet_point_change
-{
-	int		header;
-	DWORD	dwVID;
-	BYTE	type;
-	long	amount;
-	long	value;
-} TPacketGCPointChange;
-
-typedef struct packet_stun
-{
-	BYTE	header;
-	DWORD	vid;
-} TPacketGCStun;
-
-typedef struct packet_dead
-{
-	BYTE	header;
-	DWORD	vid;
-} TPacketGCDead;
-
-struct TPacketGCItemDelDeprecated
-{
-	BYTE	header;
-	TItemPos Cell;
-	DWORD	vnum;
-	BYTE	count;
-	long	alSockets[ITEM_SOCKET_MAX_NUM];
-	TPlayerItemAttribute aAttr[ITEM_ATTRIBUTE_MAX_NUM];
-};
-
-typedef struct packet_item_set
-{
-	BYTE	header;
-	TItemPos Cell;
-	DWORD	vnum;
-	BYTE	count;
-	DWORD	flags;
-	DWORD	anti_flags;
-	bool	highlight;
-	long	alSockets[ITEM_SOCKET_MAX_NUM];
-	TPlayerItemAttribute aAttr[ITEM_ATTRIBUTE_MAX_NUM];
-} TPacketGCItemSet;
-
-typedef struct packet_item_del
-{
-	BYTE	header;
-	BYTE	pos;
-} TPacketGCItemDel;
-
-struct packet_item_use
-{
-	BYTE	header;
-	TItemPos Cell;
-	DWORD	ch_vid;
-	DWORD	victim_vid;
-	DWORD	vnum;
-};
-
-struct packet_item_move
-{
-	BYTE	header;
-	TItemPos Cell;
-	TItemPos CellTo;
-};
-
-typedef struct packet_item_update
-{
-	BYTE	header;
-	TItemPos Cell;
-	BYTE	count;
-	long	alSockets[ITEM_SOCKET_MAX_NUM];
-	TPlayerItemAttribute aAttr[ITEM_ATTRIBUTE_MAX_NUM];
-} TPacketGCItemUpdate;
-
-typedef struct packet_item_ground_add
-{
-	BYTE	bHeader;
-	long 	x, y, z;
-	DWORD	dwVID;
-	DWORD	dwVnum;
-} TPacketGCItemGroundAdd;
-
-typedef struct packet_item_ownership
-{
-	BYTE	bHeader;
-	DWORD	dwVID;
-	char	szName[CHARACTER_NAME_MAX_LEN + 1];
-} TPacketGCItemOwnership;
-
-typedef struct packet_item_ground_del
-{
-	BYTE	bHeader;
-	DWORD	dwVID;
-} TPacketGCItemGroundDel;
-
-struct packet_quickslot_add
-{
-	BYTE	header;
-	BYTE	pos;
-	TQuickslot	slot;
-};
-
-struct packet_quickslot_del
-{
-	BYTE	header;
-	BYTE	pos;
-};
-
-struct packet_quickslot_swap
-{
-	BYTE	header;
-	BYTE	pos;
-	BYTE	pos_to;
-};
-
-struct packet_motion
-{
-	BYTE	header;
-	DWORD	vid;
-	DWORD	victim_vid;
-	WORD	motion;
-};
-
-enum EPacketShopSubHeaders
-{
-	SHOP_SUBHEADER_GC_START,
-	SHOP_SUBHEADER_GC_END,
-	SHOP_SUBHEADER_GC_UPDATE_ITEM,
-	SHOP_SUBHEADER_GC_UPDATE_PRICE,
-	SHOP_SUBHEADER_GC_OK,
-	SHOP_SUBHEADER_GC_NOT_ENOUGH_MONEY,
-	SHOP_SUBHEADER_GC_SOLDOUT,
-	SHOP_SUBHEADER_GC_INVENTORY_FULL,
-	SHOP_SUBHEADER_GC_INVALID_POS,
-	SHOP_SUBHEADER_GC_SOLD_OUT,
-	SHOP_SUBHEADER_GC_START_EX,
-	SHOP_SUBHEADER_GC_NOT_ENOUGH_MONEY_EX,
-};
-
-struct packet_shop_item
-{   
-	DWORD       vnum;
-	DWORD       price;
-	BYTE        count;
-	BYTE		display_pos;
-	long	alSockets[ITEM_SOCKET_MAX_NUM];
-	TPlayerItemAttribute aAttr[ITEM_ATTRIBUTE_MAX_NUM];
-};
-
-typedef struct packet_shop_start
-{
-	DWORD   owner_vid;
-	struct packet_shop_item	items[SHOP_HOST_ITEM_MAX_NUM];
-} TPacketGCShopStart;
-
-typedef struct packet_shop_start_ex // 다음에 TSubPacketShopTab* shop_tabs 이 따라옴.
-{
-	typedef struct sub_packet_shop_tab 
-	{
-		char name[SHOP_TAB_NAME_MAX];
-		BYTE coin_type;
-		packet_shop_item items[SHOP_HOST_ITEM_MAX_NUM];
-	} TSubPacketShopTab;
-	DWORD owner_vid;
-	BYTE shop_tab_count;
-} TPacketGCShopStartEx;
-
-typedef struct packet_shop_update_item
-{
-	BYTE			pos;
-	struct packet_shop_item	item;
-} TPacketGCShopUpdateItem;
-
-typedef struct packet_shop_update_price
-{
-	int				iPrice;
-} TPacketGCShopUpdatePrice;
-
-typedef struct packet_shop	// 가변 패킷
-{
-	BYTE        header;
-	WORD	size; 
-	BYTE        subheader;
-} TPacketGCShop;
-
-struct packet_exchange
-{
-	BYTE	header;
-	BYTE	sub_header;
-	BYTE	is_me;
-	DWORD	arg1;	// vnum
-	TItemPos	arg2;	// cell
-	DWORD	arg3;	// count
-	long	alSockets[ITEM_SOCKET_MAX_NUM];
-	TPlayerItemAttribute aAttr[ITEM_ATTRIBUTE_MAX_NUM];
-};
-
-enum EPacketTradeSubHeaders
-{
-	EXCHANGE_SUBHEADER_GC_START,	/* arg1 == vid */
-	EXCHANGE_SUBHEADER_GC_ITEM_ADD,	/* arg1 == vnum  arg2 == pos  arg3 == count */
-	EXCHANGE_SUBHEADER_GC_ITEM_DEL,
-	EXCHANGE_SUBHEADER_GC_GOLD_ADD,	/* arg1 == gold */
-	EXCHANGE_SUBHEADER_GC_ACCEPT,	/* arg1 == accept */
-	EXCHANGE_SUBHEADER_GC_END,		/* arg1 == not used */
-	EXCHANGE_SUBHEADER_GC_ALREADY,	/* arg1 == not used */
-	EXCHANGE_SUBHEADER_GC_LESS_GOLD,	/* arg1 == not used */
-};
-
-struct packet_position
-{
-	BYTE	header;
-	DWORD	vid;
-	BYTE	position;
-};
-
-typedef struct packet_ping
-{
-	BYTE	header;
-} TPacketGCPing;
-
-struct packet_script
-{
-	BYTE	header;
-	WORD	size;
-	BYTE	skin;
-	WORD	src_size;
-};
-
-typedef struct packet_change_speed
-{
-	BYTE		header;
-	DWORD		vid;
-	WORD		moving_speed;
-} TPacketGCChangeSpeed;
-
-struct packet_mount
-{
-	BYTE	header;
-	DWORD	vid;
-	DWORD	mount_vid;
-	BYTE	pos;
-	DWORD	x, y;
-};
-
-typedef struct packet_move
-{	
-	BYTE		bHeader;
-	BYTE		bFunc;
-	BYTE		bArg;
-	BYTE		bRot;
-	DWORD		dwVID;
-	long		lX;
-	long		lY;
-	DWORD		dwTime;
-	DWORD		dwDuration;
-} TPacketGCMove;
-
-// 소유권
-typedef struct packet_ownership
-{
-	BYTE		bHeader;
-	DWORD		dwOwnerVID;
-	DWORD		dwVictimVID;
-} TPacketGCOwnership;
-
-// 위치 동기화 패킷의 bCount 만큼 붙는 단위
-typedef struct packet_sync_position_element
-{
-	DWORD	dwVID;
-	long	lX;
-	long	lY;
-} TPacketGCSyncPositionElement;
-
-// 위치 동기화
-typedef struct packet_sync_position	// 가변 패킷
-{
-	BYTE	bHeader;
-	WORD	wSize;	// 개수 = (wSize - sizeof(TPacketGCSyncPosition)) / sizeof(TPacketGCSyncPositionElement) 
-} TPacketGCSyncPosition;
-
-typedef struct packet_fly
-{
-	BYTE	bHeader;
-	BYTE	bType;
-	DWORD	dwStartVID;
-	DWORD	dwEndVID;
-} TPacketGCCreateFly;
-
-typedef struct command_fly_targeting
-{
-	BYTE		bHeader;
-	DWORD		dwTargetVID;
-	long		x, y;
-} TPacketCGFlyTargeting;
-
-typedef struct packet_fly_targeting
-{
-	BYTE		bHeader;
-	DWORD		dwShooterVID;
-	DWORD		dwTargetVID;
-	long		x, y;
-} TPacketGCFlyTargeting;
-
-typedef struct packet_shoot
-{
-	BYTE		bHeader;
-	BYTE		bType;
-} TPacketCGShoot;
-
-typedef struct packet_duel_start
-{
-	BYTE	header;
-	WORD	wSize;	// DWORD가 몇개? 개수 = (wSize - sizeof(TPacketGCPVPList)) / 4
-} TPacketGCDuelStart;
-
-enum EPVPModes
-{
-	PVP_MODE_NONE,
-	PVP_MODE_AGREE,
-	PVP_MODE_FIGHT,
-	PVP_MODE_REVENGE
-};
-
-typedef struct packet_pvp
-{
-	BYTE        bHeader;
-	DWORD       dwVIDSrc;
-	DWORD       dwVIDDst;
-	BYTE        bMode;	// 0 이면 끔, 1이면 켬
-} TPacketGCPVP;
-
-typedef struct command_use_skill
-{
-	BYTE	bHeader;
-	DWORD	dwVnum;
-	DWORD	dwVID;
-} TPacketCGUseSkill;
-
-typedef struct command_target
-{
-	BYTE	header;
-	DWORD	dwVID;
-} TPacketCGTarget;
-
-typedef struct packet_target
-{
-	BYTE	header;
-	DWORD	dwVID;
-	BYTE	bHPPercent;
-} TPacketGCTarget;
-
-typedef struct packet_warp
-{
-	BYTE	bHeader;
-	long	lX;
-	long	lY;
-	long	lAddr;
-	WORD	wPort;
-} TPacketGCWarp;
-
-typedef struct command_warp
-{
-	BYTE	bHeader;
-} TPacketCGWarp;
-
-struct packet_quest_info
-{
-	BYTE header;
-	WORD size;
-	WORD index;
-	BYTE flag;
-};
-
-enum 
-{
-	MESSENGER_SUBHEADER_GC_LIST,
-	MESSENGER_SUBHEADER_GC_LOGIN,
-	MESSENGER_SUBHEADER_GC_LOGOUT,
-	MESSENGER_SUBHEADER_GC_INVITE,
-	MESSENGER_SUBHEADER_GC_MOBILE
-};
 
-typedef struct packet_messenger
-{
-	BYTE header;
-	WORD size;
-	BYTE subheader;
-} TPacketGCMessenger;
-
-typedef struct packet_messenger_guild_list
-{
-	BYTE connected;
-	BYTE length;
-	//char login[LOGIN_MAX_LEN+1];
-} TPacketGCMessengerGuildList;
-
-typedef struct packet_messenger_guild_login
-{
-	BYTE length;
-	//char login[LOGIN_MAX_LEN+1];
-} TPacketGCMessengerGuildLogin;
-
-typedef struct packet_messenger_guild_logout
-{
-	BYTE length;
-
-	//char login[LOGIN_MAX_LEN+1];
-} TPacketGCMessengerGuildLogout;
-
-typedef struct packet_messenger_list_offline
-{
-	BYTE connected; // always 0
-	BYTE length;
-} TPacketGCMessengerListOffline;
-
-typedef struct packet_messenger_list_online
-{
-	BYTE connected; // always 1
-	BYTE length;
-} TPacketGCMessengerListOnline;
-
-enum 
-{
-	MESSENGER_SUBHEADER_CG_ADD_BY_VID,
-	MESSENGER_SUBHEADER_CG_ADD_BY_NAME,
-	MESSENGER_SUBHEADER_CG_REMOVE,
-	MESSENGER_SUBHEADER_CG_INVITE_ANSWER,
-};
-
-typedef struct command_messenger
-{
-	BYTE header;
-	BYTE subheader;
-} TPacketCGMessenger;
-
-typedef struct command_messenger_add_by_vid
-{
-	DWORD vid;
-} TPacketCGMessengerAddByVID;
-
-typedef struct command_messenger_add_by_name
-{
-	BYTE length;
-	//char login[LOGIN_MAX_LEN+1];
-} TPacketCGMessengerAddByName;
-
-typedef struct command_messenger_remove
-{
-	char login[LOGIN_MAX_LEN+1];
-	//DWORD account;
-} TPacketCGMessengerRemove;
-
-typedef struct command_safebox_checkout
-{
-	BYTE	bHeader;
-	BYTE	bSafePos;
-	TItemPos	ItemPos;
-} TPacketCGSafeboxCheckout;
-
-typedef struct command_safebox_checkin
-{
-	BYTE	bHeader;
-	BYTE	bSafePos;
-	TItemPos	ItemPos;
-} TPacketCGSafeboxCheckin;
-
-///////////////////////////////////////////////////////////////////////////////////
-// Party
-
-typedef struct command_party_parameter
-{
-	BYTE	bHeader;
-	BYTE	bDistributeMode;
-} TPacketCGPartyParameter;
-
-typedef struct paryt_parameter
-{
-	BYTE	bHeader;
-	BYTE	bDistributeMode;
-} TPacketGCPartyParameter;
-
-typedef struct packet_party_add
-{
-	BYTE	header;
-	DWORD	pid;
-	char	name[CHARACTER_NAME_MAX_LEN+1];
-} TPacketGCPartyAdd;
-
-typedef struct command_party_invite
-{
-	BYTE	header;
-	DWORD	vid;
-} TPacketCGPartyInvite;
-
-typedef struct packet_party_invite
-{
-	BYTE	header;
-	DWORD	leader_vid;
-} TPacketGCPartyInvite;
-
-typedef struct command_party_invite_answer
-{
-	BYTE	header;
-	DWORD	leader_vid;
-	BYTE	accept;
-} TPacketCGPartyInviteAnswer;
-
-typedef struct packet_party_update
-{
-	BYTE	header;
-	DWORD	pid;
-	BYTE	role;
-	BYTE	percent_hp;
-	short	affects[7];
-} TPacketGCPartyUpdate;
-
-typedef struct packet_party_remove
-{
-	BYTE header;
-	DWORD pid;
-} TPacketGCPartyRemove;
-
-typedef struct packet_party_link
-{
-	BYTE header;
-	DWORD pid;
-	DWORD vid;
-} TPacketGCPartyLink;
-
-typedef struct packet_party_unlink
-{
-	BYTE header;
-	DWORD pid;
-	DWORD vid;
-} TPacketGCPartyUnlink;
-
-typedef struct command_party_remove
-{
-	BYTE header;
-	DWORD pid;
-} TPacketCGPartyRemove;
-
-typedef struct command_party_set_state
-{
-	BYTE header;
-	DWORD pid;
-	BYTE byRole;
-	BYTE flag;
-} TPacketCGPartySetState;
-
-enum 
-{
-	PARTY_SKILL_HEAL = 1,
-	PARTY_SKILL_WARP = 2
-};
-
-typedef struct command_party_use_skill
-{
-	BYTE header;
-	BYTE bySkillIndex;
-	DWORD vid;
-} TPacketCGPartyUseSkill;
-
-typedef struct packet_safebox_size
-{
-	BYTE bHeader;
-	BYTE bSize;
-} TPacketCGSafeboxSize;
-
-typedef struct packet_safebox_wrong_password
-{
-	BYTE	bHeader;
-} TPacketCGSafeboxWrongPassword;
-
-typedef struct command_empire
-{
-	BYTE	bHeader;
-	BYTE	bEmpire;
-} TPacketCGEmpire;
-
-typedef struct packet_empire
-{
-	BYTE	bHeader;
-	BYTE	bEmpire;
-} TPacketGCEmpire;
-
-enum
-{
-	SAFEBOX_MONEY_STATE_SAVE,
-	SAFEBOX_MONEY_STATE_WITHDRAW,
-};
-
-typedef struct command_safebox_money
-{
-	BYTE        bHeader;
-	BYTE        bState;
-	long	lMoney;
-} TPacketCGSafeboxMoney;
-
-typedef struct packet_safebox_money_change
-{
-	BYTE	bHeader;
-	long	lMoney;
-} TPacketGCSafeboxMoneyChange;
-
-// Guild
-
-enum
-{
-	GUILD_SUBHEADER_GC_LOGIN,
-	GUILD_SUBHEADER_GC_LOGOUT,
-	GUILD_SUBHEADER_GC_LIST,
-	GUILD_SUBHEADER_GC_GRADE,
-	GUILD_SUBHEADER_GC_ADD,
-	GUILD_SUBHEADER_GC_REMOVE,
-	GUILD_SUBHEADER_GC_GRADE_NAME,
-	GUILD_SUBHEADER_GC_GRADE_AUTH,
-	GUILD_SUBHEADER_GC_INFO,
-	GUILD_SUBHEADER_GC_COMMENTS,
-	GUILD_SUBHEADER_GC_CHANGE_EXP,
-	GUILD_SUBHEADER_GC_CHANGE_MEMBER_GRADE,
-	GUILD_SUBHEADER_GC_SKILL_INFO,
-	GUILD_SUBHEADER_GC_CHANGE_MEMBER_GENERAL,
-	GUILD_SUBHEADER_GC_GUILD_INVITE,
-	GUILD_SUBHEADER_GC_WAR,
-	GUILD_SUBHEADER_GC_GUILD_NAME,
-	GUILD_SUBHEADER_GC_GUILD_WAR_LIST,
-	GUILD_SUBHEADER_GC_GUILD_WAR_END_LIST,
-	GUILD_SUBHEADER_GC_WAR_SCORE,
-	GUILD_SUBHEADER_GC_MONEY_CHANGE,
-};
-
-enum GUILD_SUBHEADER_CG
-{
-	GUILD_SUBHEADER_CG_ADD_MEMBER,
-	GUILD_SUBHEADER_CG_REMOVE_MEMBER,
-	GUILD_SUBHEADER_CG_CHANGE_GRADE_NAME,
-	GUILD_SUBHEADER_CG_CHANGE_GRADE_AUTHORITY,
-	GUILD_SUBHEADER_CG_OFFER,
-	GUILD_SUBHEADER_CG_POST_COMMENT,
-	GUILD_SUBHEADER_CG_DELETE_COMMENT,    
-	GUILD_SUBHEADER_CG_REFRESH_COMMENT,
-	GUILD_SUBHEADER_CG_CHANGE_MEMBER_GRADE,
-	GUILD_SUBHEADER_CG_USE_SKILL,
-	GUILD_SUBHEADER_CG_CHANGE_MEMBER_GENERAL,
-	GUILD_SUBHEADER_CG_GUILD_INVITE_ANSWER,
-	GUILD_SUBHEADER_CG_CHARGE_GSP,
-	GUILD_SUBHEADER_CG_DEPOSIT_MONEY,
-	GUILD_SUBHEADER_CG_WITHDRAW_MONEY,
-};
-
-typedef struct packet_guild
-{
-	BYTE header;
-	WORD size;
-	BYTE subheader;
-} TPacketGCGuild;
-
-typedef struct packet_guild_name_t
-{
-	BYTE header;
-	WORD size;
-	BYTE subheader;
-	DWORD	guildID;
-	char	guildName[GUILD_NAME_MAX_LEN];
-} TPacketGCGuildName;
-
-typedef struct packet_guild_war
-{
-	DWORD	dwGuildSelf;
-	DWORD	dwGuildOpp;
-	BYTE	bType;
-	BYTE 	bWarState;
-} TPacketGCGuildWar;
-
-typedef struct command_guild
-{
-	BYTE header;
-	BYTE subheader;
-} TPacketCGGuild;
-
-typedef struct command_guild_answer_make_guild
-{
-	BYTE header;
-	char guild_name[GUILD_NAME_MAX_LEN+1];
-} TPacketCGAnswerMakeGuild;
-
-typedef struct command_guild_use_skill
-{
-	DWORD	dwVnum;
-	DWORD	dwPID;
-} TPacketCGGuildUseSkill;
-
-// Guild Mark
-typedef struct command_mark_login
-{
-	BYTE    header;
-	DWORD   handle;
-	DWORD   random_key;
-} TPacketCGMarkLogin;
-
-typedef struct command_mark_upload
-{
-	BYTE	header;
-	DWORD	gid;
-	BYTE	image[16*12*4];
-} TPacketCGMarkUpload;
-
-typedef struct command_mark_idxlist
-{
-	BYTE	header;
-} TPacketCGMarkIDXList;
-
-typedef struct command_mark_crclist
-{
-	BYTE	header;
-	BYTE	imgIdx;
-	DWORD	crclist[80];
-} TPacketCGMarkCRCList;
-
-typedef struct packet_mark_idxlist
-{
-	BYTE    header;
-	DWORD	bufSize;
-	WORD	count;
-	//뒤에 size * (WORD + WORD)만큼 데이터 붙음
-} TPacketGCMarkIDXList;
-
-typedef struct packet_mark_block
-{
-	BYTE	header;
-	DWORD	bufSize;
-	BYTE	imgIdx;
-	DWORD	count;
-	// 뒤에 64 x 48 x 픽셀크기(4바이트) = 12288만큼 데이터 붙음
-} TPacketGCMarkBlock;
-
-typedef struct command_symbol_upload
-{
-	BYTE	header;
-	WORD	size;
-	DWORD	guild_id;
-} TPacketCGGuildSymbolUpload;
-
-typedef struct command_symbol_crc
-{
-	BYTE header;
-	DWORD guild_id;
-	DWORD crc;
-	DWORD size;
-} TPacketCGSymbolCRC;
-
-typedef struct packet_symbol_data
-{
-	BYTE header;
-	WORD size;
-	DWORD guild_id;
-} TPacketGCGuildSymbolData;
-
-// Fishing
-
-typedef struct command_fishing
-{
-	BYTE header;
-	BYTE dir;
-} TPacketCGFishing;
-
-typedef struct packet_fishing
-{
-	BYTE header;
-	BYTE subheader;
-	DWORD info;
-	BYTE dir;
-} TPacketGCFishing;
-
-enum
-{
-	FISHING_SUBHEADER_GC_START,
-	FISHING_SUBHEADER_GC_STOP,
-	FISHING_SUBHEADER_GC_REACT,
-	FISHING_SUBHEADER_GC_SUCCESS,
-	FISHING_SUBHEADER_GC_FAIL,
-	FISHING_SUBHEADER_GC_FISH,
-};
-
-typedef struct command_give_item
-{
-	BYTE byHeader;
-	DWORD dwTargetVID;
-	TItemPos ItemPos;
-	BYTE byItemCount;
-} TPacketCGGiveItem;
-
-typedef struct SPacketCGHack
-{
-	BYTE	bHeader;
-	char	szBuf[255 + 1];
-} TPacketCGHack;
-
-// SubHeader - Dungeon
-enum
-{
-	DUNGEON_SUBHEADER_GC_TIME_ATTACK_START = 0,
-	DUNGEON_SUBHEADER_GC_DESTINATION_POSITION = 1,
-};
-
-typedef struct packet_dungeon
-{
-	BYTE bHeader;
-	WORD size;
-	BYTE subheader;
-} TPacketGCDungeon;
-
-typedef struct packet_dungeon_dest_position
-{
-	long x;
-	long y;
-} TPacketGCDungeonDestPosition;
-
-typedef struct SPacketGCShopSign
-{
-	BYTE	bHeader;
-	DWORD	dwVID;
-	char	szSign[SHOP_SIGN_MAX_LEN + 1];
-} TPacketGCShopSign;
-
-typedef struct SPacketCGMyShop
-{
-	BYTE	bHeader;
-	char	szSign[SHOP_SIGN_MAX_LEN + 1];
-	BYTE	bCount;
-} TPacketCGMyShop;
-
-typedef struct SPacketGCTime
-{
-	BYTE	bHeader;
-	time_t	time;
-} TPacketGCTime;
-
-enum
-{
-	WALKMODE_RUN,
-	WALKMODE_WALK,
-};
-
-typedef struct SPacketGCWalkMode
-{
-	BYTE	header;
-	DWORD	vid;
-	BYTE	mode;
-} TPacketGCWalkMode;
-
-typedef struct SPacketGCChangeSkillGroup
-{
-	BYTE        header;
-	BYTE        skill_group;
-} TPacketGCChangeSkillGroup;
-
-typedef struct SPacketCGRefine
-{
-	BYTE	header;
-	BYTE	pos;
-	BYTE	type;
-} TPacketCGRefine;
-
-typedef struct SPacketCGRequestRefineInfo
-{
-	BYTE	header;
-	BYTE	pos;
-} TPacketCGRequestRefineInfo;
-
-typedef struct SPacketGCRefineInformaion
-{
-	BYTE	header;
-	BYTE	type;
-	BYTE	pos;
-	DWORD	src_vnum;
-	DWORD	result_vnum;
-	BYTE	material_count;
-	int		cost; // 소요 비용
-	int		prob; // 확률
-	TRefineMaterial materials[REFINE_MATERIAL_MAX_NUM];
-} TPacketGCRefineInformation;
-
-struct TNPCPosition
-{
-	BYTE bType;
-	char name[CHARACTER_NAME_MAX_LEN+1];
-	long x;
-	long y;
-};
-
-typedef struct SPacketGCNPCPosition
-{
-	BYTE header;
-	WORD size;
-	WORD count;
-
-	// array of TNPCPosition
-} TPacketGCNPCPosition;
 
-typedef struct SPacketGCSpecialEffect
-{
-	BYTE header;
-	BYTE type;
-	DWORD vid;
-} TPacketGCSpecialEffect;
-
-typedef struct SPacketCGChangeName
-{
-	BYTE header;
-	BYTE index;
-	char name[CHARACTER_NAME_MAX_LEN+1];
-} TPacketCGChangeName;
-
-typedef struct SPacketGCChangeName
-{
-	BYTE header;
-	DWORD pid;
-	char name[CHARACTER_NAME_MAX_LEN+1];
-} TPacketGCChangeName;
-
-
-typedef struct command_client_version
-{
-	BYTE header;
-	char filename[32+1];
-	char timestamp[32+1];
-} TPacketCGClientVersion;
-
-typedef struct command_client_version2
-{
-	BYTE header;
-	char filename[32+1];
-	char timestamp[32+1];
-} TPacketCGClientVersion2;
-
-typedef struct packet_channel
-{
-	BYTE header;
-	BYTE channel;
-} TPacketGCChannel;
-
-typedef struct pakcet_view_equip
-{
-	BYTE  header;
-	DWORD vid;
-	struct {
-		DWORD	vnum;
-		BYTE	count;
-		long	alSockets[ITEM_SOCKET_MAX_NUM];
-		TPlayerItemAttribute aAttr[ITEM_ATTRIBUTE_MAX_NUM];
-	} equips[WEAR_MAX_NUM];
-} TPacketViewEquip;
-
-typedef struct 
-{
-	DWORD	dwID;
-	long	x, y;
-	long	width, height;
-	DWORD	dwGuildID;
-} TLandPacketElement;
-
-typedef struct packet_land_list
-{
-	BYTE	header;
-	WORD	size;
-} TPacketGCLandList;
-
-typedef struct
-{
-	BYTE	bHeader;
-	long	lID;
-	char	szName[32+1];
-	DWORD	dwVID;
-	BYTE	bType;
-} TPacketGCTargetCreate;
-
-typedef struct
-{
-	BYTE	bHeader;
-	long	lID;
-	long	lX, lY;
-} TPacketGCTargetUpdate;
-
-typedef struct
-{
-	BYTE	bHeader;
-	long	lID;
-} TPacketGCTargetDelete;
-
-typedef struct
-{
-	BYTE		bHeader;
-	TPacketAffectElement elem;
-} TPacketGCAffectAdd;
-
-typedef struct
-{
-	BYTE	bHeader;
-	DWORD	dwType;
-	BYTE	bApplyOn;
-} TPacketGCAffectRemove;
-
-typedef struct packet_lover_info
-{
-	BYTE header;
-	char name[CHARACTER_NAME_MAX_LEN + 1];
-	BYTE love_point;
-} TPacketGCLoverInfo;
-
-typedef struct packet_love_point_update
-{
-	BYTE header;
-	BYTE love_point;
-} TPacketGCLovePointUpdate;
-
-// MINING
-typedef struct packet_dig_motion
-{
-	BYTE header;
-	DWORD vid;
-	DWORD target_vid;
-	BYTE count;
-} TPacketGCDigMotion;
-// END_OF_MINING
-
-// SCRIPT_SELECT_ITEM
-typedef struct command_script_select_item
-{
-	BYTE header;
-	DWORD selection;
-} TPacketCGScriptSelectItem;
-// END_OF_SCRIPT_SELECT_ITEM
-
-typedef struct packet_damage_info
-{
-	BYTE header;
-	DWORD dwVID;
-	BYTE flag;
-	int damage;
-} TPacketGCDamageInfo;
-
-enum 
-{
-	RUNUP_MATRIX_ANSWER_MAX_LEN = 4,
-	RUNUP_MATRIX_QUIZ_MAX_LEN = 8 ,
-	
-};
-
-typedef struct packet_runup_matrix_quiz
-{
-	BYTE    bHeader;
-	char    szQuiz[RUNUP_MATRIX_QUIZ_MAX_LEN + 1];
-} TPacketGCRunupMatrixQuiz;
 
-typedef struct command_runup_matrix_answer
-{
-	BYTE    bHeader;
-	char    szAnswer[RUNUP_MATRIX_ANSWER_MAX_LEN + 1];
-} TPacketCGRunupMatrixAnswer;
 
-typedef struct packet_passpod 
-{
-	BYTE    bHeader;
-	char    szAnswer[8+1];
-} TPacketCGPasspod;
 
-typedef struct packet_passpod_failed 
-{
-	BYTE    bHeader;
-	char    szMessage[128];
-} TPacketCGPasspodFailed;
 
 typedef struct tag_GGSiege
 {
diff --git a/Lead-Server-Source/game/src/packet_info.cpp b/Lead-Server-Source/game/src/packet_info.cpp
index 83bb2eab9..8052872b4 100644
--- a/Lead-Server-Source/game/src/packet_info.cpp
+++ b/Lead-Server-Source/game/src/packet_info.cpp
@@ -220,7 +220,6 @@ CPacketInfoCG::CPacketInfoCG()
 	Set(HEADER_CG_MALL_CHECKOUT, sizeof(TPacketCGSafeboxCheckout), "MallCheckout", true);
 
 	Set(HEADER_CG_SCRIPT_SELECT_ITEM, sizeof(TPacketCGScriptSelectItem), "ScriptSelectItem", true);
-	Set(HEADER_CG_PASSPOD_ANSWER, sizeof(TPacketCGPasspod), "PasspodAnswer", true);
 
 	Set(HEADER_CG_DRAGON_SOUL_REFINE, sizeof(TPacketCGDragonSoulRefine), "DragonSoulRefine", false);
 	Set(HEADER_CG_STATE_CHECKER, sizeof(BYTE), "ServerStateCheck", false);
diff --git a/Lead-Server-Source/game/src/passpod.cpp b/Lead-Server-Source/game/src/passpod.cpp
deleted file mode 100644
index afe405053..000000000
--- a/Lead-Server-Source/game/src/passpod.cpp
+++ /dev/null
@@ -1,196 +0,0 @@
-#include "stdafx.h"
-#include "constants.h"
-#include "passpod.h"
-
-extern BOOL g_test_server;
-extern int test_server;
-const char ERR_STRINGS[6][32] = 
-{
-	"AUTH_SUCCESS" ,
-	"AUTH_FAILURE:PASSPOD_ERROR" ,
-	"AUTH_FAILURE:USER_NOT_FOUND" ,
-	"AUTH_FAILURE:SYSTEM_NOT_FOUND" ,
-	"AUTH_FAILURE:TOKEN_DISABLED" ,
-	"AUTH_FAILURE:EMPTY",
-};
-
-const char ERR_MESSAGE[6][64] =
-{
-	"SUCCESS",
-	"PASERR1",
-	"PASERR2",
-	"PASERR3",
-	"PASERR4",
-	"PASERR5"
-};
-
-CPasspod::CPasspod()
-	: m_sock(INVALID_SOCKET), m_lpFDW(NULL)
-{
-}
-
-
-CPasspod::~CPasspod()
-{
-}
-
-int CPasspod::ConfirmPasspod( const char * account, const char * passpod )
-{
-	const char * servername = "1001";
-	const char * algname = "plaintext";
-	const char * posspod_server = "/passpod-server";
-	const char * auth = "/auth.s";
-
-
-	char szRequest[1024];
-	char szResult[1024];
-	char szTmp[128];
-
-	int ret_code = 1; // 0 이 성공 
-
-	snprintf( szRequest, sizeof(szRequest), "username=%s&systemname=%s&passpod=%s&algname=%s", account, servername, passpod, algname );
-	snprintf( szResult, sizeof(szResult), "POST %s%s HTTP/1.0\r\n", posspod_server, auth );
-	snprintf( szTmp, sizeof(szTmp), "Host: %s\r\n", "218.99.6.103" );
-	strlcat( szResult, szTmp, sizeof(szResult) );
-	strlcat( szResult, "Content-type: application/x-www-form-urlencoded\r\n", sizeof(szResult) ); 
-	snprintf( szTmp, sizeof(szTmp), "Content-length: %d\r\n", strlen(szRequest));
-	strlcat( szResult, szTmp, sizeof(szResult) );
-	strlcat( szResult, "Connection: Close\r\n\r\n", sizeof(szResult) );
-	strlcat( szResult, szRequest, sizeof(szResult) );
-
-	if ( !Connect( NULL ) )
-	{
-		sys_log( 0, "PASSPOD : Can not connect to passpod server" );
-		Disconnect();
-		return ret_code; 
-	}
-	
-	int ret = socket_write( m_sock, (const char *)szResult, strlen(szResult));
-
-	sys_log( 0, "PASSPOD : Write End %s %s", account, passpod );
-	if ( test_server )
-	{
-		sys_log( 0, "PASSPOD : %s", szResult );
-		
-	}
-	char Read[1024];
-	int nCount = 5;
-	while (--nCount)
-	{
-		ret = recv(m_sock, Read, 1024, 0);
-
-		if ( ret > 0 )
-		{
-			if ( test_server )
-			{
-				sys_log( 0, "PASSPOD : %d", ret );
-			}
-			break;
-		}
-		else
-		{	
-			if ( test_server )
-			{
-				sys_log( 0, "PASSPOD : %d", ret );
-			}
-			Disconnect();
-			return ret_code;
-		}
-	}
-	sys_log( 0, "PASSPOD : Read End %s %s \n %s\n", account, passpod, Read );
-	
-	char * pos = Read;
-	nCount = 15;
-	while ( --nCount )
-	{
-		int n = 0;
-
-		//라인넘기기
-		for (; pos[n]!='\n'; ++n  ) {}
-	
-		//\n에서 멈추기 하나더 남겨주자 	
-		pos = pos+n+1;
-
-		
-		//Return Value 를 비교 
-		if ( 0 == strncmp( pos, "AUTH_SUCCESS", strlen(ERR_STRINGS[0]) ) )
-		{
-			ret_code = E_PASSPOD_SUCCESS;
-			break;
-		}
-		if ( 0 == strncmp( pos, "AUTH_FAILURE:PASSPOD_ERROR", strlen(ERR_STRINGS[1]) ) )
-		{
-			ret_code = E_PASSPOD_FAILED_PASSPOD_ERROR;
-			break;
-		}
-		if ( 0 == strncmp( pos, "AUTH_FAILURE:USER_NOT_FOUND", strlen(ERR_STRINGS[2] ) ) )
-		{
-			ret_code = E_PASSPOD_FAILED_USER_NOT_FOUND;
-			break;
-		}
-		if ( 0 == strncmp( pos, "AUTH_FAILURE:SYSTEM_NOT_FOUND", strlen(ERR_STRINGS[3] ) ) )
-		{
-			ret_code = E_PASSPOD_FAILED_SYSTEM_NOT_FOUND;
-			break;
-		}
-		if ( 0 == strncmp( pos, "AUTH_FAILURE:TOKEN_DISABLED", strlen(ERR_STRINGS[4] ) ) )
-		{
-			ret_code = E_PASSPOD_FAILED_TOKEN_DISABLED;
-			break;
-		}
-		if ( 0 == strncmp( pos, "AUTH_FAILURE:EMPTY", strlen(ERR_STRINGS[5] )  ) )
-		{
-			ret_code = E_PASSPOD_FAILED_EMPTY;
-			break;
-		}
-
-	}
-
-	sys_log(0, "PASSPOD Ret Value = %s ", ERR_STRINGS[ret_code] );
-	
-
-	this->Disconnect();
-	return ret_code;
-	
-}
-
-bool CPasspod::Connect( LPFDWATCH fdw )
-{
-
-//	m_lpFDW = fdw;
-
-	if ( m_sock != INVALID_SOCKET )
-	{
-		sys_err( "Sock != INVALID_SOCKET " );
-		return false;
-	}
-		
-	m_sock = socket_connect( "218.99.6.103", 8080 );
-
-	if ( m_sock == INVALID_SOCKET )
-	{
-		sys_err( "Sock == INVALID_SOCKET " );
-		return false;
-	}
-
-
-
-	//fdwatch_add_fd( m_lpFDW, m_sock, this, FDW_READ, false );
-	//fdwatch_add_fd( m_lpFDW, m_sock, this, FDW_WRITE, false );
-	
-	
-	return true;
-}
-
-bool CPasspod::Disconnect()
-{
-	//fdwatch_del_fd( m_lpFDW, m_sock );
-	socket_close(m_sock);
-	m_sock = INVALID_SOCKET;
-	return true;
-}
-
-bool CPasspod::IConv( const char * src, char * desc )
-{
-	return true;
-}
diff --git a/Lead-Server-Source/game/src/passpod.h b/Lead-Server-Source/game/src/passpod.h
deleted file mode 100644
index f8a03cc84..000000000
--- a/Lead-Server-Source/game/src/passpod.h
+++ /dev/null
@@ -1,28 +0,0 @@
-#ifndef PASSPOD_H
-#define PASSPOD_H
-
-class CPasspod : public singleton<CPasspod>
-{
-public:
-	CPasspod();
-	~CPasspod();
-
- 	int ConfirmPasspod( const char * account,const char* passpod  );
-	bool Connect( LPFDWATCH fdw );
-	bool Disconnect();
-
-
-private:
-	bool IConv( const char * src, char * desc );
-
-
-private:
-
-	socket_t 	m_sock;
-	LPFDWATCH 	m_lpFDW;
-};
-
-extern const char ERR_STRINGS[6][32]; 
-extern const char ERR_MESSAGE[6][64]; 
-
-#endif
diff --git a/Lead-Server-Source/game/src/test.vcproj b/Lead-Server-Source/game/src/test.vcproj
index 802e43885..cbcc824a5 100644
--- a/Lead-Server-Source/game/src/test.vcproj
+++ b/Lead-Server-Source/game/src/test.vcproj
@@ -810,14 +810,6 @@
 				RelativePath=".\marriage.h"
 				>
 			</File>
-			<File
-				RelativePath=".\matrix_card.cpp"
-				>
-			</File>
-			<File
-				RelativePath=".\matrix_card.h"
-				>
-			</File>
 			<File
 				RelativePath=".\messenger_manager.cpp"
 				>
@@ -918,14 +910,6 @@
 				RelativePath=".\party.h"
 				>
 			</File>
-			<File
-				RelativePath=".\passpod.cpp"
-				>
-			</File>
-			<File
-				RelativePath=".\passpod.h"
-				>
-			</File>
 			<File
 				RelativePath=".\pcbang.cpp"
 				>
diff --git a/Lead-Server-Source/make_test_env.bat b/Lead-Server-Source/make_test_env.bat
index 763ea3b0d..224fed734 100644
--- a/Lead-Server-Source/make_test_env.bat
+++ b/Lead-Server-Source/make_test_env.bat
@@ -26,7 +26,6 @@ mklink /D ymir ..\..\..\..\..\dist\dev\Test\Server\locale\ymir
 mklink /D canada ..\..\..\..\..\dist\ca\Test\Server\locale\canada
 mklink /D brazil ..\..\..\..\..\dist\br\Test\Server\locale\brazil
 mklink /D taiwan ..\..\..\..\..\dist\tw\Test\Server\locale\taiwan
-mklink /D NEWCIBN ..\..\..\..\..\dist\NEWCIBN\Test\Server\locale\NEWCIBN
 mklink /D we_korea ..\..\..\..\..\dist\we_korea\Test\Server\locale\we_korea
 cd ..
 cd ..
